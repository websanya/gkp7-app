webpackJsonp([1],{"/WRZ":function(t,e){},"7YgM":function(t,e){t.exports={name:"gkp7-app",version:"0.8.0",description:"Vue.js приложение для автоматизации прохождения медицинских осмотров в МБУЗ ГКП №7.",author:"Alexander Goncharov <me@websanya.ru>",private:!0,scripts:{dev:"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js",start:"npm run dev",unit:"cross-env BABEL_ENV=test karma start test/unit/karma.conf.js --single-run",e2e:"node test/e2e/runner.js",test:"npm run unit && npm run e2e",lint:"eslint --ext .js,.vue src test/unit test/e2e/specs",build:"node build/build.js"},dependencies:{axios:"^0.17.1",moment:"^2.22.1","node-sass":"^4.8.3","sass-loader":"^6.0.7",vue:"^2.5.16","vue-cookie":"^1.1.4","vue-router":"^3.0.1",vuetify:"^1.0.16"},devDependencies:{autoprefixer:"^7.2.6","babel-core":"^6.22.1","babel-eslint":"^8.2.3","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.4","babel-plugin-istanbul":"^4.1.6","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-runtime":"^6.22.0","babel-plugin-transform-vue-jsx":"^3.7.0","babel-preset-env":"^1.3.2","babel-preset-stage-2":"^6.22.0","babel-register":"^6.22.0",chai:"^4.1.2",chalk:"^2.4.0",chromedriver:"^2.37.0","copy-webpack-plugin":"^4.5.1","cross-env":"^5.1.4","cross-spawn":"^5.0.1","css-loader":"^0.28.11",eslint:"^4.19.1","eslint-config-standard":"^10.2.1","eslint-friendly-formatter":"^3.0.0","eslint-loader":"^1.7.1","eslint-plugin-import":"^2.11.0","eslint-plugin-node":"^5.2.0","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.0.1","eslint-plugin-vue":"^4.5.0","extract-text-webpack-plugin":"^3.0.0","file-loader":"^1.1.11","friendly-errors-webpack-plugin":"^1.7.0","html-webpack-plugin":"^2.30.1","inject-loader":"^3.0.0",karma:"^1.4.1","karma-coverage":"^1.1.1","karma-mocha":"^1.3.0","karma-phantomjs-launcher":"^1.0.2","karma-phantomjs-shim":"^1.4.0","karma-sinon-chai":"^1.3.4","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"0.0.31","karma-webpack":"^2.0.13",mocha:"^3.2.0",nightwatch:"^0.9.20","node-notifier":"^5.1.2","optimize-css-assets-webpack-plugin":"^3.2.0",ora:"^1.4.0","phantomjs-prebuilt":"^2.1.14",portfinder:"^1.0.13","postcss-import":"^11.1.0","postcss-loader":"^2.1.4","postcss-url":"^7.3.2",rimraf:"^2.6.0","selenium-server":"^3.11.0",semver:"^5.3.0",shelljs:"^0.7.6",sinon:"^4.5.0","sinon-chai":"^2.8.0","uglifyjs-webpack-plugin":"^1.2.5","url-loader":"^0.5.8","vue-loader":"^13.7.1","vue-style-loader":"^3.1.2","vue-template-compiler":"^2.5.16",webpack:"^3.11.0","webpack-bundle-analyzer":"^2.11.1","webpack-dev-server":"^2.11.2","webpack-merge":"^4.1.2"},engines:{node:">= 6.0.0",npm:">= 3.0.0"},browserslist:["> 1%","last 2 versions","not ie <= 8"]}},"7zck":function(t,e){},FM6E:function(t,e){},HQkp:function(t,e){},II7m:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("/5sW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",[e("transition",[e("keep-alive",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")({name:"app"},s,!1,function(t){a("eola")},null,null).exports,n=a("/ocq"),i=a("mtWM"),l=a.n(i),c="http://"+window.location.hostname+":3001",u={user:{authenticated:!1,roles:{}},authenticate:function(t,e,a){var r=this;l.a.post(c+"/api/v1/auth",e).then(function(e){var s=e.data;t.$cookie.set("token",s.token,"1D"),t.$cookie.set("user_id",s.user._id,"1D"),t.validLogin=!0,r.user.authenticated=!0,r.user.roles=s.user.roles,a&&rt.push(a)}).catch(function(e){var a=e.response.data;t.snackbar=!0,t.message=a.message})},signup:function(t,e,a){var r=this;l.a.post(c+"/api/v1/signup",e).then(function(s){s.data;t.validSignUp=!0,r.authenticate(t,e,a)}).catch(function(e){var a=e.response.data;t.snackbar=!0,t.message=a.message})},signOut:function(t,e){t.$cookie.delete("token"),t.$cookie.delete("user_id"),this.user.authenticated=!1,rt.push("/")},checkAuthentication:function(){var t=this.getCookie("token");this.user.authenticated=!!t},getAuthenticationHeader:function(t){return"Bearer "+t.$cookie.get("token")},getCookie:function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([.$?*|{}()[\]\\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}},d={data:function(){return{snackbar:!1,validLogin:!1,loginPasswordVisible:!1,rules:[function(t){return!!t||"Поле обязательно для заполнения"}],credentials:{username:"",password:""},message:""}},methods:{submitAuthentication:function(){u.authenticate(this,this.credentials,"/")}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Войдите в систему")]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-card-text",[a("v-form",{model:{value:t.validLogin,callback:function(e){t.validLogin=e},expression:"validLogin"}},[a("v-text-field",{attrs:{label:"Логин","prepend-icon":"person",rules:t.rules,required:""},model:{value:t.credentials.username,callback:function(e){t.$set(t.credentials,"username",e)},expression:"credentials.username"}}),t._v(" "),a("v-text-field",{attrs:{label:"Пароль","prepend-icon":"lock",rules:t.rules,"append-icon":t.loginPasswordVisible?"visibility":"visibility_off","append-icon-cb":function(){return t.loginPasswordVisible=!t.loginPasswordVisible},type:t.loginPasswordVisible?"text":"password",required:""},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.submitAuthentication()}},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(e){t.submitAuthentication()}}},[t._v("Войти")])],1)],1),t._v(" "),a("v-snackbar",{attrs:{timeout:6e3,bottom:"bottom",color:"red lighten-1"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n            "+t._s(t.message)+"\n          ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},v=a("VU/8")(d,m,!1,null,null,null).exports,p="http://"+window.location.hostname+":3001",h={data:function(){return{currentUser:{},companies:[],medosTypes:[{value:{typeId:1,typeName:"поступление на работу"},text:"1 - поступление на работу"},{value:{typeId:2,typeName:"периодический проф. осмотр"},text:"2 - периодический проф. осмотр"},{value:{typeId:3,typeName:"перевод из цеха в цех"},text:"3 - перевод из цеха в цех"},{value:{typeId:5,typeName:"по санитарной книжке"},text:"5 - по санитарной книжке"},{value:{typeId:6,typeName:"водительская мед. комиссия"},text:"6 - водительская мед. комиссия"},{value:{typeId:7,typeName:"поступление в учебное заведение"},text:"7 - поступление в учебное заведение"},{value:{typeId:8,typeName:"осмотр на ношение оружия"},text:"8 - осмотр на ношение оружия"}],companiesForSelect:[],currentEditPatient:{},currentAddPatient:{},currentAddJob:{},currentEditJob:{},currentRemoveItem:{},currentMedos:{},patientQuery:{},patients:[],addPatientDialog:{show:!1},addJobDialog:{show:!1},editJobDialog:{show:!1},currentCompanyDivisions:[],currentDivisionDepartments:[],editPatientDialog:{show:!1},removeDialog:{show:!1},addMedosDialog:{show:!1},snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"light-blue darken-4",secondaryColor:"yellow darken-4"}}},mounted:function(){this.getCurrentUser(),this.getAllCompanies()},methods:{openAddPatientDialog:function(){this.addPatientDialog.show=!0},closeAddPatientDialog:function(){this.addPatientDialog.show=!1},saveAddPatientDialog:function(){var t=this,e={fio:this.currentAddPatient.fio,dateBirth:this.currentAddPatient.dateBirth,sex:this.currentAddPatient.sex,passport:this.currentAddPatient.passport,phone:this.currentAddPatient.phone,updatedBy:this.currentUser._id};this.currentAddPatient.activeJob&&(e.activeJob=this.currentAddPatient.activeJob),l.a.post(p+"/api/v1/patient/",e,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.currentAddPatient={},t.currentAddJob={},t.addPatientDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})},openAddJobDialog:function(){this.addJobDialog.show=!0},closeAddJobDialog:function(){this.addJobDialog.show=!1},saveAddJobDialog:function(){this.addJobDialog.show=!1;var t=this.currentAddJob;t.updatedBy=this.currentUser._id,this.addPatientDialog.show?this.currentAddPatient.activeJob=t:this.editPatientDialog.show&&(this.currentEditPatient.activeJob=t)},openEditPatientDialog:function(t){this.currentEditPatient=t,this.editPatientDialog.show=!0},noEditPatientDialog:function(){this.currentEditPatient={},this.editPatientDialog.show=!1},yesEditPatientDialog:function(){var t=this,e={fio:this.currentEditPatient.fio,dateBirth:this.currentEditPatient.dateBirth,sex:this.currentEditPatient.sex,passport:this.currentEditPatient.passport,phone:this.currentEditPatient.phone,activeJob:this.currentEditPatient.activeJob,updatedBy:this.currentUser._id};l.a.put(p+"/api/v1/patient/"+this.currentEditPatient._id+"/",e,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.currentEditPatient={},t.editPatientDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})},openEditJobDialog:function(){this.currentEditJob.jobCompany={},this.currentEditJob.jobCompany.jobCompanyId=this.currentEditPatient.activeJob.jobCompany.jobCompanyId,this.currentEditJob.jobCompany.jobCompanyName=this.currentEditPatient.activeJob.jobCompany.jobCompanyName,this.editJobDialog.show=!0,this.updateCompanyDivisions(),this.updateDivisionDepartments()},closeEditJobDialog:function(){this.editJobDialog.show=!1},saveEditJobDialog:function(){this.editJobDialog.show=!1;var t=this.currentEditJob;t.updatedBy=this.currentUser._id,this.currentEditPatient.activeJob=t},openRemoveDialog:function(t){this.currentRemoveItem=t,this.removeDialog.show=!0},noRemoveDialog:function(){this.removeDialog.show=!1,this.currentRemoveItem={}},yesRemoveDialog:function(){var t=this;this.currentRemoveItem.fio&&this.currentRemoveItem._id?this.patients.forEach(function(e,a){e===t.currentRemoveItem&&l.a.delete(p+"/api/v1/patient/"+t.currentRemoveItem._id+"/",{headers:{Authorization:u.getAuthenticationHeader(t)}}).then(function(e){e.data.success?(t.patients.splice(a,1),t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=1e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.show=!0,t.snackBar.message=e.data.message}).catch(function(e){t.errorHandler(e)})}):this.currentRemoveItem.jobName?this.currentEditPatient.activeJob={}:(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что удалять."),this.removeDialog.show=!1,this.currentRemoveItem={}},openRegisterMedicalExamination:function(t){console.log(t),void 0===t.activeJob?(this.snackBar.show=!0,this.snackBar.color="red darken-1 white--text",this.snackBar.message="У пациента не указано место работы",this.snackBar.timeout=5e3):!0===t.hasActiveMedos?(this.snackBar.show=!0,this.snackBar.color="red darken-1 white--text",this.snackBar.message="Пациент уже зарегистрирован на мед. осмотр",this.snackBar.timeout=5e3):(this.currentEditPatient=t,this.addMedosDialog.show=!0)},closeRegisterMedicalExamination:function(){this.currentEditPatient={},this.addMedosDialog.show=!1},saveRegisterMedicalExamination:function(){var t=this;this.currentMedos.medosJob=this.currentEditPatient.activeJob;var e={updatedBy:this.currentUser._id,currentMedos:this.currentMedos};l.a.post(p+"/api/v1/patient/"+this.currentEditPatient._id+"/active-medos/",e,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.currentEditPatient={},t.currentMedos={},t.addMedosDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})},updateCompanyDivisions:function(){var t=this;if(void 0!==this.currentAddJob.jobCompany){var e=this.companies.find(function(e){return e.companyId===t.currentAddJob.jobCompany.jobCompanyId});void 0!==e&&(this.currentCompanyDivisions=e.companyDivisions.map(function(t){return{value:{jobDivisionId:t.divisionId,jobDivisionName:t.divisionName},text:t.divisionId+" - "+t.divisionName}}))}else if(void 0!==this.currentEditJob.jobCompany){var a=this.companies.find(function(e){return e.companyId===t.currentEditJob.jobCompany.jobCompanyId});void 0!==a&&(this.currentCompanyDivisions=a.companyDivisions.map(function(t){return{value:{jobDivisionId:t.divisionId,jobDivisionName:t.divisionName},text:t.divisionId+" - "+t.divisionName}}))}},updateDivisionDepartments:function(){var t=this;if(void 0!==this.currentAddJob.jobDivision){var e=this.companies.find(function(e){return e.companyId===t.currentAddJob.jobCompany.jobCompanyId}).companyDivisions.find(function(e){return e.divisionId===t.currentAddJob.jobDivision.jobDivisionId});void 0!==e&&(this.currentDivisionDepartments=e.divisionDepartments.map(function(t){return{value:{jobDepartmentId:t.departmentId,jobDepartmentName:t.departmentName},text:t.departmentId+" - "+t.departmentName}}))}else if(void 0!==this.currentEditJob.jobDivision){var a=this.companies.find(function(e){return e.companyId===t.currentEditJob.jobCompany.jobCompanyId}).companyDivisions.find(function(e){return e.divisionId===t.currentEditJob.jobDivision.jobDivisionId});void 0!==a&&(this.currentDivisionDepartments=a.divisionDepartments.map(function(t){return{value:{jobDepartmentId:t.departmentId,jobDepartmentName:t.departmentName},text:t.departmentId+" - "+t.departmentName}}))}},getPatients:function(){var t=this,e={};e.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,e.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,e.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(p+"/api/v1/patient/"+e.lastName+"/"+e.firstName+"/"+e.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.show=!1,t.patients=e.data.patients,t.patients.forEach(function(e){e.dateBirth=t.dateFromIso(e.dateBirth)})):(t.patients=[],t.snackBar.show=!0,t.snackBar.color="yellow accent-3 black--text",t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})},getAllCompanies:function(){var t=this;l.a.get(p+"/api/v1/companies",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){var a=e.data;!0===a.success?(t.companies=a.companies,t.snackBar.show=!0,t.snackBar.color="green darken-1 white--text",t.snackBar.message="Компании загружены",t.snackBar.timeout=1e3,t.companiesForSelect=t.companies.map(function(t){return{value:{jobCompanyId:t.companyId,jobCompanyName:t.companyName},text:t.companyId+" - "+t.companyName}})):(t.snackBar.show=!0,t.snackBar.color="red darken-1 white--text",t.snackBar.message="Компаний не найдено",t.snackBar.timeout=5e3)}).catch(function(e){t.errorHandler(e)})},getCurrentUser:function(){var t=this;l.a.get(p+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;t.currentUser=a}).catch(function(e){t.errorHandler(e)})},dateFromIso:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,s=e.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(t){var e=t.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===e&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=t.response.data.message}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:t.subSystem.primaryColor,subtitle:"Регистратура профосмотра",currentUser:t.currentUser}}),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[t._v("Поиск пациентов")]),t._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.lastName,callback:function(e){t.$set(t.patientQuery,"lastName",e)},expression:"patientQuery.lastName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.firstName,callback:function(e){t.$set(t.patientQuery,"firstName",e)},expression:"patientQuery.firstName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.middleName,callback:function(e){t.$set(t.patientQuery,"middleName",e)},expression:"patientQuery.middleName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:"",dark:"",large:"",block:""},nativeOn:{click:function(e){return t.openAddPatientDialog(e)}}},[t._v("\n                  Добавить\n                  пациента\n                ")])],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){return t.getPatients(e)}}},[t._v("Найти")])],1)],1),t._v(" "),t.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:t.patients,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",{attrs:{width:"72px"}},[e.item.hasActiveMedos?a("v-icon",{attrs:{color:t.subSystem.secondaryColor}},[t._v("\n                      assignment_ind\n                    ")]):t._e()],1),t._v(" "),a("td",[t._v(t._s(e.item.fio))]),t._v(" "),a("td",[t._v(t._s(e.item.dateBirth))]),t._v(" "),a("td",[t._v(t._s(e.item.sex?"Муж":"Жен"))]),t._v(" "),a("td",{attrs:{width:"211px"}},[a("v-tooltip",{attrs:{top:"",color:t.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){t.openRegisterMedicalExamination(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment_ind")])],1),t._v(" "),a("span",[t._v("Зарегистрировать на проф. осмотр")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:t.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openEditPatientDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("edit")])],1),t._v(" "),a("span",[t._v("Редактировать данные пациента")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:"red darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-2",icon:""},nativeOn:{click:function(a){t.openRemoveDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1),t._v(" "),a("span",[t._v("Удалить пациента")])],1)],1)])]}}])}):t._e()],1)],1)],1)],1)],1),t._v(" "),a("app-footer",{attrs:{subsystem:t.subSystem.primaryColor,currentUser:t.currentUser}}),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackBar.timeout,right:"right",color:t.snackBar.color},model:{value:t.snackBar.show,callback:function(e){t.$set(t.snackBar,"show",e)},expression:"snackBar.show"}},[t._v("\n    "+t._s(t.snackBar.message)+"\n  ")]),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.addPatientDialog.show,callback:function(e){t.$set(t.addPatientDialog,"show",e)},expression:"addPatientDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Добавить нового пациента")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"ФИО",color:t.subSystem.primaryColor},model:{value:t.currentAddPatient.fio,callback:function(e){t.$set(t.currentAddPatient,"fio",e)},expression:"currentAddPatient.fio"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Паспорт",color:t.subSystem.primaryColor},model:{value:t.currentAddPatient.passport,callback:function(e){t.$set(t.currentAddPatient,"passport",e)},expression:"currentAddPatient.passport"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Телефон",color:t.subSystem.primaryColor},model:{value:t.currentAddPatient.phone,callback:function(e){t.$set(t.currentAddPatient,"phone",e)},expression:"currentAddPatient.phone"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{mask:"##.##.####","return-masked-value":"",label:"Дата рождения",color:t.subSystem.primaryColor},model:{value:t.currentAddPatient.dateBirth,callback:function(e){t.$set(t.currentAddPatient,"dateBirth",e)},expression:"currentAddPatient.dateBirth"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-select",{attrs:{items:[{text:"Муж",value:!0},{text:"Жен",value:!1}],label:"Пол",autocomplete:"",color:t.subSystem.primaryColor},model:{value:t.currentAddPatient.sex,callback:function(e){t.$set(t.currentAddPatient,"sex",e)},expression:"currentAddPatient.sex"}})],1),t._v(" "),t.currentAddPatient.activeJob?a("v-flex",{attrs:{sm12:"",md7:""}},[a("v-text-field",{attrs:{label:"Место работы",placeholder:"Нажмите кнопку «Работа»",color:t.subSystem.primaryColor,disabled:""},model:{value:t.currentAddPatient.activeJob.jobName,callback:function(e){t.$set(t.currentAddPatient.activeJob,"jobName",e)},expression:"currentAddPatient.activeJob.jobName"}})],1):t._e(),t._v(" "),t.currentAddPatient.activeJob?t._e():a("v-flex",{attrs:{sm12:"",md7:""}},[a("v-text-field",{attrs:{label:"Место работы",placeholder:"Нажмите кнопку «Работа»",color:t.subSystem.primaryColor,disabled:""}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.closeAddPatientDialog(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.secondaryColor},nativeOn:{click:function(e){return t.openAddJobDialog(e)}}},[t._v("Работа")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.saveAddPatientDialog(e)}}},[t._v("Сохранить\n        ")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.addJobDialog.show,callback:function(e){t.$set(t.addJobDialog,"show",e)},expression:"addJobDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Добавить место работы для пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentAddPatient.fio))])])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.companiesForSelect,label:"Предприятие",color:t.subSystem.primaryColor,"no-data-text":"Предприятие не найдено",autocomplete:""},on:{blur:t.updateCompanyDivisions},model:{value:t.currentAddJob.jobCompany,callback:function(e){t.$set(t.currentAddJob,"jobCompany",e)},expression:"currentAddJob.jobCompany"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.currentCompanyDivisions,label:"Цех",color:t.subSystem.primaryColor,"no-data-text":"Цех не найден",autocomplete:""},on:{blur:t.updateDivisionDepartments},model:{value:t.currentAddJob.jobDivision,callback:function(e){t.$set(t.currentAddJob,"jobDivision",e)},expression:"currentAddJob.jobDivision"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.currentDivisionDepartments,label:"Участок",color:t.subSystem.primaryColor,"no-data-text":"Участок не найден",autocomplete:""},model:{value:t.currentAddJob.jobDepartment,callback:function(e){t.$set(t.currentAddJob,"jobDepartment",e)},expression:"currentAddJob.jobDepartment"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Должность",color:t.subSystem.primaryColor},model:{value:t.currentAddJob.jobName,callback:function(e){t.$set(t.currentAddJob,"jobName",e)},expression:"currentAddJob.jobName"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Табельный",color:t.subSystem.primaryColor},model:{value:t.currentAddJob.jobPersonnelNumber,callback:function(e){t.$set(t.currentAddJob,"jobPersonnelNumber",e)},expression:"currentAddJob.jobPersonnelNumber"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.closeAddJobDialog(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.saveAddJobDialog(e)}}},[t._v("Добавить\n        ")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.editPatientDialog.show,callback:function(e){t.$set(t.editPatientDialog,"show",e)},expression:"editPatientDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Редактировать "),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"ФИО",color:t.subSystem.primaryColor},model:{value:t.currentEditPatient.fio,callback:function(e){t.$set(t.currentEditPatient,"fio",e)},expression:"currentEditPatient.fio"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Паспорт",color:t.subSystem.primaryColor},model:{value:t.currentEditPatient.passport,callback:function(e){t.$set(t.currentEditPatient,"passport",e)},expression:"currentEditPatient.passport"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Телефон",color:t.subSystem.primaryColor},model:{value:t.currentEditPatient.phone,callback:function(e){t.$set(t.currentEditPatient,"phone",e)},expression:"currentEditPatient.phone"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{mask:"##.##.####","return-masked-value":"",label:"Дата рождения",color:t.subSystem.primaryColor},model:{value:t.currentEditPatient.dateBirth,callback:function(e){t.$set(t.currentEditPatient,"dateBirth",e)},expression:"currentEditPatient.dateBirth"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-select",{attrs:{items:[{text:"Муж",value:!0},{text:"Жен",value:!1}],label:"Пол",autocomplete:"",color:t.subSystem.primaryColor},model:{value:t.currentEditPatient.sex,callback:function(e){t.$set(t.currentEditPatient,"sex",e)},expression:"currentEditPatient.sex"}})],1),t._v(" "),t.currentEditPatient.activeJob?a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Место работы",placeholder:"Нажмите кнопку «Работа»",color:t.subSystem.primaryColor,disabled:""},model:{value:t.currentEditPatient.activeJob.jobName,callback:function(e){t.$set(t.currentEditPatient.activeJob,"jobName",e)},expression:"currentEditPatient.activeJob.jobName"}})],1):t._e(),t._v(" "),t.currentEditPatient.activeJob?a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-btn",{attrs:{color:"red darken-2",icon:""},nativeOn:{click:function(e){t.openRemoveDialog(t.currentEditPatient.activeJob)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1)],1):t._e(),t._v(" "),t.currentEditPatient.activeJob?t._e():a("v-flex",{attrs:{sm12:"",md7:""}},[a("v-text-field",{attrs:{label:"Место работы",placeholder:"Нажмите кнопку «Работа»",color:t.subSystem.primaryColor,disabled:""}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.noEditPatientDialog(e)}}},[t._v("Закрыть")]),t._v(" "),t.currentEditPatient.activeJob?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",color:t.subSystem.secondaryColor},nativeOn:{click:function(e){return t.openEditJobDialog(e)}},slot:"activator"},[t._v("Работа\n          ")]),t._v(" "),a("span",[t._v("Добавить работу")])],1):t._e(),t._v(" "),t.currentEditPatient.activeJob?t._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",color:t.subSystem.secondaryColor},nativeOn:{click:function(e){return t.openAddJobDialog(e)}},slot:"activator"},[t._v("Работа\n          ")]),t._v(" "),a("span",[t._v("Редактировать работу")])],1),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesEditPatientDialog(e)}}},[t._v("Сохранить\n        ")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.editJobDialog.show,callback:function(e){t.$set(t.editJobDialog,"show",e)},expression:"editJobDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Редактировать место работы для пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.companiesForSelect,label:"Предприятие",color:t.subSystem.primaryColor,"no-data-text":"Предприятие не найдено",autocomplete:""},on:{blur:t.updateCompanyDivisions},model:{value:t.currentEditJob.jobCompany,callback:function(e){t.$set(t.currentEditJob,"jobCompany",e)},expression:"currentEditJob.jobCompany"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.currentCompanyDivisions,label:"Цех",color:t.subSystem.primaryColor,"no-data-text":"Цех не найден",autocomplete:""},on:{blur:t.updateDivisionDepartments},model:{value:t.currentEditJob.jobDivision,callback:function(e){t.$set(t.currentEditJob,"jobDivision",e)},expression:"currentEditJob.jobDivision"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.currentDivisionDepartments,label:"Участок",color:t.subSystem.primaryColor,"no-data-text":"Участок не найден",autocomplete:""},model:{value:t.currentEditJob.jobDepartment,callback:function(e){t.$set(t.currentEditJob,"jobDepartment",e)},expression:"currentEditJob.jobDepartment"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Должность",color:t.subSystem.primaryColor},model:{value:t.currentEditJob.jobName,callback:function(e){t.$set(t.currentEditJob,"jobName",e)},expression:"currentEditJob.jobName"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Табельный",color:t.subSystem.primaryColor},model:{value:t.currentEditJob.jobPersonnelNumber,callback:function(e){t.$set(t.currentEditJob,"jobPersonnelNumber",e)},expression:"currentEditJob.jobPersonnelNumber"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.closeEditJobDialog(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.saveEditJobDialog(e)}}},[t._v("Сохранить\n        ")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.removeDialog.show,callback:function(e){t.$set(t.removeDialog,"show",e)},expression:"removeDialog.show"}},[a("v-card",[t.currentRemoveItem.jobName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Вы точно хотите удалить место работы "),a("span",{staticClass:"red--text text--darken-2"},[t._v("«"+t._s(t.currentRemoveItem.jobName)+"»")])])]):t._e(),t._v(" "),t.currentRemoveItem.fio?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Вы точно хотите удалить "),a("span",{staticClass:"red--text text--darken-2"},[t._v("«"+t._s(t.currentRemoveItem.fio)+"»")])])]):t._e(),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.secondaryColor,flat:""},nativeOn:{click:function(e){return t.noRemoveDialog(e)}}},[t._v("Нет")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red darken-2"},nativeOn:{click:function(e){return t.yesRemoveDialog(e)}}},[t._v("Да")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.addMedosDialog.show,callback:function(e){t.$set(t.addMedosDialog,"show",e)},expression:"addMedosDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Зарегистрировать "),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))]),t._v(" на мед. осмотр?")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-select",{attrs:{items:t.medosTypes,label:"Тип мед. осмотра",autocomplete:"",color:t.subSystem.primaryColor},model:{value:t.currentMedos.medosType,callback:function(e){t.$set(t.currentMedos,"medosType",e)},expression:"currentMedos.medosType"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.closeRegisterMedicalExamination(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.saveRegisterMedicalExamination(e)}}},[t._v("\n          Зарегистрировать\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,x,!1,function(t){a("we3y")},null,null).exports,y="http://"+window.location.hostname+":3001",f={data:function(){return{currentUser:{},harms:[],harmsForSelect:[],patientQuery:{},patients:[],currentEditPatient:{},currentMedos:{},currentPatientParameters:{height:"",weight:"",pulse:"",ad:{sys:"",dia:""},dynamometry:{left:"",right:""},skin:{norma:!0,pathology:""},cigarettes:"",alcohol:"",comment:""},currentPatientHarms:[],currentAddHarm:{},currentRemoveItem:{},editHarmsDialog:{show:!1},addNewHarmDialog:{show:!1},removeDialog:{show:!1},editParametersDialog:{show:!1},appointmentsDialog:{show:!1},appointmentsForHarms:{doctors:{mustDoctors:[],addonDoctors:[]},exams:{mustExams:[],addonExams:[]}},showAddonAppointments:!1,skinNorma:[{value:!0,text:"норма"},{value:!1,text:"патология"}],skinPathologies:["Бледность кожи или видимых слизистых","Цианоз кожи или видимых слизистых","Иктеричность склер или кожи","Имеются сыпные элементы или гиперпигментация кожи","Имеются отеки подкожнкой клетчатки","Имеется гиперемия кожи или видимых слизистых"],alcoholTypes:["1 - нет","2 - умеренно","3 - злоупотребляет"],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"purple darken-3",secondaryColor:"orange darken-3"}}},mounted:function(){this.getCurrentUser(),this.getAllHarms()},methods:{openEditHarmsDialog:function(t){this.currentEditPatient=t,this.currentMedos=t.activeMedos,this.currentMedos.medosHarms.length>0&&(this.currentPatientHarms=this.currentMedos.medosHarms),this.editHarmsDialog.show=!0},noEditHarmsDialog:function(){this.editHarmsDialog.show=!1},yesEditHarmsDialog:function(){var t=this;this.currentMedos.medosHarms=this.currentPatientHarms;var e=[],a=[],r=[],s=[];this.currentMedos.medosHarms.map(function(o){var n=t.harms.find(function(t){return t.harmId===o.harmId});n.doctors.map(function(t){t.mustDoctors.map(function(t){e.push(t)}),t.addonDoctors.map(function(t){a.push(t)})}),n.exams.map(function(t){t.mustExams.map(function(t){r.push(t)}),t.addonExams.map(function(t){s.push(t)})})}),this.currentEditPatient.sex||e.push({doctorId:12,doctorName:"Гинеколог",doctorRoom:"113 кабинет"});var o=this.dateToIso(this.currentEditPatient.dateBirth);this.calculateAge(o)>=42&&r.push({examId:46,examName:"Маммография",examRoom:"416 кабинет"}),e.push({doctorId:1,doctorName:"Терапевт",doctorRoom:"104/105 кабинет"});var n=e.filter(function(t,e,a){return a.findIndex(function(e){return e.doctorId===t.doctorId})===e}),i=a.filter(function(t,e,a){return a.findIndex(function(e){return e.doctorId===t.doctorId})===e}),c=r.filter(function(t,e,a){return a.findIndex(function(e){return e.examId===t.examId})===e}),d=s.filter(function(t,e,a){return a.findIndex(function(e){return e.examId===t.examId})===e});l.a.put(y+"/api/v1/patient/"+this.currentEditPatient._id+"/harms/",{medosHarms:this.currentMedos.medosHarms,medosDoctors:{mustDoctors:n,addonDoctors:i},medosExams:{mustExams:c,addonExams:d}},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.currentEditPatient={},t.currentPatientHarms={},t.currentMedos={},t.editHarmsDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})},openAddHarmDialog:function(){this.addNewHarmDialog.show=!0},noAddHarmDialog:function(){this.addNewHarmDialog.show=!1,this.currentAddHarm={}},yesAddHarmDialog:function(){this.currentPatientHarms.push(this.currentAddHarm),this.addNewHarmDialog.show=!1,this.currentAddHarm={}},openRemoveDialog:function(t){this.currentRemoveItem=t,this.removeDialog.show=!0},noRemoveDialog:function(){this.removeDialog.show=!1,this.currentRemoveItem={}},yesRemoveDialog:function(){var t=this;this.currentRemoveItem.harmName?this.currentPatientHarms.forEach(function(e,a){e===t.currentRemoveItem&&t.currentPatientHarms.splice(a,1)}):(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что удалять."),this.removeDialog.show=!1,this.currentRemoveItem={}},openEditParametersDialog:function(t){this.currentEditPatient=t,this.currentMedos=t.activeMedos,this.currentMedos.medosParameters&&(this.currentPatientParameters=this.currentMedos.medosParameters),this.editParametersDialog.show=!0},noEditParametersDialog:function(){this.editParametersDialog.show=!1},yesEditParametersDialog:function(){var t=this;this.editParametersDialog.show=!1,l.a.put(y+"/api/v1/patient/"+this.currentEditPatient._id+"/parameters/",{medosParameters:this.currentPatientParameters},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.currentEditPatient.activeMedos.medosParameters=t.currentPatientParameters,t.currentMedos={},t.currentEditPatient={},t.currentPatientParameters={},t.editHarmsDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})},openAppointmentsDialog:function(t){this.currentEditPatient=t,this.currentMedos=t.activeMedos;var e=this.currentMedos.medosHarms,a=this.currentMedos.medosParameters;e.length<1?this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Не введены вредности",show:!0}:""===a.height||""===a.weight||""===a.pulse||""===a.ad.sys||""===a.ad.dia||""===a.cigarettes||""===a.alcohol||""===a.dynamometry.left||""===a.dynamometry.right?this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Не введены параметры",show:!0}:this.appointmentsDialog.show=!0},noAppointmentsDialog:function(){this.appointmentsDialog.show=!1},printAppointmentsDialog:function(){var t=this.$refs.print.innerHTML,e=window.open("","Print","height=600,width=800");return e.document.write("<html><head><title>Print</title>"),e.document.write("</head><body >"),e.document.write(t),e.document.write("</body></html>"),e.document.close(),e.focus(),e.print(),e.close(),!0},getPatients:function(){var t=this,e={};e.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,e.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,e.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(y+"/api/v1/patient/medos/"+e.lastName+"/"+e.firstName+"/"+e.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.show=!1,t.patients=e.data.patients,t.patients.forEach(function(e){e.dateBirth=t.dateFromIso(e.dateBirth)})):(t.patients=[],t.snackBar.show=!0,t.snackBar.color="yellow accent-3 black--text",t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})},getAllHarms:function(){var t=this;l.a.get(y+"/api/v1/harms",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){var a=e.data;!0===a.success?(t.harms=a.harms,t.snackBar.show=!0,t.snackBar.color="green darken-1 white--text",t.snackBar.message="Вредности загружены",t.snackBar.timeout=1e3,t.harmsForSelect=t.harms.map(function(t){return{value:{harmId:t.harmId,harmName:t.harmName,doctors:t.doctors,exams:t.exams},text:t.harmName}})):(t.snackBar.show=!0,t.snackBar.color="red darken-1 white--text",t.snackBar.message="Вредностей не найдено",t.snackBar.timeout=5e3)}).catch(function(e){t.errorHandler(e)})},getCurrentUser:function(){var t=this;l.a.get(y+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;t.currentUser=a}).catch(function(e){t.errorHandler(e)})},dateFromIso:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,s=e.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},dateToIso:function(t){return new Date(t.replace(/(\d{2})\.(\d{2})\.(\d{4})/,"$3-$2-$1"))},uniqueArray:function(t){var e={};return t.filter(function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)})},calculateAge:function(t){var e=Date.now()-t.getTime(),a=new Date(e);return Math.abs(a.getUTCFullYear()-1970)},errorHandler:function(t){var e=t.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===e&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=t.response.data.message}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:t.subSystem.primaryColor,subtitle:"Доврачебный кабинет",currentUser:t.currentUser}}),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[t._v("Поиск пациентов")]),t._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.lastName,callback:function(e){t.$set(t.patientQuery,"lastName",e)},expression:"patientQuery.lastName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.firstName,callback:function(e){t.$set(t.patientQuery,"firstName",e)},expression:"patientQuery.firstName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.middleName,callback:function(e){t.$set(t.patientQuery,"middleName",e)},expression:"patientQuery.middleName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){return t.getPatients(e)}}},[t._v("Найти")])],1)],1),t._v(" "),t.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:t.patients,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.fio))]),t._v(" "),a("td",[t._v(t._s(e.item.dateBirth))]),t._v(" "),a("td",[t._v(t._s(e.item.sex?"Муж":"Жен"))]),t._v(" "),a("td",{attrs:{width:"211px"}},[a("v-tooltip",{attrs:{top:"",color:t.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){t.openEditHarmsDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment_late")])],1),t._v(" "),a("span",[t._v("Указать вредности пациента")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:t.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openEditParametersDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment")])],1),t._v(" "),a("span",[t._v("Ввести параметры пациента")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:"green darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"green darken-2",icon:""},nativeOn:{click:function(a){t.openAppointmentsDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment_turned_in")])],1),t._v(" "),a("span",[t._v("Распечатать бегунок")])],1)],1)])]}}])}):t._e()],1)],1)],1)],1)],1),t._v(" "),a("app-footer",{attrs:{subsystem:t.subSystem.primaryColor,currentUser:t.currentUser}}),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackBar.timeout,right:"right",color:t.snackBar.color},model:{value:t.snackBar.show,callback:function(e){t.$set(t.snackBar,"show",e)},expression:"snackBar.show"}},[t._v("\n    "+t._s(t.snackBar.message)+"\n  ")]),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.editHarmsDialog.show,callback:function(e){t.$set(t.editHarmsDialog,"show",e)},expression:"editHarmsDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Добавить вредности для пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])]),t._v(" "),a("v-spacer"),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){return t.openAddHarmDialog(e)}}},[t._v("\n              Добавить вредность\n            ")])],1)],1)],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[t.currentPatientHarms.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:t.currentPatientHarms,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.harmName))]),t._v(" "),a("td",{attrs:{width:"50px"}},[a("v-tooltip",{attrs:{top:"",color:"red darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-2",icon:""},nativeOn:{click:function(a){t.openRemoveDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1),t._v(" "),a("span",[t._v("Удалить вредность")])],1)],1)])]}}])}):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.noEditHarmsDialog(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesEditHarmsDialog(e)}}},[t._v("Сохранить\n        ")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.addNewHarmDialog.show,callback:function(e){t.$set(t.addNewHarmDialog,"show",e)},expression:"addNewHarmDialog.show"}},[a("v-card",[t.currentAddHarm?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Добавить новую вредность")])]):t._e(),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-select",{attrs:{items:t.harmsForSelect,label:"Вредность",autocomplete:"",color:t.subSystem.primaryColor},model:{value:t.currentAddHarm,callback:function(e){t.currentAddHarm=e},expression:"currentAddHarm"}})],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.noAddHarmDialog(e)}}},[t._v("Нет")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesAddHarmDialog(e)}}},[t._v("Да")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.removeDialog.show,callback:function(e){t.$set(t.removeDialog,"show",e)},expression:"removeDialog.show"}},[a("v-card",[t.currentRemoveItem.harmName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Вы точно хотите удалить вредность "),a("br"),t._v(" "),a("span",{staticClass:"red--text text--darken-2"},[t._v("«"+t._s(t.currentRemoveItem.harmName)+"»")])])]):t._e(),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"red darken-2",flat:""},nativeOn:{click:function(e){return t.noRemoveDialog(e)}}},[t._v("Нет")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red darken-2"},nativeOn:{click:function(e){return t.yesRemoveDialog(e)}}},[t._v("Да")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.editParametersDialog.show,callback:function(e){t.$set(t.editParametersDialog,"show",e)},expression:"editParametersDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Ввести параметры для пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Рост",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.height,callback:function(e){t.$set(t.currentPatientParameters,"height",e)},expression:"currentPatientParameters.height"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Вес",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.weight,callback:function(e){t.$set(t.currentPatientParameters,"weight",e)},expression:"currentPatientParameters.weight"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[t.currentPatientParameters.ad?a("v-text-field",{attrs:{label:"AD.SYS",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.ad.sys,callback:function(e){t.$set(t.currentPatientParameters.ad,"sys",e)},expression:"currentPatientParameters.ad.sys"}}):t._e()],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[t.currentPatientParameters.ad?a("v-text-field",{attrs:{label:"AD.DIA",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.ad.dia,callback:function(e){t.$set(t.currentPatientParameters.ad,"dia",e)},expression:"currentPatientParameters.ad.dia"}}):t._e()],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Пульс",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.pulse,callback:function(e){t.$set(t.currentPatientParameters,"pulse",e)},expression:"currentPatientParameters.pulse"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[t.currentPatientParameters.dynamometry?a("v-text-field",{attrs:{label:"Динам-ия (лев)",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.dynamometry.left,callback:function(e){t.$set(t.currentPatientParameters.dynamometry,"left",e)},expression:"currentPatientParameters.dynamometry.left"}}):t._e()],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[t.currentPatientParameters.dynamometry?a("v-text-field",{attrs:{label:"Динам-ия (прав)",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.dynamometry.right,callback:function(e){t.$set(t.currentPatientParameters.dynamometry,"right",e)},expression:"currentPatientParameters.dynamometry.right"}}):t._e()],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Сигареты",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.cigarettes,callback:function(e){t.$set(t.currentPatientParameters,"cigarettes",e)},expression:"currentPatientParameters.cigarettes"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:t.alcoholTypes,label:"Алкоголь",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.alcohol,callback:function(e){t.$set(t.currentPatientParameters,"alcohol",e)},expression:"currentPatientParameters.alcohol"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[t.currentPatientParameters.skin?a("v-select",{attrs:{label:"Кожа",items:t.skinNorma,color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.skin.norma,callback:function(e){t.$set(t.currentPatientParameters.skin,"norma",e)},expression:"currentPatientParameters.skin.norma"}}):t._e()],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md9:""}},[t.currentPatientParameters.skin?a("v-select",{attrs:{label:"Вид паталогии",items:t.skinPathologies,color:t.subSystem.primaryColor,disabled:t.currentPatientParameters.skin.norma},model:{value:t.currentPatientParameters.skin.pathology,callback:function(e){t.$set(t.currentPatientParameters.skin,"pathology",e)},expression:"currentPatientParameters.skin.pathology"}}):t._e()],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Анамнез",color:t.subSystem.primaryColor},model:{value:t.currentPatientParameters.comment,callback:function(e){t.$set(t.currentPatientParameters,"comment",e)},expression:"currentPatientParameters.comment"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.noEditParametersDialog(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesEditParametersDialog(e)}}},[t._v("Сохранить\n        ")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.appointmentsDialog.show,callback:function(e){t.$set(t.appointmentsDialog,"show",e)},expression:"appointmentsDialog.show"}},[a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:"",md7:""}},[a("span",{staticClass:"headline"},[t._v("\n          Назначения для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])])]),t._v(" "),a("v-flex",{attrs:{sm12:"",md5:""}},[a("v-checkbox",{staticClass:"right",attrs:{label:"Показывать доп. назначения"},model:{value:t.showAddonAppointments,callback:function(e){t.showAddonAppointments=e},expression:"showAddonAppointments"}})],1)],1),t._v(" "),t.currentEditPatient.activeMedos&&t.currentEditPatient.activeMedos.medosDoctors&&t.currentEditPatient.activeMedos.medosExams?a("v-card-text",{ref:"print"},[a("v-list",{attrs:{"two-line":"",subheader:""}},[a("v-subheader",[t._v("Доктора "),t.showAddonAppointments?a("span",[t._v("- (обязательные)")]):t._e()]),t._v(" "),t._l(t.currentEditPatient.activeMedos.medosDoctors.mustDoctors,function(e){return a("v-list-tile",{key:e.doctorId},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.doctorName))]),t._v(" "),a("v-list-tile-sub-title",[t._v("Кабинет 110")])],1)],1)}),t._v(" "),t.showAddonAppointments?a("div",[a("v-divider"),t._v(" "),a("v-subheader",[t._v("Доктора "),t.showAddonAppointments?a("span",[t._v("- (дополнительные)")]):t._e()]),t._v(" "),t._l(t.currentEditPatient.activeMedos.medosDoctors.addonDoctors,function(e){return a("v-list-tile",{key:e.doctorId},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.doctorName))]),t._v(" "),a("v-list-tile-sub-title",[t._v("Кабинет 110")])],1)],1)})],2):t._e(),t._v(" "),a("v-divider"),t._v(" "),a("v-subheader",[t._v("Обследования "),t.showAddonAppointments?a("span",[t._v("- (обязательные)")]):t._e()]),t._v(" "),t._l(t.currentEditPatient.activeMedos.medosExams.mustExams,function(e){return a("v-list-tile",{key:e.examId},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.examName))]),t._v(" "),a("v-list-tile-sub-title",[t._v("Кабинет 110")])],1)],1)}),t._v(" "),t.showAddonAppointments?a("div",[a("v-divider"),t._v(" "),a("v-subheader",[t._v("Обследования "),t.showAddonAppointments?a("span",[t._v("- (дополнительные)")]):t._e()]),t._v(" "),t._l(t.currentEditPatient.activeMedos.medosExams.addonExams,function(e){return a("v-list-tile",{key:e.doctorId},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.examName))]),t._v(" "),a("v-list-tile-sub-title",[t._v("Кабинет 110")])],1)],1)})],2):t._e()],2)],1):t._e(),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.secondaryColor},nativeOn:{click:function(e){return t.printAppointmentsDialog(e)}}},[t._v("Печать\n        ")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.noAppointmentsDialog(e)}}},[t._v("Закрыть\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(f,b,!1,function(t){a("kIKB")},null,null).exports,k="http://"+window.location.hostname+":3001",R={data:function(){return{currentUser:{username:"",password:"",fio:"",roles:{superuser:!1,medos:{receptionist:!1,premedical:!1,functionalDiagnostics:!1,doctor:!1,admin:!1},radiography:{assistant:!1,admin:!1},laboratory:{assistant:!1,admin:!1},vaccination:{assistant:!1,admin:!1}}},patientQuery:{},patients:[],currentUserDoctor:{id:"",name:""},currentEditPatient:{activeMedos:{},bloodResults:[],urineClinicalResults:[]},currentDoctorResult:{doctorDiagnosis:{}},currentExamResult:{},currentOphthalmologistResult:{noCorrection:{od:"",os:""},correction:{od:{sph:"",cyl:"",ax:""},os:{sph:"",cyl:"",ax:""}},withCorrection:{od:"",os:""}},sortedBloodResult:{},sortedUrineResult:{},sortedRgResult:{},makeAppointmentDialog:{show:!1,showBlood:!1,showUrine:!1,showInfo:!1,edit:!1},examsDialog:{ocularFundus:!1,intraocularPressure:!1,refractometry:!1,fields:!1,colorBlindness:!1},conclusionsDialog:{show:!1},archiveMedosDialog:{show:!1},ophthalmologistExams:{ocularFundus:!1,intraocularPressure:!1,refractometry:!1,fields:!1,colorBlindness:!1},examsForConclusions:[1,19,20,21,32,34,38,46],doctorConclusions:["Годен","в очках","без высоты","не более 50% ПЭВМ","без физич. перегрузок","без ГЗА","без права найма","без ДЭУ","с подъемом тяжестей не более 7кг","без световой среды","Не годен"],doctorDetectabilities:[{value:!0,text:"Первичный"},{value:!1,text:"Повторный"}],fieldResults:[{value:1,text:"Норма"},{value:2,text:"Сужено"},{value:3,text:"Скотома"},{value:4,text:"Гемианопсия"}],colorBlindnessResults:[{value:1,text:"Норма"},{value:2,text:"Дихромазия"},{value:3,text:"Трихромазия"}],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"purple darken-3",secondaryColor:"orange darken-3"}}},mounted:function(){this.getCurrentUser()},methods:{openExaminationDialog:function(t){var e=this;if(this.currentEditPatient=t,this.currentEditPatient.activeMedos.medosDoctors)if(0===this.currentEditPatient.bloodResults.length)this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"У пациента отсутствуют анализы крови.",show:!0};else if(0===this.currentEditPatient.urineClinicalResults.length)this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"У пациента отсутствуют анализы мочи.",show:!0};else{var a=this.currentEditPatient.bloodResults.sort(function(t,e){return new Date(e.bloodDate)-new Date(t.bloodDate)});this.sortedBloodResult=a[0];var r=this.currentEditPatient.urineClinicalResults.sort(function(t,e){return new Date(e.urineDate)-new Date(t.urineDate)});this.sortedUrineResult=r[0];var s=this.currentEditPatient.rgResults.sort(function(t,e){return new Date(e.rgDate)-new Date(t.rgDate)});if(this.sortedRgResult=s[0],this.currentEditPatient.activeMedos.medosDoctors.mustDoctors.some(function(t){return t.doctorId===e.currentUserDoctor.id})||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser)this.currentEditPatient.activeMedos.medosDoctorResults.some(function(t){return t.doctorId===e.currentUserDoctor.id})?(this.makeAppointmentDialog={show:!0,showBlood:!1,showUrine:!1,showInfo:!0,edit:!0},this.currentDoctorResult=this.currentEditPatient.activeMedos.medosDoctorResults.find(function(t){return t.doctorId===e.currentUserDoctor.id}),this.currentDoctorResult.doctorDiagnosis||(this.currentDoctorResult.doctorDiagnosis={diagnosis:"",detectability:null,diagnosisComment:""}),this.currentDoctorResult.doctorSpecial&&4===this.currentUserDoctor.id&&(this.currentOphthalmologistResult=this.currentDoctorResult.doctorSpecial)):this.makeAppointmentDialog={show:!0,showBlood:!1,showUrine:!1,showInfo:!0,edit:!1};else this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Этому пациенту не требуется осмотр",show:!0};if(4===this.currentUserDoctor.id){var o=this.currentEditPatient.activeMedos.medosExams.mustExams;this.ophthalmologistExams.ocularFundus=o.some(function(t){return 19===t.examId}),this.ophthalmologistExams.fields=o.some(function(t){return 20===t.examId}),this.ophthalmologistExams.intraocularPressure=o.some(function(t){return 21===t.examId}),this.ophthalmologistExams.refractometry=o.some(function(t){return 32===t.examId}),this.ophthalmologistExams.colorBlindness=o.some(function(t){return 38===t.examId})}}else this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Пациент не был в доврачебном кабинете.",show:!0}},noExaminationDialog:function(){this.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showInfo:!1,edit:!1},this.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]}},yesExaminationDialog:function(){var t=this,e=this.currentDoctorResult;4===this.currentUserDoctor.id&&(e.doctorSpecial=this.currentOphthalmologistResult),this.makeAppointmentDialog.edit?0!==this.currentUserDoctor.id?l.a.put(k+"/api/v1/patient/"+this.currentEditPatient._id+"/doctorResult/"+e._id+"/",{doctorResult:e},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3,0===t.currentEditPatient.activeMedos.medosExamResults.length&&(t.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showInfo:!1,edit:!1},t.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]})):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)}):this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Вы не врач",show:!0}:(e.doctorId=this.currentUserDoctor.id,0!==this.currentUserDoctor.id?l.a.post(k+"/api/v1/patient/"+this.currentEditPatient._id+"/doctorResult/",{doctorResult:e},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3,0===t.currentEditPatient.activeMedos.medosExamResults.length&&(t.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showInfo:!1,edit:!1},t.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]})):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)}):this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Вы не врач",show:!0}),this.currentEditPatient.activeMedos.medosExamResults.forEach(function(e){void 0===e._id?l.a.post(k+"/api/v1/patient/"+t.currentEditPatient._id+"/examResult/",{examResult:e},{headers:{Authorization:u.getAuthenticationHeader(t)}}).then(function(e){e.data.success?(t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3,t.getMedosPatients(),t.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showInfo:!1,edit:!1},t.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]}):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3)}).catch(function(e){t.errorHandler(e)}):l.a.put(k+"/api/v1/patient/"+t.currentEditPatient._id+"/examResult/"+e._id,{examResult:e},{headers:{Authorization:u.getAuthenticationHeader(t)}}).then(function(e){e.data.success?(t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3,t.getMedosPatients(),t.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showInfo:!1,edit:!1},t.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]}):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3)}).catch(function(e){t.errorHandler(e)})})},openArchiveMedosDialog:function(){},noArchiveMedosDialog:function(){},yesArchiveMedosDialog:function(){},openExamDialog:function(t){var e=this.currentEditPatient.activeMedos.medosExamResults;switch(t){case"ocularFundus":e.some(function(t){return 19===t.examId})?this.currentExamResult=e.find(function(t){return 19===t.examId}):this.currentExamResult={examId:19,examResult:"ДЗН бледно-розовый, границы четкие, эскавация физиологическая, ход и калибр сосудов не изменен. Очаговой патологии нет."};break;case"fields":e.some(function(t){return 20===t.examId})?this.currentExamResult=e.find(function(t){return 20===t.examId}):this.currentExamResult={examId:20,examResult:{od:1,os:1}};break;case"intraocularPressure":e.some(function(t){return 21===t.examId})?this.currentExamResult=e.find(function(t){return 21===t.examId}):this.currentExamResult={examId:21,examResult:{od:"",os:""}};break;case"refractometry":e.some(function(t){return 32===t.examId})?this.currentExamResult=e.find(function(t){return 32===t.examId}):this.currentExamResult={examId:32,examResult:{od:{},os:{}}};break;case"colorBlindness":e.some(function(t){return 38===t.examId})?this.currentExamResult=e.find(function(t){return 38===t.examId}):this.currentExamResult={examId:38,examResult:1}}this.examsDialog[t]=!0},noExamDialog:function(t){this.examsDialog[t]=!1,this.currentExamResult={}},yesExamDialog:function(t){var e=this.currentEditPatient.activeMedos.medosExamResults;switch(t){case"ocularFundus":e.some(function(t){return 19===t.examId})?this.currentExamResult={}:e.push(this.currentExamResult);break;case"fields":e.some(function(t){return 20===t.examId})?this.currentExamResult={}:e.push(this.currentExamResult);break;case"intraocularPressure":e.some(function(t){return 21===t.examId})?this.currentExamResult={}:e.push(this.currentExamResult);break;case"refractometry":e.some(function(t){return 32===t.examId})?this.currentExamResult={}:e.push(this.currentExamResult);break;case"colorBlindness":e.some(function(t){return 38===t.examId})?this.currentExamResult={}:e.push(this.currentExamResult)}this.examsDialog[t]=!1},openConclusionsDialog:function(){this.conclusionsDialog.show=!0},noConclusionsDialog:function(){this.conclusionsDialog.show=!1},getMedosPatients:function(){var t=this,e={};e.lastName=void 0===this.patientQuery.lastName||""===this.patientQuery.lastName?" ":this.patientQuery.lastName,e.firstName=void 0===this.patientQuery.firstName||""===this.patientQuery.firstName?" ":this.patientQuery.firstName,e.middleName=void 0===this.patientQuery.middleName||""===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(k+"/api/v1/patient/medos/"+e.lastName+"/"+e.firstName+"/"+e.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.show=!1,t.patients=e.data.patients,t.patients.forEach(function(e){e.dateBirth=t.dateFromIso(e.dateBirth)})):(t.patients=[],t.snackBar.show=!0,t.snackBar.color="yellow accent-3 black--text",t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})},getCurrentUser:function(){var t=this;l.a.get(k+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;switch(t.currentUser=a,t.currentDoctorResult.doctorComplaints="Нет",t.currentUser.roles.medos.admin||t.currentUser.roles.superuser?t.currentUserDoctor.id=1:t.currentUserDoctor.id=t.currentUser.roles.medos.doctor,t.currentUser.roles.medos.doctor){case 1:t.currentUserDoctor.name="терапевт",t.currentDoctorResult.doctorStatus="Кожные покровы и видимые слизистые обычной окраски. Язык чистый. Дыхание везикулярное, хрипов нет. Тоны сердца ясные, ритм правильный, Живот мягкий, безболезненный. Отеков нет.";break;case 2:t.currentUserDoctor.name="оториноларинголог",t.currentDoctorResult.doctorStatus="Слизистая носа розовая, носовые ходы свободные. Миндалины не увеличены, слизистая глотки розовая, чистая, Слизистая гортани розовая, голосовые связки серые, подвижные, голос чистый. Уши : слуховой проход свободный, барабанная перепонка не изменена. Шепотная речь 6м справа, 6м слева. Вестибулярных нарушений нет.";break;case 3:t.currentUserDoctor.name="дерматовенеролог",t.currentDoctorResult.doctorStatus="Внешний осмотр: кожные покровы  чистые, обычной окраски. Лимфоузлы не увеличены во всех группах. Наружные половые органы: видимые слизистые бледно розовой окраски. Перианальная область без специфических высыпаний.";break;case 4:t.currentUserDoctor.name="офтальмолог",t.currentDoctorResult.doctorStatus="Положение век и рост ресниц правильное. Движение глаз в полном объеме. Коньюнктива розовая, Роговица, прозрачная. Передняя камера средней глубины. Радужка структурная, пигментная кайма сохранена. Зрачок не изменен. Хрусталик и стекловидное тело прозрачны.";break;case 5:t.currentUserDoctor.name="хирург",t.currentDoctorResult.doctorStatus="Шея, голова, грудная клетка без патологии. Физиологические изгибы и подвижность сохранены. Лимфоузлы без патологии. Живот мягкий, безболезненный. Остов таза симметричный, наружные половые органы без патологии. Ректальное пальцевое исследование: сфинктер в тонусе, патологии в просвете нет. Верхние конечности без патологии, нижние конечности без патологии , пульсация периферических сосудов сохранена.";break;case 6:t.currentUserDoctor.name="невролог",t.currentDoctorResult.doctorStatus="Наружный осмотр: норма. Высшая нервная деятельность: норма. Черепно-мозговая иннервация: норма. Сухожильные рефлексы: живые. Чувствительность кожи: норма. Мануальное исследование: патологии нет. Поза Ромберга: устойчивость. Пальце-носовая проба: четкое попадание. Походка: не изменена.";break;case 7:t.currentUserDoctor.name="стоматолог",t.currentDoctorResult.doctorStatus="Лицо симметрично, кожные покровы не изменены. Движения в височно-нижнечелюстном суставе в полном объеме. Слизистая полости рта влажная, гладкая, чистая. Области выхода протоков слюнных желез не изменены. Край десен имеет бледно-розовую окраску и плотно прилегает к шейкам зубов. Зубной ряд полный. Съемных зубных протезов нет.";break;case 12:t.currentUserDoctor.name="гинеколог",t.currentDoctorResult.doctorStatus="Наружные половые органы развиты правильно. Влагалище, своды без патологии. Шейка матки без патологии. Тело матки не увеличено, правильной формы, положение физиологическое. Цервикальный канал закрыт, придатки не пальпируются. Выделения скудные, без цвета и неприятного запаха. Пальцевое исследование прямой кишки – патологии в малом тазу нет. Исследование молочных желез: симметричные, окраска, соски, консистенция обычные.";break;default:t.currentUserDoctor.name="терапевт",t.currentDoctorResult.doctorStatus="Кожные покровы и видимые слизистые обычной окраски. Язык чистый. Дыхание везикулярное, хрипов нет. Тоны сердца ясные, ритм правильный, Живот мягкий, безболезненный. Отеков нет."}}).catch(function(e){t.errorHandler(e)})},getDoctorName:function(t){switch(t){case 1:return"Терапевт";case 2:return"Оториноалринголог";case 3:return"Дерматовенеролог";case 4:return"Офтальмолог";case 5:return"Хирург";case 6:return"Невролог";case 7:return"Стоматолог";case 12:return"Гинеколог"}},ifDoctorHasResult:function(t){return this.currentEditPatient.activeMedos.medosDoctorResults.some(function(e){return e.doctorId===t})},getDoctorResult:function(t){return this.currentEditPatient.activeMedos.medosDoctorResults.find(function(e){return e.doctorId===t})},getExamName:function(t){switch(t){case 1:return"Спирометрия";case 19:return"Глазное дно";case 20:return"Поля зрения";case 21:return"Глазное давление";case 32:return"Рефрактометрия";case 34:return"Аудиометрия";case 38:return"Цветоощущение";case 46:return"ЭКГ"}},ifExamHasResult:function(t){return this.currentEditPatient.activeMedos.medosExamResults.some(function(e){return e.examId===t})},getExamResult:function(t){return this.currentEditPatient.activeMedos.medosExamResults.find(function(e){return e.examId===t})},ifAnyExamNeeded:function(){var t=this.examsForConclusions;return this.currentEditPatient.activeMedos.medosExams.mustExams.some(function(e){return t.includes(e.examId)})},ifAllExamsComplete:function(){var t=this.examsForConclusions,e=this.currentEditPatient.activeMedos.medosExams.mustExams.filter(function(e){return t.includes(e.examId)}),a=this.currentEditPatient.activeMedos.medosExamResults;return e.every(function(t){return a.some(function(e){return e.examId===t.examId})})},ifAllDoctorsComplete:function(){var t=this.currentEditPatient.activeMedos.medosDoctors.mustDoctors.filter(function(t){return 1!==t.doctorId}),e=this.currentEditPatient.activeMedos.medosDoctorResults;return t.every(function(t){return e.some(function(e){return e.doctorId===t.doctorId})})},dateFromIso:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,s=e.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(t){if(t.response){var e=t.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===e&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=t.response.data.message}}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:t.subSystem.primaryColor,subtitle:"Рабочее место "+t.currentUserDoctor.name+"а",currentUser:t.currentUser}}),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[t._v("Пациенты на мед. осмотре")]),t._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.primaryColor,label:"Фамилия",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getMedosPatients(e):null}},model:{value:t.patientQuery.lastName,callback:function(e){t.$set(t.patientQuery,"lastName",e)},expression:"patientQuery.lastName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.primaryColor,label:"Имя",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getMedosPatients(e):null}},model:{value:t.patientQuery.firstName,callback:function(e){t.$set(t.patientQuery,"firstName",e)},expression:"patientQuery.firstName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.primaryColor,label:"Отчество",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getMedosPatients(e):null}},model:{value:t.patientQuery.middleName,callback:function(e){t.$set(t.patientQuery,"middleName",e)},expression:"patientQuery.middleName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){return t.getMedosPatients(e)}}},[t._v("Найти")])],1)],1),t._v(" "),t.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{headers:[{text:"ФИО",sortable:!1},{text:"Осмотр",sortable:!1},{text:"Дата рождения",sortable:!1},{text:"Пол",sortable:!1},{text:"Действия",sortable:!1}],items:t.patients,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.fio))]),t._v(" "),a("td",[t._v(t._s(e.item.activeMedos.medosType.typeId))]),t._v(" "),a("td",[t._v(t._s(e.item.dateBirth))]),t._v(" "),a("td",[t._v(t._s(e.item.sex?"Муж":"Жен"))]),t._v(" "),a("td",[a("v-tooltip",{attrs:{top:"",color:t.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openExaminationDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment_turned_in")])],1),t._v(" "),a("span",[t._v("Завести прием")])],1)],1)])]}}])}):t._e()],1)],1)],1)],1)],1),t._v(" "),a("app-footer",{attrs:{subsystem:t.subSystem.primaryColor,currentUser:t.currentUser}}),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackBar.timeout,right:"right",color:t.snackBar.color},model:{value:t.snackBar.show,callback:function(e){t.$set(t.snackBar,"show",e)},expression:"snackBar.show"}},[t._v("\n    "+t._s(t.snackBar.message)+"\n  ")]),t._v(" "),t.currentEditPatient.activeMedos.medosDoctors?a("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:t.makeAppointmentDialog.show,callback:function(e){t.$set(t.makeAppointmentDialog,"show",e)},expression:"makeAppointmentDialog.show"}},[a("v-card",[a("v-card-title",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm6:""}},[a("span",{staticClass:"headline"},[t._v("Прием врача-"+t._s(t.currentUserDoctor.name)+"а для пациента"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])])]),t._v(" "),a("v-flex",{attrs:{sm6:""}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:"","pl-1":"","pr-1":""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,dark:"",block:""},nativeOn:{click:function(e){t.makeAppointmentDialog.showInfo=!t.makeAppointmentDialog.showInfo}}},[t._v("\n                  Инфо\n                ")])],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:"","pl-1":"","pr-1":""}},[a("v-btn",{attrs:{color:"red darken-4",dark:"",block:""},nativeOn:{click:function(e){t.makeAppointmentDialog.showBlood=!t.makeAppointmentDialog.showBlood}}},[t._v("\n                  Кровь\n                ")])],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:"","pl-1":"","pr-1":""}},[a("v-btn",{attrs:{color:"yellow darken-4",dark:"",block:""},nativeOn:{click:function(e){t.makeAppointmentDialog.showUrine=!t.makeAppointmentDialog.showUrine}}},[t._v("\n                  Моча\n                ")])],1)],1),t._v(" "),4===this.currentUser.roles.medos.doctor?a("v-layout",{attrs:{row:"",wrap:""}},[t.ophthalmologistExams.ocularFundus?a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(e){t.openExamDialog("ocularFundus")}}},[t._v("\n                  Дно\n                ")])],1):t._e(),t._v(" "),t.ophthalmologistExams.fields?a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(e){t.openExamDialog("fields")}}},[t._v("\n                  Поля\n                ")])],1):t._e(),t._v(" "),t.ophthalmologistExams.intraocularPressure?a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(e){t.openExamDialog("intraocularPressure")}}},[t._v("\n                  ВГД\n                ")])],1):t._e(),t._v(" "),t.ophthalmologistExams.refractometry?a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(e){t.openExamDialog("refractometry")}}},[t._v("\n                  Реф\n                ")])],1):t._e(),t._v(" "),t.ophthalmologistExams.colorBlindness?a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(e){t.openExamDialog("colorBlindness")}}},[t._v("\n                  Цвет\n                ")])],1):t._e()],1):t._e(),t._v(" "),3===this.currentUser.roles.medos.doctor?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(e){t.makeAppointmentDialog.showRw=!t.makeAppointmentDialog.showRw}}},[t._v("\n                  RW и Мазок\n                ")])],1)],1):t._e(),t._v(" "),1===this.currentUser.roles.medos.doctor||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-btn",{attrs:{color:t.ifAllDoctorsComplete()&&t.ifAllExamsComplete?"green darken-2":"light-blue darken-4",dark:"",block:""},nativeOn:{click:function(e){t.openConclusionsDialog()}}},[t._v("\n                  Годности\n                ")])],1)],1):t._e()],1)],1)],1),t._v(" "),a("v-card-text",[t.currentEditPatient.activeMedos?a("p",[a("strong",[t._v("Дата регистрации:")]),t._v(" "+t._s(t._f("formatDate")(t.currentEditPatient.activeMedos.medosRegistrationDate))+"\n        ")]):t._e(),t._v(" "),t.currentEditPatient.activeMedos.medosJob&&t.currentEditPatient.activeMedos.medosParameters&&t.makeAppointmentDialog.showInfo?a("p",[a("strong",[t._v("Цех:")]),t._v(" "+t._s(t.currentEditPatient.activeMedos.medosJob.jobDivision.jobDivisionName)+",\n          "),a("strong",[t._v("табельный номер:")]),t._v(" "+t._s(t.currentEditPatient.activeMedos.medosJob.jobPersonnelNumber)),a("br"),t._v(" "),a("strong",[t._v("Участок:")]),t._v(" "+t._s(t.currentEditPatient.activeMedos.medosJob.jobDepartment.jobDepartmentName)+",\n          "),a("strong",[t._v("профессия:")]),t._v(" "+t._s(t.currentEditPatient.activeMedos.medosJob.jobName)),a("br"),t._v(" "),a("strong",[t._v("Проффакторы:")]),t._v(" "),t._l(t.currentEditPatient.activeMedos.medosHarms,function(e){return t.currentEditPatient.activeMedos.medosHarms?a("span",{key:e.harmId},[t._v("\n            "+t._s(e.harmName)+"; ")]):t._e()}),a("br"),t._v(" "),t.currentEditPatient.activeMedos.medosParameters?a("span",[a("strong",[t._v("Анамнез:")]),t._v(" "+t._s(t.currentEditPatient.activeMedos.medosParameters.comment)),a("br")]):t._e(),t._v(" "),t.sortedRgResult?a("span",[a("strong",[t._v("Флюорография:")]),t._v(" "+t._s(t._f("formatDate")(t.sortedRgResult.rgDate))+", "+t._s(t.sortedRgResult.rgLocation.rgLocationComment)+"\n          ")]):t._e(),t._v(" "),t.sortedRgResult?t._e():a("span",[a("strong",[t._v("Флюорография: "),a("span",{staticClass:"red--text"},[t._v("отсутствует")])])])],2):t._e(),t._v(" "),t.makeAppointmentDialog.showInfo?a("p",[t.currentEditPatient.activeMedos.medosDoctors?a("strong",[t._v("Врачи:")]):t._e(),t._v(" "),t._l(t.currentEditPatient.activeMedos.medosDoctors.mustDoctors,function(e){return t.currentEditPatient.activeMedos.medosDoctors?a("span",{key:e.doctorId},[t._v("\n            "+t._s(e.doctorName)+"; ")]):t._e()}),a("br"),t._v(" "),t.currentEditPatient.activeMedos.medosExams?a("strong",[t._v("Обследования:")]):t._e(),t._v(" "),t._l(t.currentEditPatient.activeMedos.medosExams.mustExams,function(e){return t.currentEditPatient.activeMedos.medosExams?a("span",{key:e.examId},[t._v("\n            "+t._s(e.examName)+"; ")]):t._e()}),a("br")],2):t._e(),t._v(" "),t.sortedBloodResult.bloodResult&&t.makeAppointmentDialog.showBlood?a("p",[a("strong",[t._v("Клинический анализ крови:")]),t._v(" "+t._s(t._f("formatDate")(t.sortedBloodResult.bloodDate))+":"),a("br"),t._v("\n          Hb="+t._s(t.sortedBloodResult.bloodResult.hemoglobin)+", L="+t._s(t.sortedBloodResult.bloodResult.leucocytes)+", СОЭ="+t._s(t.sortedBloodResult.bloodResult.esr)+", Баз="+t._s(t.sortedBloodResult.bloodResult.basophils)+", Миел="+t._s(t.sortedBloodResult.bloodResult.myelocytes)+", Юные="+t._s(t.sortedBloodResult.bloodResult.young)+", Пал="+t._s(t.sortedBloodResult.bloodResult.sticks)+", Сегменты="+t._s(t.sortedBloodResult.bloodResult.segments)+", Лимф="+t._s(t.sortedBloodResult.bloodResult.lymphocytes)+", Моно="+t._s(t.sortedBloodResult.bloodResult.monocytes)+", Норм="+t._s(t.sortedBloodResult.bloodResult.normoblasts)+", ТЗН="+t._s(t.sortedBloodResult.bloodResult.tng))]):t._e(),t._v(" "),t.sortedBloodResult.bloodResult&&t.makeAppointmentDialog.showBlood?a("p",[a("strong",[t._v("Биохимический анализ крови:")]),t._v(" "+t._s(t._f("formatDate")(t.sortedBloodResult.bloodDate))+":"),a("br"),t._v("\n          Сахар="+t._s(t.sortedBloodResult.bloodResult.sugar)+", Холистерин="+t._s(t.sortedBloodResult.bloodResult.cholesterol)+",\n          Протромбин="+t._s(t.sortedBloodResult.bloodResult.prothrombin)+", МНО="+t._s(t.sortedBloodResult.bloodResult.inr)+"\n        ")]):t._e(),t._v(" "),t.sortedUrineResult.urineGeneral&&t.makeAppointmentDialog.showUrine?a("p",[a("strong",[t._v("Клинический анализ мочи:")]),t._v(" "+t._s(t._f("formatDate")(t.sortedUrineResult.urineDate))+":"),a("br"),t._v("\n          Цвет="+t._s(t.sortedUrineResult.urineGeneral.color.colorName)+", Реакция="+t._s(t.sortedUrineResult.urineGeneral.reaction.reactionName)+", Плотность="+t._s(t.sortedUrineResult.urineGeneral.density)+", Прозрачность="+t._s(t.sortedUrineResult.urineGeneral.transparency?"прозрачная":"мутная")+", Белок="+t._s(t.sortedUrineResult.urineGeneral.protein)+", Глюкоза="+t._s(t.sortedUrineResult.urineGeneral.glucose.glucoseName)+",\n          Ацетон="+t._s(t.sortedUrineResult.urineGeneral.acetone.acetoneName)+", Желч. пигмент="+t._s(t.sortedUrineResult.urineGeneral.bile?"есть":"нет")),a("br"),t._v("\n          Эпителий: плоский="+t._s(t.sortedUrineResult.urineElements.flatEpithelium)+", моч.путей="+t._s(t.sortedUrineResult.urineElements.tractEpithelium)+", почечный="+t._s(t.sortedUrineResult.urineElements.renalEpithelium)+". Лейкоциты="+t._s(t.sortedUrineResult.urineElements.leucocytes)+", Эритроциты="+t._s(t.sortedUrineResult.urineElements.erythrocytes)),a("br"),t._v("\n          Цилиндры: гиалин="+t._s(t.sortedUrineResult.urineElements.cylinders.hyaline)+", зернист="+t._s(t.sortedUrineResult.urineElements.cylinders.granular)+", воск="+t._s(t.sortedUrineResult.urineElements.cylinders.waxy)+", эпител="+t._s(t.sortedUrineResult.urineElements.cylinders.epithelial)+". Соли="+t._s(t.sortedUrineResult.urineElements.salts.saltsName)+", слизь="+t._s(t.sortedUrineResult.urineElements.slime?"есть":"нет")+"\n        ")]):t._e(),t._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[4===t.currentUserDoctor.id?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm3:""}},[a("h4",[t._v("Без коррекции:")])]),t._v(" "),a("v-flex",{attrs:{sm6:""}},[a("h4",[t._v("Коррекция:")])]),t._v(" "),a("v-flex",{attrs:{sm3:""}},[a("h4",[t._v("С коррекцией:")])])],1):t._e(),t._v(" "),4===t.currentUserDoctor.id?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Без кор. OD",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.noCorrection.od,callback:function(e){t.$set(t.currentOphthalmologistResult.noCorrection,"od",e)},expression:"currentOphthalmologistResult.noCorrection.od"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OD SPH",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.correction.od.sph,callback:function(e){t.$set(t.currentOphthalmologistResult.correction.od,"sph",e)},expression:"currentOphthalmologistResult.correction.od.sph"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OD CYL",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.correction.od.cyl,callback:function(e){t.$set(t.currentOphthalmologistResult.correction.od,"cyl",e)},expression:"currentOphthalmologistResult.correction.od.cyl"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OD AX",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.correction.od.ax,callback:function(e){t.$set(t.currentOphthalmologistResult.correction.od,"ax",e)},expression:"currentOphthalmologistResult.correction.od.ax"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"С кор. OD",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.withCorrection.od,callback:function(e){t.$set(t.currentOphthalmologistResult.withCorrection,"od",e)},expression:"currentOphthalmologistResult.withCorrection.od"}})],1)],1):t._e(),t._v(" "),4===t.currentUserDoctor.id?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Без кор. OS",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.noCorrection.os,callback:function(e){t.$set(t.currentOphthalmologistResult.noCorrection,"os",e)},expression:"currentOphthalmologistResult.noCorrection.os"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OS SPH",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.correction.os.sph,callback:function(e){t.$set(t.currentOphthalmologistResult.correction.os,"sph",e)},expression:"currentOphthalmologistResult.correction.os.sph"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OS CYL",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.correction.os.cyl,callback:function(e){t.$set(t.currentOphthalmologistResult.correction.os,"cyl",e)},expression:"currentOphthalmologistResult.correction.os.cyl"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OS AX",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.correction.os.ax,callback:function(e){t.$set(t.currentOphthalmologistResult.correction.os,"ax",e)},expression:"currentOphthalmologistResult.correction.os.ax"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"С кор. OS",color:t.subSystem.primaryColor},model:{value:t.currentOphthalmologistResult.withCorrection.os,callback:function(e){t.$set(t.currentOphthalmologistResult.withCorrection,"os",e)},expression:"currentOphthalmologistResult.withCorrection.os"}})],1)],1):t._e(),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[t._v("Осмотр:")])])],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-text-field",{attrs:{"multi-line":"",rows:"3","auto-grow":"",label:"Объект. статус",color:t.subSystem.primaryColor},model:{value:t.currentDoctorResult.doctorStatus,callback:function(e){t.$set(t.currentDoctorResult,"doctorStatus",e)},expression:"currentDoctorResult.doctorStatus"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{"auto-grow":"",label:"Жалобы",color:t.subSystem.primaryColor},model:{value:t.currentDoctorResult.doctorComplaints,callback:function(e){t.$set(t.currentDoctorResult,"doctorComplaints",e)},expression:"currentDoctorResult.doctorComplaints"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Диагноз",color:t.subSystem.primaryColor},model:{value:t.currentDoctorResult.doctorDiagnosis.diagnosis,callback:function(e){t.$set(t.currentDoctorResult.doctorDiagnosis,"diagnosis",e)},expression:"currentDoctorResult.doctorDiagnosis.diagnosis"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-select",{attrs:{items:t.doctorDetectabilities,label:"Выявляен",color:t.subSystem.primaryColor},model:{value:t.currentDoctorResult.doctorDiagnosis.detectability,callback:function(e){t.$set(t.currentDoctorResult.doctorDiagnosis,"detectability",e)},expression:"currentDoctorResult.doctorDiagnosis.detectability"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Комментарий",color:t.subSystem.primaryColor},model:{value:t.currentDoctorResult.doctorDiagnosis.diagnosisComment,callback:function(e){t.$set(t.currentDoctorResult.doctorDiagnosis,"diagnosisComment",e)},expression:"currentDoctorResult.doctorDiagnosis.diagnosisComment"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-select",{attrs:{"auto-grow":"",multiple:"",items:t.doctorConclusions,label:"Годность",color:t.subSystem.primaryColor},model:{value:t.currentDoctorResult.doctorConclusion,callback:function(e){t.$set(t.currentDoctorResult,"doctorConclusion",e)},expression:"currentDoctorResult.doctorConclusion"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.noExaminationDialog(e)}}},[t._v("Закрыть\n        ")]),t._v(" "),1===this.currentUser.roles.medos.doctor||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser?t._e():a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesExaminationDialog(e)}}},[t._v("Сохранить\n        ")]),t._v(" "),1===this.currentUser.roles.medos.doctor||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser?a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor,disabled:!(t.ifAllDoctorsComplete()&&t.ifAllExamsComplete())},nativeOn:{click:function(e){return t.yesExaminationDialog(e)}}},[t._v("Сохранить прием\n        ")]):t._e(),t._v(" "),1===this.currentUser.roles.medos.doctor||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser?a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.secondaryColor,disabled:!(t.ifAllDoctorsComplete()&&t.ifAllExamsComplete())},nativeOn:{click:function(e){return t.closeMedosDialog(e)}}},[t._v("Закрыть медосмотр\n        ")]):t._e()],1)],1)],1):t._e(),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.examsDialog.ocularFundus,callback:function(e){t.$set(t.examsDialog,"ocularFundus",e)},expression:"examsDialog.ocularFundus"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Обследование на глазное дно")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-text-field",{attrs:{"auto-grow":"","multi-line":"",rows:"3",label:"Результат",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult,callback:function(e){t.$set(t.currentExamResult,"examResult",e)},expression:"currentExamResult.examResult"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){t.noExamDialog("ocularFundus")}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){t.yesExamDialog("ocularFundus")}}},[t._v("\n          Сохранить\n        ")])],1)],1)],1),t._v(" "),t.currentExamResult.examResult?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.examsDialog.fields,callback:function(e){t.$set(t.examsDialog,"fields",e)},expression:"examsDialog.fields"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Обследование полей зрения")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.fieldResults,label:"Результат OD",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.od,callback:function(e){t.$set(t.currentExamResult.examResult,"od",e)},expression:"currentExamResult.examResult.od"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.fieldResults,label:"Результат OS",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.os,callback:function(e){t.$set(t.currentExamResult.examResult,"os",e)},expression:"currentExamResult.examResult.os"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){t.noExamDialog("fields")}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){t.yesExamDialog("fields")}}},[t._v("\n          Сохранить\n        ")])],1)],1)],1):t._e(),t._v(" "),t.currentExamResult.examResult?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.examsDialog.intraocularPressure,callback:function(e){t.$set(t.examsDialog,"intraocularPressure",e)},expression:"examsDialog.intraocularPressure"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Внутриглазное давление")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"OD, мм рт ст",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.od,callback:function(e){t.$set(t.currentExamResult.examResult,"od",e)},expression:"currentExamResult.examResult.od"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"OS, мм рт ст",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.os,callback:function(e){t.$set(t.currentExamResult.examResult,"os",e)},expression:"currentExamResult.examResult.os"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){t.noExamDialog("intraocularPressure")}}},[t._v("Закрыть\n        ")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){t.yesExamDialog("intraocularPressure")}}},[t._v("\n          Сохранить\n        ")])],1)],1)],1):t._e(),t._v(" "),t.currentExamResult.examResult?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.examsDialog.refractometry,callback:function(e){t.$set(t.examsDialog,"refractometry",e)},expression:"examsDialog.refractometry"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Авторефрактометрия")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[t.currentExamResult.examResult.od?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OD SPH",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.od.sph,callback:function(e){t.$set(t.currentExamResult.examResult.od,"sph",e)},expression:"currentExamResult.examResult.od.sph"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OD CYL",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.od.cyl,callback:function(e){t.$set(t.currentExamResult.examResult.od,"cyl",e)},expression:"currentExamResult.examResult.od.cyl"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OD AX",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.od.ax,callback:function(e){t.$set(t.currentExamResult.examResult.od,"ax",e)},expression:"currentExamResult.examResult.od.ax"}})],1)],1):t._e(),t._v(" "),t.currentExamResult.examResult.os?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OS SPH",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.os.sph,callback:function(e){t.$set(t.currentExamResult.examResult.os,"sph",e)},expression:"currentExamResult.examResult.os.sph"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OS CYL",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.os.cyl,callback:function(e){t.$set(t.currentExamResult.examResult.os,"cyl",e)},expression:"currentExamResult.examResult.os.cyl"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OS AX",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.os.ax,callback:function(e){t.$set(t.currentExamResult.examResult.os,"ax",e)},expression:"currentExamResult.examResult.os.ax"}})],1)],1):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){t.noExamDialog("refractometry")}}},[t._v("Закрыть\n        ")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){t.yesExamDialog("refractometry")}}},[t._v("\n          Сохранить\n        ")])],1)],1)],1):t._e(),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.examsDialog.colorBlindness,callback:function(e){t.$set(t.examsDialog,"colorBlindness",e)},expression:"examsDialog.colorBlindness"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Цветоощущение")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-select",{attrs:{items:t.colorBlindnessResults,label:"Цветощущение",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult,callback:function(e){t.$set(t.currentExamResult,"examResult",e)},expression:"currentExamResult.examResult"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){t.noExamDialog("colorBlindness")}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){t.yesExamDialog("colorBlindness")}}},[t._v("\n          Сохранить\n        ")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:t.conclusionsDialog.show,callback:function(e){t.$set(t.conclusionsDialog,"show",e)},expression:"conclusionsDialog.show"}},[a("v-card",{staticStyle:{background:"#eaeaea"}},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Результаты пациента"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])])]),t._v(" "),a("v-card-text",[this.currentEditPatient.activeMedos.medosDoctors?a("v-container",{attrs:{"grid-list-md":""}},[a("h2",{class:t.ifAllDoctorsComplete()?"green--text":"red--text",staticStyle:{"margin-bottom":"10px"}},[t._v("Доктора")]),t._v(" "),a("v-expansion-panel",{attrs:{focusable:""}},t._l(t.currentEditPatient.activeMedos.medosDoctors.mustDoctors,function(e){return 1!==e.doctorId?a("v-expansion-panel-content",{key:e.doctorId},[t.ifDoctorHasResult(e.doctorId)?a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",[t._v(t._s(t.getDoctorName(e.doctorId)))]),t._v(" — "+t._s(t.getDoctorResult(e.doctorId).doctorConclusion.toString())+"\n              ")]):t._e(),t._v(" "),t.ifDoctorHasResult(e.doctorId)?t._e():a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",[t._v(t._s(t.getDoctorName(e.doctorId)))]),t._v(" — "),a("strong",{staticClass:"red--text"},[t._v("Нет\n                заключения")])]),t._v(" "),t.ifDoctorHasResult(e.doctorId)?a("v-card",[a("v-card-text",{staticStyle:{padding:"10px 24px"}},[a("p",[a("strong",[t._v("Жалобы:")]),t._v(" "+t._s(t.getDoctorResult(e.doctorId).doctorComplaints)+"\n                  ")]),t._v(" "),a("p",[a("strong",[t._v("Объективный статус:")]),t._v(" "+t._s(t.getDoctorResult(e.doctorId).doctorStatus)+"\n                  ")]),t._v(" "),t.getDoctorResult(e.doctorId).doctorDiagnosis?a("p",[a("strong",[t._v("Диагноз:")]),t._v(" "+t._s(t.getDoctorResult(e.doctorId).doctorDiagnosis.diagnosis)+"\n                    "),void 0!==t.getDoctorResult(e.doctorId).doctorDiagnosis.detectability?a("strong",[t._v("\n                      ("+t._s(!0===t.getDoctorResult(e.doctorId).doctorDiagnosis.detectability?"+":"-")+")\n                    ")]):t._e(),t._v(" "),""!==t.getDoctorResult(e.doctorId).doctorDiagnosis.diagnosisComment?a("em",[t._v("— "+t._s(t.getDoctorResult(e.doctorId).doctorDiagnosis.diagnosisComment))]):t._e()]):t._e(),t._v(" "),t.getDoctorResult(e.doctorId).doctorSpecial?a("p"):t._e(),t._v(" "),a("p",[a("strong",[t._v("Годность:")]),t._v(" "+t._s(t.getDoctorResult(e.doctorId).doctorConclusion.toString())+"\n                  ")])])],1):t._e()],1):t._e()}))],1):t._e(),t._v(" "),a("br"),t._v(" "),this.currentEditPatient.activeMedos.medosExams&&t.ifAnyExamNeeded()?a("v-container",{attrs:{"grid-list-md":""}},[a("h2",{class:t.ifAllExamsComplete()?"green--text":"red--text",staticStyle:{margin:"10px 0"}},[t._v("Обследования")]),t._v(" "),a("v-expansion-panel",{attrs:{focusable:""}},t._l(t.currentEditPatient.activeMedos.medosExams.mustExams,function(e){return t.examsForConclusions.includes(e.examId)?a("v-expansion-panel-content",{key:e.examId},[t.ifExamHasResult(e.examId)?a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",[t._v(t._s(e.examName))])]):t._e(),t._v(" "),t.ifExamHasResult(e.examId)?t._e():a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",[t._v(t._s(e.examName))]),t._v(" — "),a("strong",{staticClass:"red--text"},[t._v("Нет\n                заключения")])]),t._v(" "),t.ifExamHasResult(e.examId)?a("v-card",[a("v-card-text",{staticStyle:{padding:"10px 24px"}},[19===e.examId?a("span",[t._v("\n                    "+t._s(t.getExamResult(e.examId).examResult)+"\n                  ")]):t._e(),t._v(" "),20===e.examId?a("p",[a("strong",[t._v("OD:")]),t._v(" "+t._s(t.fieldResults.find(function(a){return a.value===t.getExamResult(e.examId).examResult.od}).text)),a("br"),t._v(" "),a("strong",[t._v("OS:")]),t._v(" "+t._s(t.fieldResults.find(function(a){return a.value===t.getExamResult(e.examId).examResult.os}).text)+"\n                  ")]):t._e(),t._v(" "),21===e.examId?a("span",[a("strong",[t._v("OD:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.od)+" мм рт.ст."),a("br"),t._v(" "),a("strong",[t._v("OS:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.os)+" мм рт.ст.\n                  ")]):t._e(),t._v(" "),32===e.examId?a("span",[a("strong",[t._v("OD:")]),t._v(" SPH: "+t._s(t.getExamResult(e.examId).examResult.od.sph)+" CYL: "+t._s(t.getExamResult(e.examId).examResult.od.cyl)+" AX: "+t._s(t.getExamResult(e.examId).examResult.od.ax)),a("br"),t._v(" "),a("strong",[t._v("OS:")]),t._v(" SPH: "+t._s(t.getExamResult(e.examId).examResult.os.sph)+" CYL: "+t._s(t.getExamResult(e.examId).examResult.os.cyl)+" AX: "+t._s(t.getExamResult(e.examId).examResult.os.ax)+"\n                  ")]):t._e(),t._v(" "),34===e.examId?a("span",[a("strong",[t._v("AD:")]),t._v(" "),a("em",[t._v("125:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.ad.f125)+" "),a("em",[t._v("250:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.ad.f250)+" "),a("em",[t._v("500:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.ad.f500)+" "),a("em",[t._v("1000:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.ad.f1000)+" "),a("em",[t._v("2000:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.ad.f2000)+" "),a("em",[t._v("4000:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.ad.f4000)+" "),a("em",[t._v("6000:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.ad.f6000)),a("br"),t._v(" "),a("strong",[t._v("AS:")]),t._v(" "),a("em",[t._v("125:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.as.f125)+" "),a("em",[t._v("250:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.as.f250)+" "),a("em",[t._v("500:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.as.f500)+" "),a("em",[t._v("1000:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.as.f1000)+" "),a("em",[t._v("2000:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.as.f2000)+" "),a("em",[t._v("4000:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.as.f4000)+" "),a("em",[t._v("6000:")]),t._v(" "+t._s(t.getExamResult(e.examId).examResult.as.f6000)+"\n                  ")]):t._e()])],1):t._e()],1):t._e()}))],1):t._e()],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){t.noConclusionsDialog()}}},[t._v("Закрыть")])],1)],1)],1)],1)},staticRenderFns:[]};var D=a("VU/8")(R,w,!1,function(t){a("HQkp")},null,null).exports,C="http://"+window.location.hostname+":3001",E={data:function(){return{currentUser:{username:"",password:"",fio:"",roles:{superuser:!1,medos:{receptionist:!1,premedical:!1,functionalDiagnostics:!1,doctor:!1,admin:!1},radiography:{assistant:!1,admin:!1},laboratory:{assistant:!1,admin:!1},vaccination:{assistant:!1,admin:!1}}},patientQuery:{},patients:[],currentUserExam:{id:"",name:""},currentEditPatient:{activeMedos:{}},currentExamResult:{},examResultDialog:{show:!1,edit:!1,exam:""},snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"deep-purple darken-4",secondaryColor:"deep-orange darken-4"}}},mounted:function(){this.getCurrentUser()},methods:{openExaminationDialog:function(t){var e=this;this.currentEditPatient=t.patient,this.examResultDialog.exam=t.exam,this.examResultDialog.show=!0,34===this.examResultDialog.exam?this.currentExamResult={examId:34,examResult:{ad:{f125:"10",f250:"10",f500:"10",f1000:"10",f2000:"10",f4000:"10",f6000:"10"},as:{f125:"10",f250:"10",f500:"10",f1000:"10",f2000:"10",f4000:"10",f6000:"10"}}}:this.currentExamResult={examId:this.examResultDialog.exam,examResult:!1},this.currentEditPatient.activeMedos.medosExamResults.some(function(t){return t.examId===e.examResultDialog.exam})&&(this.examResultDialog.edit=!0,this.currentExamResult=this.currentEditPatient.activeMedos.medosExamResults.find(function(t){return t.examId===e.examResultDialog.exam}))},noExaminationDialog:function(){this.examResultDialog={show:!1,edit:!1,exam:""}},yesExaminationDialog:function(){var t=this,e=this.currentExamResult;this.examResultDialog.edit?l.a.put(C+"/api/v1/patient/"+this.currentEditPatient._id+"/examResult/"+e._id,{examResult:e},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3,t.getMedosPatients(),t.examResultDialog={show:!1,edit:!1,exam:""},t.currentEditPatient={activeMedos:{}}):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3)}).catch(function(e){t.errorHandler(e)}):l.a.post(C+"/api/v1/patient/"+this.currentEditPatient._id+"/examResult/",{examResult:e},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3,t.getMedosPatients(),t.examResultDialog={show:!1,edit:!1,exam:""},t.currentEditPatient={activeMedos:{}}):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3)}).catch(function(e){t.errorHandler(e)})},getMedosPatients:function(){var t=this,e={};e.lastName=void 0===this.patientQuery.lastName||""===this.patientQuery.lastName?" ":this.patientQuery.lastName,e.firstName=void 0===this.patientQuery.firstName||""===this.patientQuery.firstName?" ":this.patientQuery.firstName,e.middleName=void 0===this.patientQuery.middleName||""===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(C+"/api/v1/patient/medos/"+e.lastName+"/"+e.firstName+"/"+e.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.show=!1,t.patients=e.data.patients,t.patients.forEach(function(e){e.dateBirth=t.dateFromIso(e.dateBirth)})):(t.patients=[],t.snackBar.show=!0,t.snackBar.color="yellow accent-3 black--text",t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})},getCurrentUser:function(){var t=this;l.a.get(C+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;switch(t.currentUser=a,t.currentUserExam.id=t.currentUser.roles.medos.exam,t.currentUserExam.id){case 1:t.currentUserExam.name="лаборанта ОФД";break;case 34:t.currentUserExam.name="аудиометриста"}(t.currentUser.roles.medos.admin||t.currentUser.roles.user)&&(t.currentUserExam.name="обследований проф. осмотра")}).catch(function(e){t.errorHandler(e)})},checkPatientEcg:function(){return this.currentUserExam&&1===this.currentUserExam.id||this.currentUser.roles.medos&&this.currentUser.roles.medos.admin||this.currentUser.roles.superuser},checkPatientSpirometry:function(t){var e=t.activeMedos.medosExams.mustExams,a=this.currentUserExam&&1===this.currentUserExam.id||this.currentUser.roles.medos&&this.currentUser.roles.medos.admin||this.currentUser.roles.superuser;return e.some(function(t){return 1===t.examId})&&a},checkPatientAudiometry:function(t){var e=t.activeMedos.medosExams.mustExams,a=this.currentUserExam&&34===this.currentUserExam.id||this.currentUser.roles.medos&&this.currentUser.roles.medos.admin||this.currentUser.roles.superuser;return e.some(function(t){return 34===t.examId})&&a},dateFromIso:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,s=e.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(t){var e=t.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===e&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=t.response.data.message}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:t.subSystem.primaryColor,subtitle:"Рабочее место "+t.currentUserExam.name,currentUser:t.currentUser}}),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[t._v("Пациенты на мед. осмотре")]),t._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.primaryColor,label:"Фамилия",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getMedosPatients(e):null}},model:{value:t.patientQuery.lastName,callback:function(e){t.$set(t.patientQuery,"lastName",e)},expression:"patientQuery.lastName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.primaryColor,label:"Имя",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getMedosPatients(e):null}},model:{value:t.patientQuery.firstName,callback:function(e){t.$set(t.patientQuery,"firstName",e)},expression:"patientQuery.firstName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.primaryColor,label:"Отчество",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getMedosPatients(e):null}},model:{value:t.patientQuery.middleName,callback:function(e){t.$set(t.patientQuery,"middleName",e)},expression:"patientQuery.middleName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){return t.getMedosPatients(e)}}},[t._v("Найти")])],1)],1),t._v(" "),t.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{headers:[{text:"ФИО",sortable:!1},{text:"Осмотр",sortable:!1},{text:"Дата рождения",sortable:!1},{text:"Пол",sortable:!1},{text:"Действия",sortable:!1}],items:t.patients,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.fio))]),t._v(" "),a("td",[t._v(t._s(e.item.activeMedos.medosType.typeId))]),t._v(" "),a("td",[t._v(t._s(e.item.dateBirth))]),t._v(" "),a("td",[t._v(t._s(e.item.sex?"Муж":"Жен"))]),t._v(" "),a("td",{attrs:{width:"211px"}},[t.checkPatientEcg()?a("v-tooltip",{attrs:{top:"",color:"red darken-4"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-4",icon:""},nativeOn:{click:function(a){t.openExaminationDialog({patient:e.item,exam:46})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment_turned_in")])],1),t._v(" "),a("span",[t._v("Добавить ЭКГ")])],1):t._e(),t._v(" "),t.checkPatientSpirometry(e.item)?a("v-tooltip",{attrs:{top:"",color:"light-blue darken-4"}},[a("v-btn",{attrs:{slot:"activator",color:"light-blue darken-4",icon:""},nativeOn:{click:function(a){t.openExaminationDialog({patient:e.item,exam:1})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment_turned_in")])],1),t._v(" "),a("span",[t._v("Добавить спирометрию")])],1):t._e(),t._v(" "),t.checkPatientAudiometry(e.item)?a("v-tooltip",{attrs:{top:"",color:"pink darken-4"}},[a("v-btn",{attrs:{slot:"activator",color:"pink darken-4",icon:""},nativeOn:{click:function(a){t.openExaminationDialog({patient:e.item,exam:34})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment_turned_in")])],1),t._v(" "),a("span",[t._v("Добавить аудиометрию")])],1):t._e()],1)])]}}])}):t._e()],1)],1)],1)],1)],1),t._v(" "),a("app-footer",{attrs:{subsystem:t.subSystem.primaryColor,currentUser:t.currentUser}}),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackBar.timeout,right:"right",color:t.snackBar.color},model:{value:t.snackBar.show,callback:function(e){t.$set(t.snackBar,"show",e)},expression:"snackBar.show"}},[t._v("\n    "+t._s(t.snackBar.message)+"\n  ")]),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:t.examResultDialog.show,callback:function(e){t.$set(t.examResultDialog,"show",e)},expression:"examResultDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Обследование для пациента"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[46===t.examResultDialog.exam||1===t.examResultDialog.exam?a("v-layout",{attrs:{row:"",wrap:""}},[46===t.examResultDialog.exam?a("v-flex",{attrs:{sm12:""}},[a("h2",[t._v("ЭКГ")])]):t._e(),t._v(" "),46===t.examResultDialog.exam?a("v-flex",{attrs:{sm12:""}},[a("v-checkbox",{attrs:{label:"Пациент прошел ЭКГ"},model:{value:t.currentExamResult.examResult,callback:function(e){t.$set(t.currentExamResult,"examResult",e)},expression:"currentExamResult.examResult"}})],1):t._e(),t._v(" "),1===t.examResultDialog.exam?a("v-flex",{attrs:{sm12:""}},[a("h2",[t._v("Спирометрия")])]):t._e(),t._v(" "),1===t.examResultDialog.exam?a("v-flex",{attrs:{sm12:""}},[a("v-checkbox",{attrs:{label:"Пациент прошел спирометрию"},model:{value:t.currentExamResult.examResult,callback:function(e){t.$set(t.currentExamResult,"examResult",e)},expression:"currentExamResult.examResult"}})],1):t._e()],1):t._e(),t._v(" "),34===t.examResultDialog.exam&&t.currentExamResult.examResult?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h2",[t._v("Аудиометрия")])]),t._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("h3",{staticStyle:{margin:"22px 0 6px"}},[t._v("AD")])]),t._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"125",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.ad.f125,callback:function(e){t.$set(t.currentExamResult.examResult.ad,"f125",e)},expression:"currentExamResult.examResult.ad.f125"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"250",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.ad.f250,callback:function(e){t.$set(t.currentExamResult.examResult.ad,"f250",e)},expression:"currentExamResult.examResult.ad.f250"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"500",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.ad.f500,callback:function(e){t.$set(t.currentExamResult.examResult.ad,"f500",e)},expression:"currentExamResult.examResult.ad.f500"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"1000",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.ad.f1000,callback:function(e){t.$set(t.currentExamResult.examResult.ad,"f1000",e)},expression:"currentExamResult.examResult.ad.f1000"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"2000",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.ad.f2000,callback:function(e){t.$set(t.currentExamResult.examResult.ad,"f2000",e)},expression:"currentExamResult.examResult.ad.f2000"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"4000",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.ad.f4000,callback:function(e){t.$set(t.currentExamResult.examResult.ad,"f4000",e)},expression:"currentExamResult.examResult.ad.f4000"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"6000",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.ad.f6000,callback:function(e){t.$set(t.currentExamResult.examResult.ad,"f6000",e)},expression:"currentExamResult.examResult.ad.f6000"}})],1)],1):t._e(),t._v(" "),34===t.examResultDialog.exam&&t.currentExamResult.examResult?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md1:""}},[a("h3",{staticStyle:{margin:"22px 0 6px"}},[t._v("AS")])]),t._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"125",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.as.f125,callback:function(e){t.$set(t.currentExamResult.examResult.as,"f125",e)},expression:"currentExamResult.examResult.as.f125"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"250",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.as.f250,callback:function(e){t.$set(t.currentExamResult.examResult.as,"f250",e)},expression:"currentExamResult.examResult.as.f250"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"500",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.as.f500,callback:function(e){t.$set(t.currentExamResult.examResult.as,"f500",e)},expression:"currentExamResult.examResult.as.f500"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"1000",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.as.f1000,callback:function(e){t.$set(t.currentExamResult.examResult.as,"f1000",e)},expression:"currentExamResult.examResult.as.f1000"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"2000",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.as.f2000,callback:function(e){t.$set(t.currentExamResult.examResult.as,"f2000",e)},expression:"currentExamResult.examResult.as.f2000"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"4000",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.as.f4000,callback:function(e){t.$set(t.currentExamResult.examResult.as,"f4000",e)},expression:"currentExamResult.examResult.as.f4000"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"6000",color:t.subSystem.primaryColor},model:{value:t.currentExamResult.examResult.as.f6000,callback:function(e){t.$set(t.currentExamResult.examResult.as,"f6000",e)},expression:"currentExamResult.examResult.as.f6000"}})],1)],1):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){t.noExaminationDialog()}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){t.yesExaminationDialog()}}},[t._v("Сохранить\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var N=a("VU/8")(E,B,!1,function(t){a("FM6E")},null,null).exports,P="http://"+window.location.hostname+":3001",I={data:function(){return{currentUser:{},patientQuery:{},patients:[],currentEditPatient:{rgResults:[],activeRgResult:{rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""}},hasActiveRgResult:!1},currentRgResult:{rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},currentRemoveItem:{},addRgDialog:{show:!1,anotherLpu:!1},editRgDialog:{show:!1},listRgDialog:{show:!1},removeDialog:{show:!1,activeRg:!1},viewRgDialog:{show:!1},rgResultTypes:[{value:!0,text:"норма"},{value:!1,text:"патология"}],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"blue-grey darken-4",secondaryColor:"grey darken-1"}}},mounted:function(){this.getCurrentUser()},methods:{openAddRgDialog:function(t){this.currentEditPatient.hasActiveRgResult?(this.snackBar.color="yellow accent-3 black--text",this.snackBar.timeout=5e3,this.snackBar.message="У этого пациента уже зарегистрирован неописанный снимок",this.snackBar.show=!0):(this.currentEditPatient=t,this.addRgDialog.show=!0)},noAddRgDialog:function(){this.addRgDialog.show=!1},yesAddRgDialog:function(){var t=this,e={};this.addRgDialog.anotherLpu?(e={rgDate:this.currentRgResult.rgDate,rgType:{rgTypeId:1,rgTypeName:"флюорография"},rgLocation:{rgLocationType:2,rgLocationComment:this.currentRgResult.rgLocation.rgLocationComment},rgResult:{rgResultType:this.currentRgResult.rgResult.rgResultType,rgResultComment:this.currentRgResult.rgResult.rgResultComment}},l.a.post(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rgFull/",{rgResult:e},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(a){a.data.success?(t.currentEditPatient.rgResults.push(e),t.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},t.addRgDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=a.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})):(e={rgDate:this.dateFromIso(Date.now()),rgType:{rgTypeId:1,rgTypeName:"флюорография"},rgLocation:{rgLocationType:1,rgLocationComment:"МБУЗ ГКБ №6, Поликлиника * 2"},rgResult:{rgResultType:!0,rgResultComment:""}},l.a.post(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rg/",{activeRgResult:e},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.currentEditPatient.activeRgResult=e.data.patient.activeRgResult,t.currentEditPatient.hasActiveRgResult=!0,t.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},t.addRgDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)}))},openEditRgDialog:function(t){this.currentEditPatient=t,t.hasActiveRgResult?(this.currentRgResult=t.activeRgResult,this.editRgDialog.show=!0):(this.snackBar.color="yellow accent-3 black--text",this.snackBar.timeout=5e3,this.snackBar.message="У этого пациента нет зарегистрированных снимков",this.snackBar.show=!0)},noEditRgDialog:function(){this.currentEditPatient={rgResults:[],activeRgResult:{rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""}},hasActiveRgResult:!1},this.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},this.editRgDialog.show=!1},yesEditRgDialog:function(){var t=this,e=this.currentRgResult;!1===this.currentRgResult.rgResultType&&""===this.currentRgResult.rgResultComment?(this.snackBar.color="yellow accent-3 black--text",this.snackBar.timeout=5e3,this.snackBar.message="Не указана паталогия",this.snackBar.show=!0):l.a.put(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rg/",{rgResult:e},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(a){a.data.success?(t.currentEditPatient.activeRgResult={},t.currentEditPatient.hasActiveRgResult=!1,t.currentEditPatient.rgResults.push(e),t.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},t.editRgDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=a.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})},openRgListDialog:function(t){this.currentEditPatient=t,this.listRgDialog.show=!0},noRgListDialog:function(){this.currentEditPatient={rgResults:[],activeRgResult:{rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""}}},this.listRgDialog.show=!1},openRemoveDialog:function(t){"active"===t?(this.removeDialog.activeRg=!0,this.currentRemoveItem=this.currentEditPatient.activeRgResult):this.currentRemoveItem=t,this.removeDialog.show=!0},noRemoveDialog:function(){this.currentRemoveItem={},this.removeDialog.show=!1,this.removeDialog.activeRg=!1},yesRemoveDialog:function(){var t=this;this.removeDialog.activeRg?l.a.delete(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rg/active/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.currentEditPatient.activeRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},t.currentEditPatient.hasActiveRgResult=!1,t.currentRemoveItem={},t.removeDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)}):l.a.delete(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rg/"+this.currentRemoveItem._id,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.currentEditPatient.rgResults=t.currentEditPatient.rgResults.filter(function(e){return e._id!==t.currentRemoveItem._id}),t.removeDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})},openRgViewDialog:function(t){this.currentRgResult=t,this.viewRgDialog.show=!0},noRgViewDialog:function(){this.viewRgDialog.show=!1,this.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}}},getPatients:function(){var t=this,e={};e.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,e.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,e.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(P+"/api/v1/patient/"+e.lastName+"/"+e.firstName+"/"+e.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.show=!1,t.patients=e.data.patients,t.patients.forEach(function(e){e.dateBirth=t.dateFromIso(e.dateBirth)})):(t.patients=[],t.snackBar.show=!0,t.snackBar.color="yellow accent-3 black--text",t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})},getCurrentUser:function(){var t=this;l.a.get(P+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;t.currentUser=a}).catch(function(e){t.errorHandler(e)})},dateFromIso:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,s=e.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(t){var e=t.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===e&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=t.response.data.message}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:t.subSystem.primaryColor,subtitle:"Снимки",currentUser:t.currentUser}}),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[t._v("Поиск пациентов")]),t._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.lastName,callback:function(e){t.$set(t.patientQuery,"lastName",e)},expression:"patientQuery.lastName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.firstName,callback:function(e){t.$set(t.patientQuery,"firstName",e)},expression:"patientQuery.firstName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.middleName,callback:function(e){t.$set(t.patientQuery,"middleName",e)},expression:"patientQuery.middleName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){return t.getPatients(e)}}},[t._v("Найти")])],1)],1),t._v(" "),t.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:t.patients,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.fio))]),t._v(" "),a("td",[t._v(t._s(e.item.dateBirth))]),t._v(" "),a("td",[t._v(t._s(e.item.sex?"Муж":"Жен"))]),t._v(" "),a("td",{attrs:{width:"211px"}},[a("v-tooltip",{attrs:{top:"",color:t.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){t.openAddRgDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment_late")])],1),t._v(" "),a("span",[t._v("Зарегистрировать снимок")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:t.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){t.openRgListDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment")])],1),t._v(" "),a("span",[t._v("Посмотреть список снимков")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:t.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){t.openEditRgDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment_turned_in")])],1),t._v(" "),a("span",[t._v("Ввести описание")])],1)],1)])]}}])}):t._e()],1)],1)],1)],1)],1),t._v(" "),a("app-footer",{attrs:{subsystem:t.subSystem.primaryColor,currentUser:t.currentUser}}),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackBar.timeout,right:"right",color:t.snackBar.color},model:{value:t.snackBar.show,callback:function(e){t.$set(t.snackBar,"show",e)},expression:"snackBar.show"}},[t._v("\n    "+t._s(t.snackBar.message)+"\n  ")]),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.addRgDialog.show,callback:function(e){t.$set(t.addRgDialog,"show",e)},expression:"addRgDialog.show"}},[a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:"",md7:""}},[a("span",{staticClass:"headline"},[t._v("\n          Зарегистрировать снимок для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))]),t._v("?\n        ")])]),t._v(" "),a("v-flex",{attrs:{sm12:"",md5:""}},[a("v-checkbox",{staticClass:"right",attrs:{label:"Снимок из другого ЛПУ"},model:{value:t.addRgDialog.anotherLpu,callback:function(e){t.$set(t.addRgDialog,"anotherLpu",e)},expression:"addRgDialog.anotherLpu"}})],1)],1),t._v(" "),t.addRgDialog.anotherLpu?a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Название ЛПУ",color:t.subSystem.primaryColor},model:{value:t.currentRgResult.rgLocation.rgLocationComment,callback:function(e){t.$set(t.currentRgResult.rgLocation,"rgLocationComment",e)},expression:"currentRgResult.rgLocation.rgLocationComment"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Дата снимка",color:t.subSystem.primaryColor,mask:"##.##.####","return-masked-value":""},model:{value:t.currentRgResult.rgDate,callback:function(e){t.$set(t.currentRgResult,"rgDate",e)},expression:"currentRgResult.rgDate"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:t.rgResultTypes,label:"Норма",color:t.subSystem.primaryColor},model:{value:t.currentRgResult.rgResult.rgResultType,callback:function(e){t.$set(t.currentRgResult.rgResult,"rgResultType",e)},expression:"currentRgResult.rgResult.rgResultType"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{disabled:t.currentRgResult.rgResult.rgResultType,label:"Заключение",color:t.subSystem.primaryColor},model:{value:t.currentRgResult.rgResult.rgResultComment,callback:function(e){t.$set(t.currentRgResult.rgResult,"rgResultComment",e)},expression:"currentRgResult.rgResult.rgResultComment"}})],1)],1)],1)],1):t._e(),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.noAddRgDialog(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesAddRgDialog(e)}}},[t._v("\n          Зарегистрировать\n        ")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.listRgDialog.show,callback:function(e){t.$set(t.listRgDialog,"show",e)},expression:"listRgDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Снимки пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])]),t._v(" "),a("v-spacer"),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){t.openAddRgDialog(t.currentEditPatient)}}},[t._v("\n              Зарегистрировать снимок\n            ")])],1)],1)],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[t.currentEditPatient.rgResults.length>0?a("h2",[t._v("Список снимков")]):t._e(),t._v(" "),t.currentEditPatient.rgResults.length>0?a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{"hide-headers":"",items:t.currentEditPatient.rgResults,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(t._f("formatDate")(e.item.rgDate)))]),t._v(" "),a("td",[t._v(t._s(e.item.rgLocation.rgLocationComment))]),t._v(" "),a("td",{attrs:{width:"172px"}},[a("v-tooltip",{attrs:{top:"",color:t.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){t.openRgViewDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("assignment")])],1),t._v(" "),a("span",[t._v("Информация о снимке")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:"red darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-2",icon:""},nativeOn:{click:function(a){t.openRemoveDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1),t._v(" "),a("span",[t._v("Удалить снимок")])],1)],1)])]}}])}):t._e(),t._v(" "),a("br"),t._v(" "),t.currentEditPatient.hasActiveRgResult?a("h2",[t._v("Зарегистрированный снимок")]):t._e(),t._v(" "),t.currentEditPatient.hasActiveRgResult?a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{"hide-headers":"",items:[t.currentEditPatient.activeRgResult],"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(t._f("formatDate")(e.item.rgDate)))]),t._v(" "),a("td",[t._v(t._s(e.item.rgLocation.rgLocationComment))]),t._v(" "),a("td",{attrs:{width:"50px"}},[a("v-tooltip",{attrs:{top:"",color:"red darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-2",icon:""},nativeOn:{click:function(e){t.openRemoveDialog("active")}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1),t._v(" "),a("span",[t._v("Удалить снимок")])],1)],1)])]}}])}):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.noRgListDialog(e)}}},[t._v("Закрыть")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.removeDialog.show,callback:function(e){t.$set(t.removeDialog,"show",e)},expression:"removeDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Удалить "),t.removeDialog.activeRg?a("span",[t._v("активный")]):t._e(),t._v(" снимок от "+t._s(t._f("formatDate")(t.currentRemoveItem.rgDate))+" для"),a("br"),t._v(" "),a("span",{staticClass:"red--text text--darken-2"},[t._v("«"+t._s(t.currentEditPatient.fio)+"»")]),t._v("?\n        ")])]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"red darken-2",flat:""},nativeOn:{click:function(e){return t.noRemoveDialog(e)}}},[t._v("Нет")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red darken-2"},nativeOn:{click:function(e){return t.yesRemoveDialog(e)}}},[t._v("Да")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"",lazy:"","max-width":"800px"},model:{value:t.viewRgDialog.show,callback:function(e){t.$set(t.viewRgDialog,"show",e)},expression:"viewRgDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Описание снимка от "+t._s(t._f("formatDate")(t.currentRgResult.rgDate))+" для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{readonly:"",label:"Дата снимка",color:t.subSystem.primaryColor,value:t.dateFromIso(t.currentRgResult.rgDate)}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{readonly:"",label:"Название ЛПУ",color:t.subSystem.primaryColor},model:{value:t.currentRgResult.rgLocation.rgLocationComment,callback:function(e){t.$set(t.currentRgResult.rgLocation,"rgLocationComment",e)},expression:"currentRgResult.rgLocation.rgLocationComment"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-select",{attrs:{readonly:"",items:t.rgResultTypes,label:"Норма",color:t.subSystem.primaryColor},model:{value:t.currentRgResult.rgResult.rgResultType,callback:function(e){t.$set(t.currentRgResult.rgResult,"rgResultType",e)},expression:"currentRgResult.rgResult.rgResultType"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{readonly:"",label:"Заключение",color:t.subSystem.primaryColor},model:{value:t.currentRgResult.rgResult.rgResultComment,callback:function(e){t.$set(t.currentRgResult.rgResult,"rgResultComment",e)},expression:"currentRgResult.rgResult.rgResultComment"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.noRgViewDialog(e)}}},[t._v("Закрыть")])],1)],1)],1)],1)},staticRenderFns:[]};var A=a("VU/8")(I,S,!1,function(t){a("r10Q")},null,null).exports,U="http://"+window.location.hostname+":3001",$={data:function(){return{currentUser:{},patientQuery:{},patients:[],currentEditPatient:{bloodResults:[],urineClinicalResults:[]},currentBloodResult:{bloodDate:"",bloodNumber:"",bloodResult:{hemoglobin:"",leucocytes:"",esr:"",basophils:"",eosinophils:"",blasts:"",myelocytes:"",young:"",sticks:"",segments:"",lymphocytes:"",monocytes:"",normoblasts:"",tng:""}},currentUrineClinicalResult:{urineDate:"",urineNumber:"",urineGeneral:{color:{colorType:"",colorName:""},reaction:{reactionType:"",reactionName:""},density:"",transparency:"",protein:"",glucose:{glucoseType:"",glucoseName:""},acetone:{acetoneType:"",acetoneName:""},bile:!1},urineElements:{flatEpithelium:"",tractEpithelium:"",renalEpithelium:"",leucocytes:"",erythrocytes:"",cylinders:{hyaline:"",granular:"",waxy:"",epithelial:""},salts:{saltsId:"",saltsName:""},slime:!1}},currentRemoveItem:{},listAnalyzesDialog:{show:!1,analyzeType:""},addAnalyzeDialog:{show:!1,edit:!1},removeDialog:{show:!1},urineColors:[{value:{colorType:1,colorName:"желтый"},text:"1 - желтый"},{value:{colorType:2,colorName:"светло-желтый"},text:"2 - светло-желтый"},{value:{colorType:3,colorName:"соломенно-желтый"},text:"3 - соломенно-желтый"},{value:{colorType:4,colorName:"бесцветный"},text:"4 - бесцветный"}],urineReactions:[{value:{reactionType:1,reactionName:"кислая"},text:"1 - кислая"},{value:{reactionType:2,reactionName:"щелочная"},text:"2 - щелочная"},{value:{reactionType:3,reactionName:"слабокислая"},text:"3 - слабокислая"},{value:{reactionType:4,reactionName:"нейтральная"},text:"4 - нейтральная"}],urineTransparency:[{value:!0,text:"1 - прозрачая"},{value:!1,text:"2 - мутная"}],urineGlucose:[{value:{glucoseType:1,glucoseName:"0"},text:"1 - 0"},{value:{glucoseType:2,glucoseName:"5,6"},text:"2 - 5,6"},{value:{glucoseType:3,glucoseName:"28"},text:"3 - 28"},{value:{glucoseType:4,glucoseName:"56"},text:"4 - 56"},{value:{glucoseType:5,glucoseName:">=111"},text:"5 - >=111"}],urineAcetone:[{value:{acetoneType:1,acetoneName:"0"},text:"1 - 0"},{value:{acetoneType:2,acetoneName:"+-"},text:"2 - +-"},{value:{acetoneType:3,acetoneName:"+"},text:"3 - +"},{value:{acetoneType:4,acetoneName:"++"},text:"4 - ++"},{value:{acetoneType:5,acetoneName:"+++"},text:"5 - +++"}],urineBile:[{value:!0,text:"1 - есть"},{value:!1,text:"0 - нет"}],urineSalts:[{value:{saltsId:0,saltsName:"нет"},text:"0 - нет"},{value:{saltsId:1,saltsName:"ураты"},text:"1 - ураты"},{value:{saltsId:2,saltsName:"фосфаты"},text:"2 - фосфаты"},{value:{saltsId:3,saltsName:"оксолаты"},text:"3 - оксолаты"},{value:{saltsId:4,saltsName:"мочевой кислоты"},text:"4 - мочевой кислоты"},{value:{saltsId:5,saltsName:"трипельфосфаты"},text:"5 - трипельфосфаты"},{value:{saltsId:6,saltsName:"холестерин"},text:"6 - холестерин"},{value:{saltsId:7,saltsName:"билирубин"},text:"7 - билирубин"}],urineSlime:[{value:!0,text:"1 - есть"},{value:!1,text:"0 - нет"}],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"red darken-4",secondaryColor:"yellow darken-4",deleteColor:"red"}}},mounted:function(){this.getCurrentUser()},methods:{openBloodResultsListDialog:function(t){this.currentEditPatient=t,this.listAnalyzesDialog={show:!0,analyzeType:"blood"}},noBloodResultsListDialog:function(){this.currentEditPatient={bloodResults:[],urineClinicalResults:[]},this.listAnalyzesDialog={show:!1,analyzeType:""}},openUrineResultsListDialog:function(t){this.currentEditPatient=t,this.listAnalyzesDialog={show:!0,analyzeType:"urineClinical"}},noUrineResultsListDialog:function(){this.currentEditPatient={bloodResults:[],urineClinicalResults:[]},this.listAnalyzesDialog={show:!1,analyzeType:""}},openResultDialog:function(t){var e=this.listAnalyzesDialog.analyzeType;if(t.edit)switch(e){case"blood":this.currentBloodResult=t.item;break;case"urineClinical":this.currentUrineClinicalResult=t.item}this.addAnalyzeDialog={show:!0,edit:t.edit}},noResultDialog:function(){switch(this.listAnalyzesDialog.analyzeType){case"blood":this.currentBloodResult={bloodDate:"",bloodNumber:"",bloodResult:{hemoglobin:"",leucocytes:"",esr:"",basophils:"",eosinophils:"",blasts:"",myelocytes:"",young:"",sticks:"",segments:"",lymphocytes:"",monocytes:"",normoblasts:"",tng:""}};break;case"urineClinical":this.currentUrineClinicalResult={urineDate:"",urineNumber:"",urineGeneral:{color:{colorType:"",colorName:""},reaction:{reactionType:"",reactionName:""},density:"",transparency:"",protein:"",glucose:{glucoseType:"",glucoseName:""},acetone:{acetoneType:"",acetoneName:""},bile:!1},urineElements:{flatEpithelium:"",tractEpithelium:"",renalEpithelium:"",leucocytes:"",erythrocytes:"",cylinders:{hyaline:"",granular:"",waxy:"",epithelial:""},salts:{saltsId:"",saltsName:""},slime:!1}}}this.addAnalyzeDialog={show:!1,analyzeType:""}},yesResultDialog:function(){var t=this,e={},a=this.listAnalyzesDialog.analyzeType;switch(a){case"blood":e=this.currentBloodResult;break;case"urineClinical":e=this.currentUrineClinicalResult}switch(this.addAnalyzeDialog.edit){case!0:l.a.put(U+"/api/v1/patient/"+this.currentEditPatient._id+"/analyze/"+e._id,{analyzeType:a,analyzeResult:e},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){if(e.data.success){var r={};switch(a){case"blood":r=e.data.patient.bloodResults.find(function(e){return t.dateFromIso(e.bloodDate)===t.currentBloodResult.bloodDate}),t.currentEditPatient.bloodResults.push(r),t.currentBloodResult={bloodDate:"",bloodNumber:"",bloodResult:{hemoglobin:"",leucocytes:"",esr:"",basophils:"",eosinophils:"",blasts:"",myelocytes:"",young:"",sticks:"",segments:"",lymphocytes:"",monocytes:"",normoblasts:"",tng:""}};break;case"urineClinical":r=e.data.patient.urineClinicalResults.find(function(e){return t.dateFromIso(e.urineDate)===t.currentUrineClinicalResult.urineDate}),t.currentEditPatient.urineClinicalResults.push(r),t.currentUrineClinicalResult={urineDate:"",urineNumber:"",urineGeneral:{color:{colorType:"",colorName:""},reaction:{reactionType:"",reactionName:""},density:"",transparency:"",protein:"",glucose:{glucoseType:"",glucoseName:""},acetone:{acetoneType:"",acetoneName:""},bile:!1},urineElements:{flatEpithelium:"",tractEpithelium:"",renalEpithelium:"",leucocytes:"",erythrocytes:"",cylinders:{hyaline:"",granular:"",waxy:"",epithelial:""},salts:{saltsId:"",saltsName:""},slime:!1}}}t.addAnalyzeDialog={show:!1,analyzeType:""},t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3}else t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3;t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)});break;case!1:l.a.post(U+"/api/v1/patient/"+this.currentEditPatient._id+"/analyze/",{analyzeType:a,analyzeResult:e},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){if(e.data.success){var r={};switch(a){case"blood":r=e.data.patient.bloodResults.find(function(e){return t.dateFromIso(e.bloodDate)===t.currentBloodResult.bloodDate}),t.currentEditPatient.bloodResults.push(r),t.currentBloodResult={bloodDate:"",bloodNumber:"",bloodResult:{hemoglobin:"",leucocytes:"",esr:"",basophils:"",eosinophils:"",blasts:"",myelocytes:"",young:"",sticks:"",segments:"",lymphocytes:"",monocytes:"",normoblasts:"",tng:""}};break;case"urineClinical":r=e.data.patient.urineClinicalResults.find(function(e){return t.dateFromIso(e.urineDate)===t.currentUrineClinicalResult.urineDate}),t.currentEditPatient.urineClinicalResults.push(r),t.currentUrineClinicalResult={urineDate:"",urineNumber:"",urineGeneral:{color:{colorType:"",colorName:""},reaction:{reactionType:"",reactionName:""},density:"",transparency:"",protein:"",glucose:{glucoseType:"",glucoseName:""},acetone:{acetoneType:"",acetoneName:""},bile:!1},urineElements:{flatEpithelium:"",tractEpithelium:"",renalEpithelium:"",leucocytes:"",erythrocytes:"",cylinders:{hyaline:"",granular:"",waxy:"",epithelial:""},salts:{saltsId:"",saltsName:""},slime:!1}}}t.addAnalyzeDialog={show:!1,analyzeType:""},t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3}else t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3;t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})}},openRemoveDialog:function(t){this.currentRemoveItem=t,this.removeDialog={show:!0}},noRemoveDialog:function(){this.currentRemoveItem={},this.removeDialog={show:!1}},yesRemoveDialog:function(){var t=this,e=this.listAnalyzesDialog.analyzeType;l.a.delete(U+"/api/v1/patient/"+this.currentEditPatient._id+"/analyze/"+this.currentRemoveItem._id,{headers:{Authorization:u.getAuthenticationHeader(this)},data:{analyzeType:e}}).then(function(a){a.data.success?("blood"===e?t.currentEditPatient.bloodResults=t.currentEditPatient.bloodResults.filter(function(e){return e._id!==t.currentRemoveItem._id}):"urineClinical"===e&&(t.currentEditPatient.urineClinicalResults=t.currentEditPatient.urineClinicalResults.filter(function(e){return e._id!==t.currentRemoveItem._id})),t.removeDialog.show=!1,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=a.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)})},getPatients:function(){var t=this,e={};e.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,e.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,e.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(U+"/api/v1/patient/"+e.lastName+"/"+e.firstName+"/"+e.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.show=!1,t.patients=e.data.patients,t.patients.forEach(function(e){e.dateBirth=t.dateFromIso(e.dateBirth)})):(t.patients=[],t.snackBar.show=!0,t.snackBar.color="yellow accent-3 black--text",t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})},getCurrentUser:function(){var t=this;l.a.get(U+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;t.currentUser=a}).catch(function(e){t.errorHandler(e)})},dateFromIso:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,s=e.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(t){var e=t.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===e&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=t.response.data.message}}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:t.subSystem.primaryColor,subtitle:"Лаборатория",currentUser:t.currentUser}}),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[t._v("Поиск пациентов")]),t._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.lastName,callback:function(e){t.$set(t.patientQuery,"lastName",e)},expression:"patientQuery.lastName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.firstName,callback:function(e){t.$set(t.patientQuery,"firstName",e)},expression:"patientQuery.firstName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.middleName,callback:function(e){t.$set(t.patientQuery,"middleName",e)},expression:"patientQuery.middleName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){return t.getPatients(e)}}},[t._v("Найти")])],1)],1),t._v(" "),t.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:t.patients,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.fio))]),t._v(" "),a("td",[t._v(t._s(e.item.dateBirth))]),t._v(" "),a("td",[t._v(t._s(e.item.sex?"Муж":"Жен"))]),t._v(" "),a("td",{attrs:{width:"156px"}},[a("v-tooltip",{attrs:{top:"",color:t.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openBloodResultsListDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("colorize")])],1),t._v(" "),a("span",[t._v("Список анализов крови")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:t.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){t.openUrineResultsListDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("colorize")])],1),t._v(" "),a("span",[t._v("Список анализов мочи")])],1)],1)])]}}])}):t._e()],1)],1)],1)],1)],1),t._v(" "),a("app-footer",{attrs:{subsystem:t.subSystem.primaryColor,currentUser:t.currentUser}}),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackBar.timeout,right:"right",color:t.snackBar.color},model:{value:t.snackBar.show,callback:function(e){t.$set(t.snackBar,"show",e)},expression:"snackBar.show"}},[t._v("\n    "+t._s(t.snackBar.message)+"\n  ")]),t._v(" "),a("v-dialog",{attrs:{persistent:"",lazy:"","max-width":"800px"},model:{value:t.listAnalyzesDialog.show,callback:function(e){t.$set(t.listAnalyzesDialog,"show",e)},expression:"listAnalyzesDialog.show"}},["blood"===t.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Анализы крови пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])]),t._v(" "),a("v-spacer"),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){t.openResultDialog({edit:!1})}}},[t._v("\n              Добавить анализ крови\n            ")])],1)],1)],1),t._v(" "),a("v-card-text",[t.currentEditPatient.bloodResults.length>0?a("v-container",{attrs:{"grid-list-md":""}},[a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{headers:[{text:"Дата анализа",value:"bloodDate"},{text:"Гемоглобин",value:"bloodResult.hemoglobin"},{text:"Лейкоциты",value:"bloodResult.leucocytes"},{text:"СОЭ",value:"bloodResult.esr"},{text:"Действия",value:""}],items:t.currentEditPatient.bloodResults,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(t._f("formatDate")(e.item.bloodDate)))]),t._v(" "),a("td",[t._v(t._s(e.item.bloodResult.hemoglobin))]),t._v(" "),a("td",[t._v(t._s(e.item.bloodResult.leucocytes))]),t._v(" "),a("td",[t._v(t._s(e.item.bloodResult.esr))]),t._v(" "),a("td",{attrs:{width:"172px"}},[a("v-tooltip",{attrs:{top:"",color:t.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openResultDialog({edit:!0,item:e.item})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("colorize")])],1),t._v(" "),a("span",[t._v("Информация об анализе")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:t.subSystem.deleteColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.deleteColor,icon:""},nativeOn:{click:function(a){t.openRemoveDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1),t._v(" "),a("span",[t._v("Удалить анализ")])],1)],1)])]}}])})],1):t._e()],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.noBloodResultsListDialog(e)}}},[t._v("Закрыть")])],1)],1):t._e(),t._v(" "),"urineClinical"===t.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Анализы мочи пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))])]),t._v(" "),a("v-spacer"),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){t.openResultDialog({edit:!1})}}},[t._v("\n              Добавить анализ мочи\n            ")])],1)],1)],1),t._v(" "),a("v-card-text",[t.currentEditPatient.urineClinicalResults.length>0?a("v-container",{attrs:{"grid-list-md":""}},[a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{headers:[{text:"Дата анализа",value:"urineDate"},{text:"Цвет",value:"urineGeneral.color.colorName"},{text:"Реакция",value:"urineGeneral.reaction.reactionName"},{text:"Плотность",value:"urineGeneral.density"},{text:"Действия",value:""}],items:t.currentEditPatient.urineClinicalResults,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(t._f("formatDate")(e.item.urineDate)))]),t._v(" "),a("td",[t._v(t._s(e.item.urineGeneral.color.colorName))]),t._v(" "),a("td",[t._v(t._s(e.item.urineGeneral.reaction.reactionName))]),t._v(" "),a("td",[t._v(t._s(e.item.urineGeneral.density))]),t._v(" "),a("td",{attrs:{width:"172px"}},[a("v-tooltip",{attrs:{top:"",color:t.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){t.openResultDialog({edit:!0,item:e.item})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("colorize")])],1),t._v(" "),a("span",[t._v("Информация об анализе")])],1),t._v(" "),a("v-tooltip",{attrs:{top:"",color:t.subSystem.deleteColor}},[a("v-btn",{attrs:{slot:"activator",color:t.subSystem.deleteColor,icon:""},nativeOn:{click:function(a){t.openRemoveDialog(e.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1),t._v(" "),a("span",[t._v("Удалить анализ")])],1)],1)])]}}])})],1):t._e()],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.secondaryColor,flat:""},nativeOn:{click:function(e){return t.noUrineResultsListDialog(e)}}},[t._v("Закрыть")])],1)],1):t._e()],1),t._v(" "),a("v-dialog",{attrs:{persistent:"",lazy:"","max-width":"800px"},model:{value:t.addAnalyzeDialog.show,callback:function(e){t.$set(t.addAnalyzeDialog,"show",e)},expression:"addAnalyzeDialog.show"}},["blood"===t.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:""}},[a("span",{staticClass:"headline"},[t._v("\n          Добавление анализа крови для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))]),t._v("?\n        ")])])],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[t.addAnalyzeDialog.edit?t._e():a("v-text-field",{attrs:{label:"Дата анализа",color:t.subSystem.primaryColor,mask:"##.##.####","return-masked-value":""},model:{value:t.currentBloodResult.bloodDate,callback:function(e){t.$set(t.currentBloodResult,"bloodDate",e)},expression:"currentBloodResult.bloodDate"}}),t._v(" "),t.addAnalyzeDialog.edit?a("v-text-field",{attrs:{label:"Дата анализа",color:t.subSystem.primaryColor,value:t.dateFromIso(t.currentBloodResult.bloodDate),readonly:"",disabled:""}}):t._e()],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Номер",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodNumber,callback:function(e){t.$set(t.currentBloodResult,"bloodNumber",e)},expression:"currentBloodResult.bloodNumber"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-spacer")],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[t._v("Общий клинический анализ крови")])])],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Гемоглобин",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.hemoglobin,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"hemoglobin",e)},expression:"currentBloodResult.bloodResult.hemoglobin"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Лейкоциты",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.leucocytes,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"leucocytes",e)},expression:"currentBloodResult.bloodResult.leucocytes"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"СОЭ",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.esr,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"esr",e)},expression:"currentBloodResult.bloodResult.esr"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Базофилы",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.basophils,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"basophils",e)},expression:"currentBloodResult.bloodResult.basophils"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Эозинофилы",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.eosinophils,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"eosinophils",e)},expression:"currentBloodResult.bloodResult.eosinophils"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Бласты",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.blasts,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"blasts",e)},expression:"currentBloodResult.bloodResult.blasts"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Миелоциты",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.myelocytes,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"myelocytes",e)},expression:"currentBloodResult.bloodResult.myelocytes"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Юные",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.young,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"young",e)},expression:"currentBloodResult.bloodResult.young"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Палочки",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.sticks,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"sticks",e)},expression:"currentBloodResult.bloodResult.sticks"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Сегменты",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.segments,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"segments",e)},expression:"currentBloodResult.bloodResult.segments"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Лимфоциты",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.lymphocytes,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"lymphocytes",e)},expression:"currentBloodResult.bloodResult.lymphocytes"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Моноциты",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.monocytes,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"monocytes",e)},expression:"currentBloodResult.bloodResult.monocytes"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Нормобласты",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.normoblasts,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"normoblasts",e)},expression:"currentBloodResult.bloodResult.normoblasts"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Токсич. зерн. нейтроф.",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.tng,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"tng",e)},expression:"currentBloodResult.bloodResult.tng"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[t._v("Биохимический анализ крови")])])],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Сахар",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.sugar,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"sugar",e)},expression:"currentBloodResult.bloodResult.sugar"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Холистерин",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.cholesterol,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"cholesterol",e)},expression:"currentBloodResult.bloodResult.cholesterol"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Протромбин",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.prothrombin,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"prothrombin",e)},expression:"currentBloodResult.bloodResult.prothrombin"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"МНО",color:t.subSystem.primaryColor},model:{value:t.currentBloodResult.bloodResult.inr,callback:function(e){t.$set(t.currentBloodResult.bloodResult,"inr",e)},expression:"currentBloodResult.bloodResult.inr"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.noResultDialog(e)}}},[t._v("Закрыть\n        ")]),t._v(" "),t.addAnalyzeDialog.edit?t._e():a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesResultDialog(e)}}},[t._v("\n          Добавить\n        ")]),t._v(" "),t.addAnalyzeDialog.edit?a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesResultDialog(e)}}},[t._v("\n          Изменить\n        ")]):t._e()],1)],1):t._e(),t._v(" "),"urineClinical"===t.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:""}},[a("span",{staticClass:"headline"},[t._v("\n          Добавление анализа мочи для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[t._v(t._s(t.currentEditPatient.fio))]),t._v("?\n        ")])])],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[t.addAnalyzeDialog.edit?t._e():a("v-text-field",{attrs:{label:"Дата анализа",color:t.subSystem.primaryColor,mask:"##.##.####","return-masked-value":""},model:{value:t.currentUrineClinicalResult.urineDate,callback:function(e){t.$set(t.currentUrineClinicalResult,"urineDate",e)},expression:"currentUrineClinicalResult.urineDate"}}),t._v(" "),t.addAnalyzeDialog.edit?a("v-text-field",{attrs:{label:"Дата анализа",color:t.subSystem.primaryColor,value:t.dateFromIso(t.currentUrineClinicalResult.urineDate),readonly:"",disabled:""}}):t._e()],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Номер",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineNumber,callback:function(e){t.$set(t.currentUrineClinicalResult,"urineNumber",e)},expression:"currentUrineClinicalResult.urineNumber"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-spacer")],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h2",[t._v("Общий анализ мочи")])])],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:t.urineColors,label:"Цвет",color:t.subSystem.secondaryColor,autocomplete:""},model:{value:t.currentUrineClinicalResult.urineGeneral.color,callback:function(e){t.$set(t.currentUrineClinicalResult.urineGeneral,"color",e)},expression:"currentUrineClinicalResult.urineGeneral.color"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:t.urineReactions,label:"Реакция",color:t.subSystem.secondaryColor,autocomplete:""},model:{value:t.currentUrineClinicalResult.urineGeneral.reaction,callback:function(e){t.$set(t.currentUrineClinicalResult.urineGeneral,"reaction",e)},expression:"currentUrineClinicalResult.urineGeneral.reaction"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Плотность",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineGeneral.density,callback:function(e){t.$set(t.currentUrineClinicalResult.urineGeneral,"density",e)},expression:"currentUrineClinicalResult.urineGeneral.density"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:t.urineTransparency,label:"Прозрачность",color:t.subSystem.secondaryColor,autocomplete:""},model:{value:t.currentUrineClinicalResult.urineGeneral.transparency,callback:function(e){t.$set(t.currentUrineClinicalResult.urineGeneral,"transparency",e)},expression:"currentUrineClinicalResult.urineGeneral.transparency"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Белок",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineGeneral.protein,callback:function(e){t.$set(t.currentUrineClinicalResult.urineGeneral,"protein",e)},expression:"currentUrineClinicalResult.urineGeneral.protein"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:t.urineGlucose,label:"Глюкоза",color:t.subSystem.secondaryColor,autocomplete:""},model:{value:t.currentUrineClinicalResult.urineGeneral.glucose,callback:function(e){t.$set(t.currentUrineClinicalResult.urineGeneral,"glucose",e)},expression:"currentUrineClinicalResult.urineGeneral.glucose"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:t.urineAcetone,label:"Ацетон",color:t.subSystem.secondaryColor,autocomplete:""},model:{value:t.currentUrineClinicalResult.urineGeneral.acetone,callback:function(e){t.$set(t.currentUrineClinicalResult.urineGeneral,"acetone",e)},expression:"currentUrineClinicalResult.urineGeneral.acetone"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:t.urineBile,label:"Желч. пигмент",color:t.subSystem.secondaryColor,autocomplete:""},model:{value:t.currentUrineClinicalResult.urineGeneral.bile,callback:function(e){t.$set(t.currentUrineClinicalResult.urineGeneral,"bile",e)},expression:"currentUrineClinicalResult.urineGeneral.bile"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[t._v("Эпителий:")])])],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Плоский",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineElements.flatEpithelium,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements,"flatEpithelium",e)},expression:"currentUrineClinicalResult.urineElements.flatEpithelium"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Мочевыводящих путей",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineElements.tractEpithelium,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements,"tractEpithelium",e)},expression:"currentUrineClinicalResult.urineElements.tractEpithelium"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Почечный",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineElements.renalEpithelium,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements,"renalEpithelium",e)},expression:"currentUrineClinicalResult.urineElements.renalEpithelium"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Лейкоциты",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineElements.leucocytes,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements,"leucocytes",e)},expression:"currentUrineClinicalResult.urineElements.leucocytes"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Эритроциты",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineElements.erythrocytes,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements,"erythrocytes",e)},expression:"currentUrineClinicalResult.urineElements.erythrocytes"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[t._v("Цилиндры:")])])],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Гиалиновые",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineElements.cylinders.hyaline,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements.cylinders,"hyaline",e)},expression:"currentUrineClinicalResult.urineElements.cylinders.hyaline"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Зернистые",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineElements.cylinders.granular,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements.cylinders,"granular",e)},expression:"currentUrineClinicalResult.urineElements.cylinders.granular"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Восковидные",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineElements.cylinders.waxy,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements.cylinders,"waxy",e)},expression:"currentUrineClinicalResult.urineElements.cylinders.waxy"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Эпителиальные",color:t.subSystem.secondaryColor},model:{value:t.currentUrineClinicalResult.urineElements.cylinders.epithelial,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements.cylinders,"epithelial",e)},expression:"currentUrineClinicalResult.urineElements.cylinders.epithelial"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.urineSalts,label:"Соли",color:t.subSystem.secondaryColor,autocomplete:""},model:{value:t.currentUrineClinicalResult.urineElements.salts,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements,"salts",e)},expression:"currentUrineClinicalResult.urineElements.salts"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:t.urineSlime,label:"Слизь",color:t.subSystem.secondaryColor,autocomplete:""},model:{value:t.currentUrineClinicalResult.urineElements.slime,callback:function(e){t.$set(t.currentUrineClinicalResult.urineElements,"slime",e)},expression:"currentUrineClinicalResult.urineElements.slime"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.secondaryColor,flat:""},nativeOn:{click:function(e){return t.noResultDialog(e)}}},[t._v("Закрыть\n        ")]),t._v(" "),t.addAnalyzeDialog.edit?t._e():a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.secondaryColor},nativeOn:{click:function(e){return t.yesResultDialog(e)}}},[t._v("\n          Добавить\n        ")]),t._v(" "),t.addAnalyzeDialog.edit?a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.secondaryColor},nativeOn:{click:function(e){return t.yesResultDialog(e)}}},[t._v("\n          Изменить\n        ")]):t._e()],1)],1):t._e()],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.removeDialog.show,callback:function(e){t.$set(t.removeDialog,"show",e)},expression:"removeDialog.show"}},[a("v-card",["blood"===t.listAnalyzesDialog.analyzeType?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Удалить анализ крови от "+t._s(t._f("formatDate")(t.currentRemoveItem.bloodDate))+" для"),a("br"),t._v(" "),a("span",{staticClass:"red--text text--darken-2"},[t._v("«"+t._s(t.currentEditPatient.fio)+"»")]),t._v("?\n        ")])]):t._e(),t._v(" "),"urineClinical"===t.listAnalyzesDialog.analyzeType?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Удалить анализ мочи от "+t._s(t._f("formatDate")(t.currentRemoveItem.urineDate))+" для"),a("br"),t._v(" "),a("span",{staticClass:"red--text text--darken-2"},[t._v("«"+t._s(t.currentEditPatient.fio)+"»")]),t._v("?\n        ")])]):t._e(),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.deleteColor,flat:""},nativeOn:{click:function(e){return t.noRemoveDialog(e)}}},[t._v("Нет")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.deleteColor},nativeOn:{click:function(e){return t.yesRemoveDialog(e)}}},[t._v("Да")])],1)],1)],1)],1)},staticRenderFns:[]};var O=a("VU/8")($,j,!1,function(t){a("/WRZ")},null,null).exports,H="http://"+window.location.hostname+":3001",M={data:function(){return{showAddDialog:!1,showListDialog:!1,patientQuery:{},showDateVaccination:!1,patients:[],currentUser:{},currentPatient:{},currentVaccine:{vaccine:{vaccineName:"",drugName:"",drugSeries:""},vaccineType:"",dateVaccination:"",dateRevaccination:"",invasionMethod:"",dose:"",controlNumber:"",dateExpiration:"",lpuCode:"",riskGroup:"",payment:"",updatedBy:""},currentVocabulary:{vocabularyVaccine:"",vocabularyDrugs:[],vocabularySeries:[]},vaccineVocabulary:[{vaccineId:"1",vaccineName:"Дифтерия",drugNames:[{drugName:"1-1",drugSeries:[{seriesName:"1-1-1",seriesExpiration:"01.01.2019"},{seriesName:"1-1-2",seriesExpiration:"01.01.2019"},{seriesName:"1-1-3",seriesExpiration:"01.01.2019"},{seriesName:"1-1-4",seriesExpiration:"01.01.2019"}]},{drugName:"1-2",drugSeries:[{seriesName:"1-2-1",seriesExpiration:"01.01.2019"},{seriesName:"1-2-2",seriesExpiration:"01.01.2019"},{seriesName:"1-2-3",seriesExpiration:"01.01.2019"},{seriesName:"1-2-4",seriesExpiration:"01.01.2019"}]},{drugName:"1-3",drugSeries:[{seriesName:"1-3-1",seriesExpiration:"01.01.2019"},{seriesName:"1-3-2",seriesExpiration:"01.01.2019"},{seriesName:"1-3-3",seriesExpiration:"01.01.2019"},{seriesName:"1-3-4",seriesExpiration:"01.01.2019"}]}]},{vaccineName:"2 - клещевой энцефалит",drugNames:[{drugName:"2-1",drugSeries:[{seriesName:"2-1-1",seriesExpiration:"01.01.2019"},{seriesName:"2-1-2",seriesExpiration:"01.01.2019"},{seriesName:"2-1-3",seriesExpiration:"01.01.2019"},{seriesName:"2-1-4",seriesExpiration:"01.01.2019"}]},{drugName:"2-2",drugSeries:[{seriesName:"2-2-1",seriesExpiration:"01.01.2019"},{seriesName:"2-2-2",seriesExpiration:"01.01.2019"},{seriesName:"2-2-3",seriesExpiration:"01.01.2019"},{seriesName:"2-2-4",seriesExpiration:"01.01.2019"}]},{drugName:"2-3",drugSeries:[{seriesName:"2-3-1",seriesExpiration:"01.01.2019"},{seriesName:"2-3-2",seriesExpiration:"01.01.2019"},{seriesName:"2-3-3",seriesExpiration:"01.01.2019"},{seriesName:"2-3-4",seriesExpiration:"01.01.2019"}]}]}],vaccineTypeVocabulary:["1 - V1","2 - V2","3 - V3","4 - IR","5 - RV"],methodVocabulary:["1 - подкожно","2 - внутримышечно","3 - интроназально","4 - накожно"],lpuVocabulary:["ЛПУ 1","ЛПУ 2","ЛПУ 3","ЛПУ 4","ЛПУ 5","ЛПУ 6","ЛПУ 7","ЛПУ 8"],riskGroupVocabulary:["1 - Рабочие ЧМК","2 - УКХ","3 - ОДУ","4 - ЧП","5 - Общепит"],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"green darken-4",secondaryColor:"brown darken-2"}}},mounted:function(){var t=this;l.a.get(H+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;t.currentUser=a}).catch(function(e){t.errorHandler(e)})},methods:{getPatients:function(){var t=this,e={};e.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,e.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,e.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(H+"/api/v1/patient/"+e.lastName+"/"+e.firstName+"/"+e.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.snackBar.show=!1,t.patients=e.data.patients,t.patients.forEach(function(e){e.dateBirth=t.dateFromIso(e.dateBirth)})):(t.patients=[],t.snackBar.show=!0,t.snackBar.color="yellow accent-3 black--text",t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})},addVaccineDialog:function(t){this.showAddDialog=!0,this.currentPatient=t,this.currentVaccine={vaccine:{vaccineName:"",drugName:"",drugSeries:""},vaccineType:"",dateVaccination:"",dateRevaccination:"",invasionMethod:"",dose:"",controlNumber:"",dateExpiration:"",lpuCode:"",riskGroup:"",payment:"",updatedBy:""}},updateVocabularyDrug:function(){var t=this;""!==this.currentVaccine.vaccine.vaccineName&&(this.currentVocabulary.vocabularyDrugs=this.vaccineVocabulary.filter(function(e){return e.vaccineName===t.currentVaccine.vaccine.vaccineName})[0].drugNames.map(function(t){return t.drugName}))},updateVocabularySeries:function(){var t=this;""!==this.currentVaccine.vaccine.drugName&&(this.currentVocabulary.vocabularySeries=this.vaccineVocabulary.filter(function(e){return e.vaccineName===t.currentVaccine.vaccine.vaccineName})[0].drugNames.filter(function(e){return e.drugName===t.currentVaccine.vaccine.drugName})[0].drugSeries.map(function(t){return t.seriesName}))},updateDateExpiration:function(){var t=this;""!==this.currentVaccine.vaccine.drugSeries&&(this.currentVaccine.dateExpiration=this.vaccineVocabulary.filter(function(e){return e.vaccineName===t.currentVaccine.vaccine.vaccineName})[0].drugNames.filter(function(e){return e.drugName===t.currentVaccine.vaccine.drugName})[0].drugSeries.filter(function(e){return e.seriesName===t.currentVaccine.vaccine.drugSeries})[0].seriesExpiration)},closeAddDialog:function(){this.showAddDialog=!1,this.currentPatient={},this.currentVaccine={vaccine:{vaccineName:"",drugName:"",drugSeries:""},vaccineType:"",dateVaccination:"",dateRevaccination:"",invasionMethod:"",dose:"",controlNumber:"",dateExpiration:"",lpuCode:"",riskGroup:"",payment:"",updatedBy:""}},saveAddDialog:function(){this.currentVaccine.updatedBy=this.currentUser._id,this.currentVaccine.dateVaccination=this.toDate(this.currentVaccine.dateVaccination),this.currentVaccine.dateRevaccination=this.toDate(this.currentVaccine.dateRevaccination),this.currentVaccine.dateExpiration=this.toDate(this.currentVaccine.dateExpiration),this.currentPatient.newVaccine=this.currentVaccine,this.sendNewVaccine(),this.showAddDialog=!1},sendNewVaccine:function(){var t=this;l.a.post(H+"/api/v1/vaccine",this.currentPatient,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.showSnackbar=!1,t.currentVaccine={vaccine:{vaccineName:"",drugName:"",drugSeries:""},vaccineType:"",dateVaccination:"",dateRevaccination:"",invasionMethod:"",dose:"",controlNumber:"",dateExpiration:"",lpuCode:"",riskGroup:"",payment:"",updatedBy:""}):(t.showSnackbar=!0,t.snackColor="red lighten-1",t.snackMessage=e.data.message)}).catch(function(e){t.errorHandler(e)})},showVaccinesDialog:function(t){var e=this;this.currentPatient=t,l.a.get(H+"/api/v1/vaccines/"+t._id,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.showListDialog=!0,e.currentPatient.vaccines=t.data.vaccines):(e.showSnackbar=!0,e.snackColor="yellow accent-3 black--text",e.snackMessage=t.data.message)}).catch(function(t){e.errorHandler(t)})},closeVaccinesDialog:function(){this.showListDialog=!1},errorHandler:function(t){var e=t.response.status;this.showSnackbar=!0,this.snackColor="red lighten-1",401===e&&(this.snackMessage="Вы не авторизованы."),this.snackMessage=t.response.data.message},dateFromIso:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,s=e.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},toDate:function(t){var e=t.split(".");return new Date(e[2],e[1]-1,e[0])}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:t.subSystem.primaryColor,subtitle:"Прививки",currentUser:t.currentUser}}),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[t._v("Поиск пациентов")]),t._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.lastName,callback:function(e){t.$set(t.patientQuery,"lastName",e)},expression:"patientQuery.lastName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.firstName,callback:function(e){t.$set(t.patientQuery,"firstName",e)},expression:"patientQuery.firstName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:t.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getPatients(e):null}},model:{value:t.patientQuery.middleName,callback:function(e){t.$set(t.patientQuery,"middleName",e)},expression:"patientQuery.middleName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){return t.getPatients(e)}}},[t._v("Найти")])],1)],1),t._v(" "),t.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:t.patients,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.fio))]),t._v(" "),a("td",[t._v(t._s(e.item.dateBirth))]),t._v(" "),a("td",[t._v(t._s(e.item.sex?"Муж":"Жен"))]),t._v(" "),a("td",{attrs:{width:"211px"}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.addVaccineDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("note_add")])],1),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){t.showVaccinesDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("local_drink")])],1),t._v(" "),e.item.hasActiveMedos?a("v-btn",{attrs:{color:"amber darken-4",icon:""},nativeOn:{click:function(e){t.console.log("medos")}}},[a("v-icon",{attrs:{color:"white"}},[t._v("account_box")])],1):t._e()],1)])]}}])}):t._e()],1)],1)],1)],1)],1),t._v(" "),a("app-footer",{attrs:{subsystem:t.subSystem.primaryColor,currentUser:t.currentUser}}),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackBar.timeout,right:"right",color:t.snackBar.color},model:{value:t.snackBar.show,callback:function(e){t.$set(t.snackBar,"show",e)},expression:"snackBar.show"}},[t._v("\n    "+t._s(t.snackBar.message)+"\n  ")]),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.showAddDialog,callback:function(e){t.showAddDialog=e},expression:"showAddDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.currentPatient.fio))])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-select",{attrs:{items:t.vaccineVocabulary.map(function(t){return t.vaccineName}),label:"Прививка",autocomplete:"",color:t.subSystem.primaryColor},on:{blur:t.updateVocabularyDrug},model:{value:t.currentVaccine.vaccine.vaccineName,callback:function(e){t.$set(t.currentVaccine.vaccine,"vaccineName",e)},expression:"currentVaccine.vaccine.vaccineName"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-select",{attrs:{items:t.currentVocabulary.vocabularyDrugs,label:"Препарат",autocomplete:"",color:t.subSystem.primaryColor},on:{blur:t.updateVocabularySeries},model:{value:t.currentVaccine.vaccine.drugName,callback:function(e){t.$set(t.currentVaccine.vaccine,"drugName",e)},expression:"currentVaccine.vaccine.drugName"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-select",{attrs:{items:t.currentVocabulary.vocabularySeries,label:"Серия",autocomplete:"",color:t.subSystem.primaryColor},on:{blur:t.updateDateExpiration},model:{value:t.currentVaccine.vaccine.drugSeries,callback:function(e){t.$set(t.currentVaccine.vaccine,"drugSeries",e)},expression:"currentVaccine.vaccine.drugSeries"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Срок",color:t.subSystem.primaryColor,disabled:""},model:{value:t.currentVaccine.dateExpiration,callback:function(e){t.$set(t.currentVaccine,"dateExpiration",e)},expression:"currentVaccine.dateExpiration"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{items:t.methodVocabulary,label:"Метод введения",autocomplete:"",color:t.subSystem.primaryColor},model:{value:t.currentVaccine.invasionMethod,callback:function(e){t.$set(t.currentVaccine,"invasionMethod",e)},expression:"currentVaccine.invasionMethod"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md2:""}},[a("v-text-field",{attrs:{mask:"#.##","return-masked-value":"",label:"Доза",color:t.subSystem.primaryColor},model:{value:t.currentVaccine.dose,callback:function(e){t.$set(t.currentVaccine,"dose",e)},expression:"currentVaccine.dose"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-select",{attrs:{items:t.vaccineTypeVocabulary,label:"Тип вакцинации",autocomplete:"",color:t.subSystem.primaryColor},model:{value:t.currentVaccine.vaccineType,callback:function(e){t.$set(t.currentVaccine,"vaccineType",e)},expression:"currentVaccine.vaccineType"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-select",{attrs:{items:t.riskGroupVocabulary,label:"Группа риска",autocomplete:"",color:t.subSystem.primaryColor},model:{value:t.currentVaccine.riskGroup,callback:function(e){t.$set(t.currentVaccine,"riskGroup",e)},expression:"currentVaccine.riskGroup"}})],1)],1),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{mask:"##.##.####","return-masked-value":"",label:"Дата вакцинации",color:t.subSystem.primaryColor},model:{value:t.currentVaccine.dateVaccination,callback:function(e){t.$set(t.currentVaccine,"dateVaccination",e)},expression:"currentVaccine.dateVaccination"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{mask:"##.##.####","return-masked-value":"",label:"Дата ревакцинации",color:t.subSystem.primaryColor},model:{value:t.currentVaccine.dateRevaccination,callback:function(e){t.$set(t.currentVaccine,"dateRevaccination",e)},expression:"currentVaccine.dateRevaccination"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-select",{attrs:{items:["1 - платно","2 - бесплатно"],label:"Оплата",autocomplete:"",color:t.subSystem.primaryColor},model:{value:t.currentVaccine.payment,callback:function(e){t.$set(t.currentVaccine,"payment",e)},expression:"currentVaccine.payment"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{label:"Пользователь",color:t.subSystem.primaryColor,disabled:""},model:{value:t.currentUser.fio,callback:function(e){t.$set(t.currentUser,"fio",e)},expression:"currentUser.fio"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.secondaryColor,flat:""},nativeOn:{click:function(e){return t.closeAddDialog(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.saveAddDialog(e)}}},[t._v("Сохранить")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.showListDialog,callback:function(e){t.showListDialog=e},expression:"showListDialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("New Item")]),t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.currentPatient.fio))])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{headers:[{text:"Прививка",value:"vaccine.vaccineName"},{text:"Дата вакцинации",value:"dateVaccination"},{text:"Дата ревакцинации",value:"dateRevaccination"}],items:t.currentPatient.vaccines,"rows-per-page-text":"Строк на странице:"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.vaccine.vaccineName))]),t._v(" "),a("td",[t._v(t._s(t._f("formatDate")(e.item.dateVaccination)))]),t._v(" "),a("td",[t._v(t._s(t._f("formatDate")(e.item.dateRevaccination)))]),t._v(" "),a("td",{attrs:{width:"156px"}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(e){t.document.console.log("lol")}}},[a("v-icon",{attrs:{color:"white"}},[t._v("edit")])],1),t._v(" "),a("v-btn",{attrs:{color:"red lighten-1",icon:""},nativeOn:{click:function(e){t.document.console.log("lol")}}},[a("v-icon",{attrs:{color:"white"}},[t._v("clear")])],1)],1)])]}},{key:"pageText",fn:function(e){var a=e.pageStart,r=e.pageStop;return[t._v("\n              с "+t._s(a)+" по "+t._s(r)+"\n            ")]}}])})],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.closeVaccinesDialog(e)}}},[t._v("Закрыть")])],1)],1)],1)],1)},staticRenderFns:[]};var T=a("VU/8")(M,z,!1,function(t){a("zbvE")},null,null).exports,L="http://"+window.location.hostname+":3001",V={data:function(){return{showUsers:!1,drawer:!1,users:[],currentUser:{},snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"teal darken-4",secondaryColor:"lime darken-4",doctorName:""}}},mounted:function(){this.getCurrentUser()},methods:{getCurrentUser:function(){var t=this;l.a.get(L+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;t.currentUser=a}).catch(function(e){t.errorHandler(e)})},getAllUsers:function(){var t=this;l.a.get(L+"/api/v1/users",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;t.users=a,t.showUsers=!0}).catch(function(e){t.errorHandler(e)})},errorHandler:function(t){var e=t.response.status;this.showSnackbar=!0,this.snackColor="red lighten-1",401===e&&(this.snackMessage="Вы не авторизованы."),this.snackMessage=t.response.data.message}}},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:t.subSystem.primaryColor,subtitle:"Редактор пользователей",currentUser:t.currentUser}}),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-btn",{staticClass:"white--text",attrs:{block:"",color:t.subSystem.secondaryColor},nativeOn:{click:function(e){return t.getAllUsers(e)}}},[t._v("Найти пользователей\n              ")])],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-btn",{staticClass:"white--text",attrs:{block:"",color:t.subSystem.secondaryColor},nativeOn:{click:function(t){return(!0)(t)}}},[t._v("Создать пользователя\n              ")])],1)],1),t._v(" "),t.showUsers?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{headers:[{text:"Имя пользователя",value:"username"},{text:"ФИО",value:"fio"},{text:"Права",value:"roles"}],items:t.users,"hide-actions":""},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",t._l(e.headers,function(e){return a("th",{key:e._id},[t._v("\n                  "+t._s(e.text)+"\n                ")])}))]}},{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.username))]),t._v(" "),a("td",[t._v(t._s(e.item.fio))]),t._v(" "),a("td",{attrs:{width:"200px"}},[e.item.roles.superuser?a("v-icon",{attrs:{color:"purple darken-4"}},[t._v("face\n                  ")]):t._e(),t._v(" "),e.item.roles.medos.admin?a("v-icon",{attrs:{color:"green darken-4"}},[t._v("local_hospital\n                  ")]):t._e(),t._v(" "),e.item.roles.radiography.admin?a("v-icon",{attrs:{color:"green darken-4"}},[t._v("local_movies\n                  ")]):t._e(),t._v(" "),e.item.roles.laboratory.admin?a("v-icon",{attrs:{color:"green darken-4"}},[t._v("colorize\n                  ")]):t._e(),t._v(" "),e.item.roles.vaccination.admin?a("v-icon",{attrs:{color:"green darken-4"}},[t._v("local_drink\n                  ")]):t._e()],1)])]}}])}):t._e()],1)],1)],1)],1),t._v(" "),a("app-footer",{attrs:{subsystem:t.subSystem.primaryColor,currentUser:t.currentUser}}),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackBar.timeout,right:"right",color:t.snackBar.color},model:{value:t.snackBar.show,callback:function(e){t.$set(t.snackBar,"show",e)},expression:"snackBar.show"}},[t._v("\n    "+t._s(t.snackBar.message)+"\n  ")])],1)},staticRenderFns:[]},J=a("VU/8")(V,Q,!1,null,null,null).exports,F="http://"+window.location.hostname+":3001",G={data:function(){return{currentUser:{},companies:[],currentAddItem:{},currentRemoveItem:{},currentEditItem:{},currentCompanyItem:{},currentDivisionItem:{},addDialog:{show:!1},removeDialog:{show:!1},editDialog:{show:!1},divisionsListDialog:{show:!1},departmentsListDialog:{show:!1},snackBar:{show:!1,message:"",timeout:5e3,color:""},subSystem:{primaryColor:"light-blue darken-2",secondaryColor:"orange darken-3"},companiesListSearch:"",divisionsListSearch:"",departmentsListSearch:""}},mounted:function(){var t=this;l.a.get(F+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(e){var a=e.data;t.currentUser=a}).catch(function(e){t.errorHandler(e)}),this.getAllCompanies()},methods:{openDivisionsListDialog:function(t){this.currentCompanyItem=t,this.divisionsListDialog.show=!0},closeDivisionsListDialog:function(){this.currentCompanyItem={},this.divisionsListDialog.show=!1},openDepartmentsListDialog:function(t){this.currentDivisionItem=t,this.departmentsListDialog.show=!0},closeDepartmentsListDialog:function(){this.currentDivisionItem={},this.departmentsListDialog.show=!1},openAddDialog:function(t){"company"===t?this.currentAddItem={companyId:"",companyName:" ",companyRate:" "}:"division"===t?this.currentAddItem={divisionId:"",divisionFullName:" ",divisionName:" "}:"department"===t?this.currentAddItem={departmentId:"",departmentName:" "}:(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что добавлять."),this.addDialog.show=!0},noAddDialog:function(){this.addDialog.show=!1,this.currentAddItem={}},yesAddDialog:function(){var t=this;this.currentAddItem.companyId?l.a.post(F+"/api/v1/company/",{companyId:this.currentAddItem.companyId,companyName:this.currentAddItem.companyName,companyRate:this.currentAddItem.companyRate},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.getAllCompanies(),t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)}):this.currentAddItem.divisionId?l.a.post(F+"/api/v1/company/"+this.currentCompanyItem.companyId,{divisionId:this.currentAddItem.divisionId,divisionFullName:this.currentAddItem.divisionFullName,divisionName:this.currentAddItem.divisionName},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.getAllCompanies(),t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.show=!0,t.snackBar.message=e.data.message,t.divisionsListDialog.show=!1}).catch(function(e){t.errorHandler(e)}):this.currentAddItem.departmentId?l.a.post(F+"/api/v1/company/"+this.currentCompanyItem.companyId+"/"+this.currentDivisionItem.divisionId,{departmentId:this.currentAddItem.departmentId,departmentName:this.currentAddItem.departmentName},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.getAllCompanies(),t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=2e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.show=!0,t.snackBar.message=e.data.message,t.divisionsListDialog.show=!1,t.departmentsListDialog.show=!1}).catch(function(e){t.errorHandler(e)}):(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что добавлять."),this.currentAddItem={},this.addDialog.show=!1},openRemoveDialog:function(t){this.currentRemoveItem=t,this.removeDialog.show=!0},noRemoveDialog:function(){this.removeDialog.show=!1,this.currentRemoveItem={}},yesRemoveDialog:function(){var t=this;this.currentRemoveItem.companyId?this.companies.forEach(function(e,a){e===t.currentRemoveItem&&l.a.delete(F+"/api/v1/company/"+t.currentRemoveItem.companyId,{headers:{Authorization:u.getAuthenticationHeader(t)}}).then(function(e){e.data.success?(t.companies.splice(a,1),t.snackBar.show=!0,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=1e3,t.snackBar.message=e.data.message):(t.snackBar.show=!0,t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3,t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})}):this.currentRemoveItem.divisionId?this.companies.forEach(function(e,a){e.companyDivisions.forEach(function(e,r){e===t.currentRemoveItem&&l.a.delete(F+"/api/v1/company/"+t.currentCompanyItem.companyId+"/"+t.currentRemoveItem.divisionId,{headers:{Authorization:u.getAuthenticationHeader(t)}}).then(function(e){e.data.success?(t.companies[a].companyDivisions.splice(r,1),t.snackBar.show=!0,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=1e3,t.snackBar.message=e.data.message):(t.snackBar.show=!0,t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3,t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})})}):this.currentRemoveItem.departmentId?this.companies.forEach(function(e,a){e.companyDivisions.forEach(function(e,r){e.divisionDepartments.forEach(function(e,s){e===t.currentRemoveItem&&l.a.delete(F+"/api/v1/company/"+t.currentCompanyItem.companyId+"/"+t.currentDivisionItem.divisionId+"/"+t.currentRemoveItem.departmentId,{headers:{Authorization:u.getAuthenticationHeader(t)}}).then(function(e){e.data.success?(t.companies[a].companyDivisions[r].divisionDepartments.splice(s,1),t.snackBar.show=!0,t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=1e3,t.snackBar.message=e.data.message):(t.snackBar.show=!0,t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3,t.snackBar.message=e.data.message)}).catch(function(e){t.errorHandler(e)})})})}):(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что удалять."),this.removeDialog.show=!1,this.currentRemoveItem={}},openEditDialog:function(t){this.currentEditItem=t,this.editDialog.show=!0},noEditDialog:function(){this.currentEditItem={},this.editDialog.show=!1},yesEditDialog:function(){var t=this;this.currentEditItem.companyId?l.a.put(F+"/api/v1/company/"+this.currentEditItem.companyId,{companyId:this.currentEditItem.companyId,companyName:this.currentEditItem.companyName,companyRate:this.currentEditItem.companyRate},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.getAllCompanies(),t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=1e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0}).catch(function(e){t.errorHandler(e)}):this.currentEditItem.divisionId?l.a.put(F+"/api/v1/company/"+this.currentCompanyItem.companyId+"/"+this.currentEditItem.divisionId+"/",{divisionId:this.currentEditItem.divisionId,divisionFullName:this.currentEditItem.divisionFullName,divisionName:this.currentEditItem.divisionName},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.getAllCompanies(),t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=1e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0,t.divisionsListDialog.show=!1}).catch(function(e){t.errorHandler(e)}):this.currentEditItem.departmentId?l.a.put(F+"/api/v1/company/"+this.currentCompanyItem.companyId+"/"+this.currentDivisionItem.divisionId+"/"+this.currentEditItem.departmentId,{departmentId:this.currentEditItem.departmentId,departmentName:this.currentEditItem.departmentName},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.getAllCompanies(),t.snackBar.color="green darken-1 white--text",t.snackBar.timeout=1e3):(t.snackBar.color="red darken-2 white--text",t.snackBar.timeout=5e3),t.snackBar.message=e.data.message,t.snackBar.show=!0,t.divisionsListDialog.show=!1,t.departmentsListDialog.show=!1}).catch(function(e){t.errorHandler(e)}):(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что удалять."),this.editDialog.show=!1,this.currentRemoveItem={}},getAllCompanies:function(){var t=this;l.a.get(F+"/api/v1/companies",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){var a=e.data;!0===a.success?(t.companies=a.companies,t.snackBar.show=!0,t.snackBar.color="green darken-1 white--text",t.snackBar.message="Компании загружены",t.snackBar.timeout=1e3):(t.snackBar.show=!0,t.snackBar.color="red darken-1 white--text",t.snackBar.message="Компаний не найдено",t.snackBar.timeout=5e3)}).catch(function(e){t.errorHandler(e)})},errorHandler:function(t){var e=t.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===e&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=t.response.data.message}}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:t.subSystem.primaryColor,subtitle:"Редактор предприятий"}}),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[t._v("Редактор предприятий")]),t._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Поиск","hide-details":""},model:{value:t.companiesListSearch,callback:function(e){t.companiesListSearch=e},expression:"companiesListSearch"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-btn",{attrs:{color:t.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){t.openAddDialog("company")}}},[t._v("\n                  Добавить\n                  предприятие\n                ")])],1)],1),t._v(" "),t.companies.length>0?a("v-data-table",{staticClass:"elevation-10",attrs:{headers:[{text:"Код",value:"companyId"},{text:"Название предприятия",value:"companyName"},{text:"Тариф",value:"companyRate"},{text:"Действия"}],items:t.companies,search:t.companiesListSearch,"no-data-text":"Информации не найдено","no-results-text":"По запросу ничего не найдено","rows-per-page-items":[7,15,{text:"Все",value:-1}],"rows-per-page-text":"Строк на странице:"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",t._l(e.headers,function(e){return a("th",{key:e._id},[t._v("\n                    "+t._s(e.text)+"\n                  ")])}))]}},{key:"items",fn:function(e){return[a("tr",[a("td",{attrs:{width:"90px"}},[t._v(t._s(e.item.companyId))]),t._v(" "),a("td",[t._v(t._s(e.item.companyName))]),t._v(" "),a("td",{attrs:{width:"90px"}},[t._v(t._s(e.item.companyRate))]),t._v(" "),a("td",{attrs:{width:"211px"}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openDivisionsListDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("list")])],1),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openEditDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("edit")])],1),t._v(" "),a("v-btn",{attrs:{color:"red darken-2",icon:""},nativeOn:{click:function(a){t.openRemoveDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1)],1)])]}},{key:"pageText",fn:function(e){var a=e.pageStart,r=e.pageStop;return[t._v("\n                с "+t._s(a)+" по "+t._s(r)+"\n              ")]}}])}):t._e()],1)],1)],1)],1)],1),t._v(" "),a("app-footer",{attrs:{subsystem:t.subSystem.primaryColor,currentUser:t.currentUser.fio}}),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackBar.timeout,right:"right",color:t.snackBar.color},model:{value:t.snackBar.show,callback:function(e){t.$set(t.snackBar,"show",e)},expression:"snackBar.show"}},[t._v("\n    "+t._s(t.snackBar.message)+"\n  ")]),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.divisionsListDialog.show,callback:function(e){t.$set(t.divisionsListDialog,"show",e)},expression:"divisionsListDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          "+t._s(t.currentCompanyItem.companyId)+" — "+t._s(t.currentCompanyItem.companyName)+"\n        ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticStyle:{padding:"4px"},attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Поиск","hide-details":""},model:{value:t.divisionsListSearch,callback:function(e){t.divisionsListSearch=e},expression:"divisionsListSearch"}})],1),t._v(" "),a("v-flex",{staticStyle:{padding:"4px"},attrs:{sm12:"",md4:""}},[a("v-btn",{attrs:{color:t.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){t.openAddDialog("division")}}},[t._v("\n              Добавить цех\n            ")])],1)],1)],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[t.currentCompanyItem.companyId?a("v-data-table",{attrs:{headers:[{text:"Код",value:"divisionId"},{text:"Название",value:"divisionFullName"},{text:"Название",value:"divisionName"},{text:"Действия"}],items:t.currentCompanyItem.companyDivisions,search:t.divisionsListSearch,"no-data-text":"Информации не найдено","no-results-text":"По запросу ничего не найдено","rows-per-page-items":[6,12,{text:"Все",value:-1}],"rows-per-page-text":"Строк на странице:"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",t._l(e.headers,function(e){return a("th",{key:e._id},[t._v("\n                  "+t._s(e.text)+"\n                ")])}))]}},{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.divisionId))]),t._v(" "),a("td",[t._v(t._s(e.item.divisionFullName))]),t._v(" "),a("td",[t._v(t._s(e.item.divisionName))]),t._v(" "),a("td",{attrs:{width:"211px"}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openDepartmentsListDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("list")])],1),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openEditDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("edit")])],1),t._v(" "),a("v-btn",{attrs:{color:"red darken-2",icon:""},nativeOn:{click:function(a){t.openRemoveDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1)],1)])]}},{key:"pageText",fn:function(e){var a=e.pageStart,r=e.pageStop;return[t._v("\n              с "+t._s(a)+" по "+t._s(r)+"\n            ")]}}])}):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.closeDivisionsListDialog(e)}}},[t._v("Закрыть")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.departmentsListDialog.show,callback:function(e){t.$set(t.departmentsListDialog,"show",e)},expression:"departmentsListDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          "+t._s(t.currentDivisionItem.divisionId)+" — "+t._s(t.currentDivisionItem.divisionName)+"\n        ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticStyle:{padding:"4px"},attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Поиск","hide-details":""},model:{value:t.departmentsListSearch,callback:function(e){t.departmentsListSearch=e},expression:"departmentsListSearch"}})],1),t._v(" "),a("v-flex",{staticStyle:{padding:"4px"},attrs:{sm12:"",md4:""}},[a("v-btn",{attrs:{color:t.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(e){t.openAddDialog("department")}}},[t._v("\n              Добавить участок\n            ")])],1)],1)],1),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[t.currentDivisionItem.divisionId?a("v-data-table",{attrs:{headers:[{text:"Код",value:"departmentId"},{text:"Название",value:"departmentName"},{text:"Действия"}],items:t.currentDivisionItem.divisionDepartments,search:t.departmentsListSearch,"no-data-text":"Информации не найдено","no-results-text":"По запросу ничего не найдено","rows-per-page-items":[6,12,{text:"Все",value:-1}],"rows-per-page-text":"Строк на странице:"},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",t._l(e.headers,function(e){return a("th",{key:e._id},[t._v("\n                  "+t._s(e.text)+"\n                ")])}))]}},{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.departmentId))]),t._v(" "),a("td",[t._v(t._s(e.item.departmentName))]),t._v(" "),a("td",{attrs:{width:"211px"}},[a("v-btn",{attrs:{color:t.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){t.openEditDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("edit")])],1),t._v(" "),a("v-btn",{attrs:{color:"red darken-2",icon:""},nativeOn:{click:function(a){t.openRemoveDialog(e.item)}}},[a("v-icon",{attrs:{color:"white"}},[t._v("delete")])],1)],1)])]}},{key:"pageText",fn:function(e){var a=e.pageStart,r=e.pageStop;return[t._v("\n              с "+t._s(a)+" по "+t._s(r)+"\n            ")]}}])}):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.primaryColor,flat:""},nativeOn:{click:function(e){return t.closeDepartmentsListDialog(e)}}},[t._v("Закрыть")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.addDialog.show,callback:function(e){t.$set(t.addDialog,"show",e)},expression:"addDialog.show"}},[a("v-card",[t.currentAddItem.companyName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Добавить предприятие")])]):t._e(),t._v(" "),t.currentAddItem.divisionName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Добавить цех в "),a("span",{staticClass:"green--text text--darken-2"},[t._v("«"+t._s(t.currentCompanyItem.companyName)+"»")])])]):t._e(),t._v(" "),t.currentAddItem.departmentName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Добавить участок в "),a("span",{staticClass:"green--text text--darken-2"},[t._v("«"+t._s(t.currentDivisionItem.divisionName)+"»")])])]):t._e(),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[t.currentAddItem.companyName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Код предприятия",color:t.subSystem.primaryColor},model:{value:t.currentAddItem.companyId,callback:function(e){t.$set(t.currentAddItem,"companyId",e)},expression:"currentAddItem.companyId"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название предприятия",color:t.subSystem.primaryColor},model:{value:t.currentAddItem.companyName,callback:function(e){t.$set(t.currentAddItem,"companyName",e)},expression:"currentAddItem.companyName"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Тариф предприятия",color:t.subSystem.primaryColor},model:{value:t.currentAddItem.companyRate,callback:function(e){t.$set(t.currentAddItem,"companyRate",e)},expression:"currentAddItem.companyRate"}})],1)],1):t._e(),t._v(" "),t.currentAddItem.divisionName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Код цеха",color:t.subSystem.primaryColor},model:{value:t.currentAddItem.divisionId,callback:function(e){t.$set(t.currentAddItem,"divisionId",e)},expression:"currentAddItem.divisionId"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Полное название цеха",color:t.subSystem.primaryColor},model:{value:t.currentAddItem.divisionFullName,callback:function(e){t.$set(t.currentAddItem,"divisionFullName",e)},expression:"currentAddItem.divisionFullName"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название цеха",color:t.subSystem.primaryColor},model:{value:t.currentAddItem.divisionName,callback:function(e){t.$set(t.currentAddItem,"divisionName",e)},expression:"currentAddItem.divisionName"}})],1)],1):t._e(),t._v(" "),t.currentAddItem.departmentName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Код участка",color:t.subSystem.primaryColor},model:{value:t.currentAddItem.departmentId,callback:function(e){t.$set(t.currentAddItem,"departmentId",e)},expression:"currentAddItem.departmentId"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Название участка",color:t.subSystem.primaryColor},model:{value:t.currentAddItem.departmentName,callback:function(e){t.$set(t.currentAddItem,"departmentName",e)},expression:"currentAddItem.departmentName"}})],1)],1):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.secondaryColor,flat:""},nativeOn:{click:function(e){return t.noAddDialog(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesAddDialog(e)}}},[t._v("Добавить")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.editDialog.show,callback:function(e){t.$set(t.editDialog,"show",e)},expression:"editDialog.show"}},[a("v-card",[t.currentEditItem.companyName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Редактировать предприятие — "),a("span",{staticClass:"green--text text--darken-2"},[t._v("«"+t._s(t.currentEditItem.companyName)+"»")])])]):t._e(),t._v(" "),t.currentEditItem.divisionName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Редактировать цех — "),a("span",{staticClass:"green--text text--darken-2"},[t._v("«"+t._s(t.currentEditItem.divisionName)+"»")])])]):t._e(),t._v(" "),t.currentEditItem.departmentName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Редактировать участок — "),a("span",{staticClass:"green--text text--darken-2"},[t._v("«"+t._s(t.currentEditItem.departmentName)+"»")])])]):t._e(),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[t.currentEditItem.companyName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Код предприятия",color:t.subSystem.primaryColor},model:{value:t.currentEditItem.companyId,callback:function(e){t.$set(t.currentEditItem,"companyId",e)},expression:"currentEditItem.companyId"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название предприятия",color:t.subSystem.primaryColor},model:{value:t.currentEditItem.companyName,callback:function(e){t.$set(t.currentEditItem,"companyName",e)},expression:"currentEditItem.companyName"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Тариф предприятия",color:t.subSystem.primaryColor},model:{value:t.currentEditItem.companyRate,callback:function(e){t.$set(t.currentEditItem,"companyRate",e)},expression:"currentEditItem.companyRate"}})],1)],1):t._e(),t._v(" "),t.currentEditItem.divisionName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Код цеха",color:t.subSystem.primaryColor},model:{value:t.currentEditItem.divisionId,callback:function(e){t.$set(t.currentEditItem,"divisionId",e)},expression:"currentEditItem.divisionId"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Полное название цеха",color:t.subSystem.primaryColor},model:{value:t.currentEditItem.divisionFullName,callback:function(e){t.$set(t.currentEditItem,"divisionFullName",e)},expression:"currentEditItem.divisionFullName"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название цеха",color:t.subSystem.primaryColor},model:{value:t.currentEditItem.divisionName,callback:function(e){t.$set(t.currentEditItem,"divisionName",e)},expression:"currentEditItem.divisionName"}})],1)],1):t._e(),t._v(" "),t.currentEditItem.departmentName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Код участка",color:t.subSystem.primaryColor},model:{value:t.currentEditItem.departmentId,callback:function(e){t.$set(t.currentEditItem,"departmentId",e)},expression:"currentEditItem.departmentId"}})],1),t._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Название участка",color:t.subSystem.primaryColor},model:{value:t.currentEditItem.departmentName,callback:function(e){t.$set(t.currentEditItem,"departmentName",e)},expression:"currentEditItem.departmentName"}})],1)],1):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.secondaryColor,flat:""},nativeOn:{click:function(e){return t.noEditDialog(e)}}},[t._v("Закрыть")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:t.subSystem.primaryColor},nativeOn:{click:function(e){return t.yesEditDialog(e)}}},[t._v("Сохранить")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.removeDialog.show,callback:function(e){t.$set(t.removeDialog,"show",e)},expression:"removeDialog.show"}},[a("v-card",[t.currentRemoveItem.companyName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Вы точно хотите удалить "),a("span",{staticClass:"red--text text--darken-2"},[t._v("«"+t._s(t.currentRemoveItem.companyName)+"»")])])]):t._e(),t._v(" "),t.currentRemoveItem.divisionName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Вы точно хотите удалить "),a("span",{staticClass:"red--text text--darken-2"},[t._v("«"+t._s(t.currentRemoveItem.divisionName)+"»")])])]):t._e(),t._v(" "),t.currentRemoveItem.departmentName?a("v-card-title",[a("span",{staticClass:"headline"},[t._v("\n          Вы точно хотите удалить "),a("span",{staticClass:"red--text text--darken-2"},[t._v("«"+t._s(t.currentRemoveItem.departmentName)+"»")])])]):t._e(),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.subSystem.secondaryColor,flat:""},nativeOn:{click:function(e){return t.noRemoveDialog(e)}}},[t._v("Нет")]),t._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red darken-2"},nativeOn:{click:function(e){return t.yesRemoveDialog(e)}}},[t._v("Да")])],1)],1)],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(G,q,!1,function(t){a("II7m")},null,null).exports,X={props:["subsystem","subtitle","currentUser"],data:function(){return{drawer:!0}},methods:{signOut:function(){u.signOut(this)}}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[t.currentUser.roles?a("v-list",{attrs:{subheader:""}},[t.currentUser.roles.medos.admin||t.currentUser.roles.medos.receptionist||t.currentUser.roles.medos.premedical||t.currentUser.roles.medos.functionalDiagnostics||t.currentUser.roles.medos.doctor||t.currentUser.roles.medos.exam||t.currentUser.roles.superuser?a("div",[a("v-subheader",{attrs:{inset:""}},[t._v("Профосмотр")]),t._v(" "),a("v-divider"),t._v(" "),t.currentUser.roles.medos.admin||t.currentUser.roles.medos.receptionist||t.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("local_hospital")])],1),t._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/medos/reception"}},[a("v-list-tile-title",[t._v("Регистратура профосмотра")])],1)],1)],1):t._e(),t._v(" "),t.currentUser.roles.medos.admin||t.currentUser.roles.medos.premedical||t.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("local_hospital")])],1),t._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/medos/premedical"}},[a("v-list-tile-title",[t._v("Доврачебный кабинет")])],1)],1)],1):t._e(),t._v(" "),t.currentUser.roles.medos.admin||t.currentUser.roles.medos.doctor||t.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("local_hospital")])],1),t._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/medos/doctor"}},[a("v-list-tile-title",[t._v("Врач профосмотра")])],1)],1)],1):t._e(),t._v(" "),t.currentUser.roles.medos.admin||t.currentUser.roles.medos.exam||t.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("local_hospital")])],1),t._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/medos/exam"}},[a("v-list-tile-title",[t._v("Обследования профосмотра")])],1)],1)],1):t._e(),t._v(" "),a("v-divider")],1):t._e(),t._v(" "),t.currentUser.roles.radiography.assistant||t.currentUser.roles.radiography.admin||t.currentUser.roles.laboratory.assistant||t.currentUser.roles.laboratory.admin||t.currentUser.roles.vaccination.assistant||t.currentUser.roles.vaccination.admin||t.currentUser.roles.superuser?a("div",[a("v-subheader",{attrs:{inset:""}},[t._v("Параклиника")]),t._v(" "),a("v-divider"),t._v(" "),t.currentUser.roles.radiography.assistant||t.currentUser.roles.radiography.admin||t.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("local_movies")])],1),t._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/radiography"}},[a("v-list-tile-title",[t._v("Снимки")])],1)],1)],1):t._e(),t._v(" "),t.currentUser.roles.laboratory.assistant||t.currentUser.roles.laboratory.admin||t.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("colorize")])],1),t._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/laboratory"}},[a("v-list-tile-title",[t._v("Лаборатория")])],1)],1)],1):t._e(),t._v(" "),t.currentUser.roles.vaccination.assistant||t.currentUser.roles.vaccination.admin||t.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("local_drink")])],1),t._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/vaccines"}},[a("v-list-tile-title",[t._v("Прививки")])],1)],1)],1):t._e(),t._v(" "),a("v-divider")],1):t._e(),t._v(" "),t.currentUser.roles.medos.admin||t.currentUser.roles.superuser?a("div",[a("v-subheader",{attrs:{inset:""}},[t._v("Управление")]),t._v(" "),a("v-divider"),t._v(" "),t.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("settings")])],1),t._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/admin/users"}},[a("v-list-tile-title",[t._v("Редактор пользователей")])],1)],1)],1):t._e(),t._v(" "),t.currentUser.roles.medos.admin||t.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("settings")])],1),t._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/admin/companies"}},[a("v-list-tile-title",[t._v("Редактор предприятий")])],1)],1)],1):t._e()],1):t._e()]):t._e()],1),t._v(" "),a("v-toolbar",{attrs:{color:t.subsystem,dark:"",app:"",fixed:"","clipped-left":""}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),a("v-toolbar-title",[t._v("МБУЗ ГКП №7 - "+t._s(t.subtitle))]),t._v(" "),a("v-spacer"),t._v(" "),a("v-tooltip",{attrs:{bottom:""}},[a("v-btn",{attrs:{slot:"activator",color:"transparent",large:"",icon:""},nativeOn:{click:function(e){return t.signOut(e)}},slot:"activator"},[a("v-icon",[t._v("exit_to_app")])],1),t._v(" "),a("span",[t._v("Выйти")])],1)],1)],1)},staticRenderFns:[]},K=a("VU/8")(X,W,!1,null,null,null).exports,Z={props:{subsystem:"",currentUser:{type:Object}},computed:{VERSION:function(){return a("7YgM").version},userName:function(){return this.currentUser.fio}}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{attrs:{color:t.subsystem,app:""}},[a("span",{staticClass:"white--text"},[t._v("Пользователь: "+t._s(t.userName))]),t._v(" "),a("span",{staticClass:"white--text",staticStyle:{position:"absolute",right:"12px"}},[t._v("версия: "+t._s(t.VERSION))])])},staticRenderFns:[]},et=a("VU/8")(Z,tt,!1,null,null,null).exports;r.a.component("app-header",K),r.a.component("app-footer",et),r.a.use(n.a);var at=new n.a({routes:[{path:"/login",name:"Auth2",component:v},{path:"/medos/reception",name:"MedosReception",component:g},{path:"/medos/premedical",name:"MedosPremedical",component:_},{path:"/medos/doctor",name:"MedosDoctor",component:D},{path:"/medos/exam",name:"MedosExam",component:N},{path:"/radiography",name:"Radiography",component:A},{path:"/laboratory",name:"Laboratory",component:O},{path:"/vaccines",name:"Vaccination",component:T},{path:"/admin/users",name:"Users",component:J},{path:"/admin/companies",name:"Companies",component:Y}]});at.beforeEach(function(t,e,a){var r=u.user.authenticated,s=u.user.roles;"/login"!==t.path?(r?a():at.push("/login"),"/login"===e.path&&(s.superuser?at.push("/admin/users"):s.medos&&(0!==s.medos.doctor||s.medos.admin)?at.push("/medos/doctor"):s.medos&&0!==s.medos.exam?at.push("/medos/exam"):s.medos&&s.medos.receptionist?at.push("/medos/reception"):s.medos&&s.medos.premedical?at.push("/medos/premedical"):s.radiography&&(s.medos.radiography.admin||s.medos.radiography.assistant)?at.push("/radiography"):s.laboratory&&(s.medos.laboratory.admin||s.medos.laboratory.assistant)?at.push("/laboratory"):s.vaccination&&(s.medos.vaccination.admin||s.medos.vaccination.assistant)?at.push("/vaccination"):a())):a()});var rt=at,st=a("K/Lq"),ot=a.n(st),nt=a("3EgV"),it=a.n(nt),lt=(a("7zck"),a("PJh5")),ct=a.n(lt);r.a.use(ot.a),r.a.use(it.a),r.a.filter("formatDate",function(t){if(t)return ct()(String(t)).format("DD.MM.YYYY")}),r.a.config.productionTip=!1,u.checkAuthentication(),new r.a({el:"#app",router:rt,render:function(t){return t(o)}})},eola:function(t,e){},kIKB:function(t,e){},r10Q:function(t,e){},uslO:function(t,e,a){var r={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function s(t){return a(o(t))}function o(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(r)},s.resolve=o,t.exports=s,s.id="uslO"},we3y:function(t,e){},zbvE:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0ff263ca2984381893db.js.map