webpackJsonp([1],{"7YgM":function(e,t){e.exports={name:"gkp7-app",version:"0.9.1",description:"Vue.js приложение для автоматизации прохождения медицинских осмотров в МБУЗ ГКП №7.",author:"Alexander Goncharov <me@websanya.ru>",private:!0,scripts:{dev:"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js",start:"npm run dev",unit:"cross-env BABEL_ENV=test karma start test/unit/karma.conf.js --single-run",e2e:"node test/e2e/runner.js",test:"npm run unit && npm run e2e",lint:"eslint --ext .js,.vue src test/unit test/e2e/specs",build:"node build/build.js"},dependencies:{axios:"^0.17.1",moment:"^2.22.1","node-sass":"^4.8.3","sass-loader":"^6.0.7",vue:"^2.5.16","vue-cookie":"^1.1.4","vue-router":"^3.0.1",vuetify:"^1.0.16"},devDependencies:{autoprefixer:"^7.2.6","babel-core":"^6.22.1","babel-eslint":"^8.2.3","babel-helper-vue-jsx-merge-props":"^2.0.3","babel-loader":"^7.1.4","babel-plugin-istanbul":"^4.1.6","babel-plugin-syntax-jsx":"^6.18.0","babel-plugin-transform-runtime":"^6.22.0","babel-plugin-transform-vue-jsx":"^3.7.0","babel-preset-env":"^1.3.2","babel-preset-stage-2":"^6.22.0","babel-register":"^6.22.0",chai:"^4.1.2",chalk:"^2.4.0",chromedriver:"^2.37.0","copy-webpack-plugin":"^4.5.1","cross-env":"^5.1.4","cross-spawn":"^5.0.1","css-loader":"^0.28.11",eslint:"^4.19.1","eslint-config-standard":"^10.2.1","eslint-friendly-formatter":"^3.0.0","eslint-loader":"^1.7.1","eslint-plugin-import":"^2.11.0","eslint-plugin-node":"^5.2.0","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.0.1","eslint-plugin-vue":"^4.5.0","extract-text-webpack-plugin":"^3.0.0","file-loader":"^1.1.11","friendly-errors-webpack-plugin":"^1.7.0","html-webpack-plugin":"^2.30.1","inject-loader":"^3.0.0",karma:"^1.4.1","karma-coverage":"^1.1.1","karma-mocha":"^1.3.0","karma-phantomjs-launcher":"^1.0.2","karma-phantomjs-shim":"^1.4.0","karma-sinon-chai":"^1.3.4","karma-sourcemap-loader":"^0.3.7","karma-spec-reporter":"0.0.31","karma-webpack":"^2.0.13",mocha:"^3.2.0",nightwatch:"^0.9.20","node-notifier":"^5.1.2","optimize-css-assets-webpack-plugin":"^3.2.0",ora:"^1.4.0","phantomjs-prebuilt":"^2.1.14",portfinder:"^1.0.13","postcss-import":"^11.1.0","postcss-loader":"^2.1.4","postcss-url":"^7.3.2",rimraf:"^2.6.0","selenium-server":"^3.11.0",semver:"^5.3.0",shelljs:"^0.7.6",sinon:"^4.5.0","sinon-chai":"^2.8.0","uglifyjs-webpack-plugin":"^1.2.5","url-loader":"^0.5.8","vue-loader":"^13.7.1","vue-style-loader":"^3.1.2","vue-template-compiler":"^2.5.16",webpack:"^3.11.0","webpack-bundle-analyzer":"^2.11.1","webpack-dev-server":"^2.11.2","webpack-merge":"^4.1.2"},engines:{node:">= 6.0.0",npm:">= 3.0.0"},browserslist:["> 1%","last 2 versions","not ie <= 8"]}},"7zck":function(e,t){},FM6E:function(e,t){},II7m:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("/5sW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("transition",[t("keep-alive",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")({name:"app"},s,!1,function(e){a("eola")},null,null).exports,n=a("/ocq"),i=a("mtWM"),l=a.n(i),c="http://"+window.location.hostname+":3001",u={user:{authenticated:!1},authenticate:function(e,t,a){var r=this;l.a.post(c+"/api/v1/auth",t).then(function(t){var s=t.data;e.$cookie.set("token",s.token,"1D"),e.$cookie.set("user_id",s.user._id,"1D"),e.validLogin=!0,r.user.authenticated=!0,r.user.roles=s.user.roles,a&&re.push(a)}).catch(function(t){var a=t.response;console.log(a),401===a.status&&(e.snackbar=!0,e.message=a.data.message)})},signup:function(e,t,a){var r=this;l.a.post(c+"/api/v1/signup",t).then(function(s){s.data;e.validSignUp=!0,r.authenticate(e,t,a)}).catch(function(t){var a=t.response.data;e.snackbar=!0,e.message=a.message})},signOut:function(e,t){e.$cookie.delete("token"),e.$cookie.delete("user_id"),this.user.authenticated=!1,re.push("/")},checkAuthentication:function(){var e=this.getCookie("token");this.user.authenticated=!!e},getAuthenticationHeader:function(e){return"Bearer "+e.$cookie.get("token")},getCookie:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}},d={data:function(){return{snackBar:!1,validLogin:!1,loginPasswordVisible:!1,rules:[function(e){return!!e||"Поле обязательно для заполнения"}],credentials:{username:"",password:""},message:""}},methods:{submitAuthentication:function(){u.authenticate(this,this.credentials,"/")}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v("Войдите в систему")]),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-card-text",[a("v-form",{model:{value:e.validLogin,callback:function(t){e.validLogin=t},expression:"validLogin"}},[a("v-text-field",{attrs:{label:"Логин","prepend-icon":"person",rules:e.rules,required:""},model:{value:e.credentials.username,callback:function(t){e.$set(e.credentials,"username",t)},expression:"credentials.username"}}),e._v(" "),a("v-text-field",{attrs:{label:"Пароль","prepend-icon":"lock",rules:e.rules,"append-icon":e.loginPasswordVisible?"visibility":"visibility_off","append-icon-cb":function(){return e.loginPasswordVisible=!e.loginPasswordVisible},type:e.loginPasswordVisible?"text":"password",required:""},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitAuthentication()}},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}})],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.submitAuthentication()}}},[e._v("Войти")])],1)],1),e._v(" "),a("v-snackbar",{attrs:{timeout:6e3,bottom:"bottom",color:"red lighten-1"},model:{value:e.snackBar,callback:function(t){e.snackBar=t},expression:"snackBar"}},[e._v("\n            "+e._s(e.message)+"\n          ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},v=a("VU/8")(d,m,!1,null,null,null).exports,p="http://"+window.location.hostname+":3001",h={data:function(){return{currentUser:{},companies:[],medosTypes:[{value:{typeId:1,typeName:"поступление на работу"},text:"1 - поступление на работу"},{value:{typeId:2,typeName:"периодический проф. осмотр"},text:"2 - периодический проф. осмотр"},{value:{typeId:3,typeName:"перевод из цеха в цех"},text:"3 - перевод из цеха в цех"},{value:{typeId:5,typeName:"по санитарной книжке"},text:"5 - по санитарной книжке"},{value:{typeId:6,typeName:"водительская мед. комиссия"},text:"6 - водительская мед. комиссия"},{value:{typeId:7,typeName:"поступление в учебное заведение"},text:"7 - поступление в учебное заведение"},{value:{typeId:8,typeName:"осмотр на ношение оружия"},text:"8 - осмотр на ношение оружия"}],companiesForSelect:[],currentEditPatient:{},currentAddPatient:{},currentAddJob:{},currentEditJob:{},currentRemoveItem:{},currentMedos:{},patientQuery:{},patients:[],addPatientDialog:{show:!1},addJobDialog:{show:!1},editJobDialog:{show:!1},currentCompanyDivisions:[],currentDivisionDepartments:[],editPatientDialog:{show:!1},removeDialog:{show:!1},addMedosDialog:{show:!1},snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"light-blue darken-4",secondaryColor:"yellow darken-4"}}},mounted:function(){this.getCurrentUser(),this.getAllCompanies()},methods:{openAddPatientDialog:function(){this.addPatientDialog.show=!0},closeAddPatientDialog:function(){this.addPatientDialog.show=!1},saveAddPatientDialog:function(){var e=this,t={fio:this.currentAddPatient.fio,dateBirth:this.currentAddPatient.dateBirth,sex:this.currentAddPatient.sex,passport:this.currentAddPatient.passport,phone:this.currentAddPatient.phone,updatedBy:this.currentUser._id};this.currentAddPatient.activeJob&&(t.activeJob=this.currentAddPatient.activeJob),l.a.post(p+"/api/v1/patient/",t,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.currentAddPatient={},e.currentAddJob={},e.addPatientDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})},openAddJobDialog:function(){this.addJobDialog.show=!0},closeAddJobDialog:function(){this.addJobDialog.show=!1},saveAddJobDialog:function(){this.addJobDialog.show=!1;var e=this.currentAddJob;e.updatedBy=this.currentUser._id,this.addPatientDialog.show?this.currentAddPatient.activeJob=e:this.editPatientDialog.show&&(this.currentEditPatient.activeJob=e)},openEditPatientDialog:function(e){this.currentEditPatient=e,this.editPatientDialog.show=!0},noEditPatientDialog:function(){this.currentEditPatient={},this.editPatientDialog.show=!1},yesEditPatientDialog:function(){var e=this,t={fio:this.currentEditPatient.fio,dateBirth:this.currentEditPatient.dateBirth,sex:this.currentEditPatient.sex,passport:this.currentEditPatient.passport,phone:this.currentEditPatient.phone,activeJob:this.currentEditPatient.activeJob,updatedBy:this.currentUser._id};l.a.put(p+"/api/v1/patient/"+this.currentEditPatient._id+"/",t,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.currentEditPatient={},e.editPatientDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})},openEditJobDialog:function(){this.currentEditJob.jobCompany={},this.currentEditJob.jobCompany.jobCompanyId=this.currentEditPatient.activeJob.jobCompany.jobCompanyId,this.currentEditJob.jobCompany.jobCompanyName=this.currentEditPatient.activeJob.jobCompany.jobCompanyName,this.editJobDialog.show=!0,this.updateCompanyDivisions(),this.updateDivisionDepartments()},closeEditJobDialog:function(){this.editJobDialog.show=!1},saveEditJobDialog:function(){this.editJobDialog.show=!1;var e=this.currentEditJob;e.updatedBy=this.currentUser._id,this.currentEditPatient.activeJob=e},openRemoveDialog:function(e){this.currentRemoveItem=e,this.removeDialog.show=!0},noRemoveDialog:function(){this.removeDialog.show=!1,this.currentRemoveItem={}},yesRemoveDialog:function(){var e=this;this.currentRemoveItem.fio&&this.currentRemoveItem._id?this.patients.forEach(function(t,a){t===e.currentRemoveItem&&l.a.delete(p+"/api/v1/patient/"+e.currentRemoveItem._id+"/",{headers:{Authorization:u.getAuthenticationHeader(e)}}).then(function(t){t.data.success?(e.patients.splice(a,1),e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=1e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.show=!0,e.snackBar.message=t.data.message}).catch(function(t){e.errorHandler(t)})}):this.currentRemoveItem.jobName?this.currentEditPatient.activeJob={}:(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что удалять."),this.removeDialog.show=!1,this.currentRemoveItem={}},openRegisterMedicalExamination:function(e){console.log(e),void 0===e.activeJob?(this.snackBar.show=!0,this.snackBar.color="red darken-1 white--text",this.snackBar.message="У пациента не указано место работы",this.snackBar.timeout=5e3):!0===e.hasActiveMedos?(this.snackBar.show=!0,this.snackBar.color="red darken-1 white--text",this.snackBar.message="Пациент уже зарегистрирован на мед. осмотр",this.snackBar.timeout=5e3):(this.currentEditPatient=e,this.addMedosDialog.show=!0)},closeRegisterMedicalExamination:function(){this.currentEditPatient={},this.addMedosDialog.show=!1},saveRegisterMedicalExamination:function(){var e=this;this.currentMedos.medosJob=this.currentEditPatient.activeJob;var t={updatedBy:this.currentUser._id,currentMedos:this.currentMedos};l.a.post(p+"/api/v1/patient/"+this.currentEditPatient._id+"/active-medos/",t,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.currentEditPatient={},e.currentMedos={},e.addMedosDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})},updateCompanyDivisions:function(){var e=this;if(void 0!==this.currentAddJob.jobCompany){var t=this.companies.find(function(t){return t.companyId===e.currentAddJob.jobCompany.jobCompanyId});void 0!==t&&(this.currentCompanyDivisions=t.companyDivisions.map(function(e){return{value:{jobDivisionId:e.divisionId,jobDivisionName:e.divisionName},text:e.divisionId+" - "+e.divisionName}}))}else if(void 0!==this.currentEditJob.jobCompany){var a=this.companies.find(function(t){return t.companyId===e.currentEditJob.jobCompany.jobCompanyId});void 0!==a&&(this.currentCompanyDivisions=a.companyDivisions.map(function(e){return{value:{jobDivisionId:e.divisionId,jobDivisionName:e.divisionName},text:e.divisionId+" - "+e.divisionName}}))}},updateDivisionDepartments:function(){var e=this;if(void 0!==this.currentAddJob.jobDivision){var t=this.companies.find(function(t){return t.companyId===e.currentAddJob.jobCompany.jobCompanyId}).companyDivisions.find(function(t){return t.divisionId===e.currentAddJob.jobDivision.jobDivisionId});void 0!==t&&(this.currentDivisionDepartments=t.divisionDepartments.map(function(e){return{value:{jobDepartmentId:e.departmentId,jobDepartmentName:e.departmentName},text:e.departmentId+" - "+e.departmentName}}))}else if(void 0!==this.currentEditJob.jobDivision){var a=this.companies.find(function(t){return t.companyId===e.currentEditJob.jobCompany.jobCompanyId}).companyDivisions.find(function(t){return t.divisionId===e.currentEditJob.jobDivision.jobDivisionId});void 0!==a&&(this.currentDivisionDepartments=a.divisionDepartments.map(function(e){return{value:{jobDepartmentId:e.departmentId,jobDepartmentName:e.departmentName},text:e.departmentId+" - "+e.departmentName}}))}},getPatients:function(){var e=this,t={};t.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,t.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,t.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(p+"/api/v1/patient/"+t.lastName+"/"+t.firstName+"/"+t.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.show=!1,e.patients=t.data.patients,e.patients.forEach(function(t){t.dateBirth=e.dateFromIso(t.dateBirth)})):(e.patients=[],e.snackBar.show=!0,e.snackBar.color="yellow accent-3 black--text",e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})},getAllCompanies:function(){var e=this;l.a.get(p+"/api/v1/companies",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){var a=t.data;!0===a.success?(e.companies=a.companies,e.snackBar.show=!0,e.snackBar.color="green darken-1 white--text",e.snackBar.message="Компании загружены",e.snackBar.timeout=1e3,e.companiesForSelect=e.companies.map(function(e){return{value:{jobCompanyId:e.companyId,jobCompanyName:e.companyName},text:e.companyId+" - "+e.companyName}})):(e.snackBar.show=!0,e.snackBar.color="red darken-1 white--text",e.snackBar.message="Компаний не найдено",e.snackBar.timeout=5e3)}).catch(function(t){e.errorHandler(t)})},getCurrentUser:function(){var e=this;l.a.get(p+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;e.currentUser=a}).catch(function(t){e.errorHandler(t)})},dateFromIso:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(e){var t=e.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===t&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=e.response.data.message}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:e.subSystem.primaryColor,subtitle:"Регистратура профосмотра",currentUser:e.currentUser}}),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[e._v("Поиск пациентов")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.lastName,callback:function(t){e.$set(e.patientQuery,"lastName",t)},expression:"patientQuery.lastName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.firstName,callback:function(t){e.$set(e.patientQuery,"firstName",t)},expression:"patientQuery.firstName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.middleName,callback:function(t){e.$set(e.patientQuery,"middleName",t)},expression:"patientQuery.middleName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:"",dark:"",large:"",block:""},nativeOn:{click:function(t){return e.openAddPatientDialog(t)}}},[e._v("\n                  Добавить\n                  пациента\n                ")])],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){return e.getPatients(t)}}},[e._v("Найти")])],1)],1),e._v(" "),e.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:e.patients,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",{attrs:{width:"72px"}},[t.item.hasActiveMedos?a("v-icon",{attrs:{color:e.subSystem.primaryColor}},[e._v("\n                      assignment_ind\n                    ")]):e._e()],1),e._v(" "),a("td",[e._v(e._s(t.item.fio))]),e._v(" "),a("td",[e._v(e._s(t.item.dateBirth))]),e._v(" "),a("td",[e._v(e._s(t.item.sex?"Муж":"Жен"))]),e._v(" "),a("td",{attrs:{width:"211px"}},[a("v-tooltip",{attrs:{top:"",color:e.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){e.openRegisterMedicalExamination(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment_ind")])],1),e._v(" "),a("span",[e._v("Зарегистрировать на проф. осмотр")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:e.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openEditPatientDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("edit")])],1),e._v(" "),a("span",[e._v("Редактировать данные пациента")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:"red darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-2",icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1),e._v(" "),a("span",[e._v("Удалить пациента")])],1)],1)])]}}])}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("app-footer",{attrs:{subsystem:e.subSystem.primaryColor,currentUser:e.currentUser}}),e._v(" "),a("v-snackbar",{attrs:{timeout:e.snackBar.timeout,right:"right",color:e.snackBar.color},model:{value:e.snackBar.show,callback:function(t){e.$set(e.snackBar,"show",t)},expression:"snackBar.show"}},[e._v("\n    "+e._s(e.snackBar.message)+"\n  ")]),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.addPatientDialog.show,callback:function(t){e.$set(e.addPatientDialog,"show",t)},expression:"addPatientDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Добавить нового пациента")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"ФИО",color:e.subSystem.primaryColor},model:{value:e.currentAddPatient.fio,callback:function(t){e.$set(e.currentAddPatient,"fio",t)},expression:"currentAddPatient.fio"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Паспорт",color:e.subSystem.primaryColor},model:{value:e.currentAddPatient.passport,callback:function(t){e.$set(e.currentAddPatient,"passport",t)},expression:"currentAddPatient.passport"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Телефон",color:e.subSystem.primaryColor},model:{value:e.currentAddPatient.phone,callback:function(t){e.$set(e.currentAddPatient,"phone",t)},expression:"currentAddPatient.phone"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{mask:"##.##.####","return-masked-value":"",label:"Дата рождения",color:e.subSystem.primaryColor},model:{value:e.currentAddPatient.dateBirth,callback:function(t){e.$set(e.currentAddPatient,"dateBirth",t)},expression:"currentAddPatient.dateBirth"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-select",{attrs:{items:[{text:"Муж",value:!0},{text:"Жен",value:!1}],label:"Пол",autocomplete:"",color:e.subSystem.primaryColor},model:{value:e.currentAddPatient.sex,callback:function(t){e.$set(e.currentAddPatient,"sex",t)},expression:"currentAddPatient.sex"}})],1),e._v(" "),e.currentAddPatient.activeJob?a("v-flex",{attrs:{sm12:"",md7:""}},[a("v-text-field",{attrs:{label:"Место работы",placeholder:"Нажмите кнопку «Работа»",color:e.subSystem.primaryColor,disabled:""},model:{value:e.currentAddPatient.activeJob.jobName,callback:function(t){e.$set(e.currentAddPatient.activeJob,"jobName",t)},expression:"currentAddPatient.activeJob.jobName"}})],1):e._e(),e._v(" "),e.currentAddPatient.activeJob?e._e():a("v-flex",{attrs:{sm12:"",md7:""}},[a("v-text-field",{attrs:{label:"Место работы",placeholder:"Нажмите кнопку «Работа»",color:e.subSystem.primaryColor,disabled:""}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.closeAddPatientDialog(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.secondaryColor},nativeOn:{click:function(t){return e.openAddJobDialog(t)}}},[e._v("Работа")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.saveAddPatientDialog(t)}}},[e._v("Сохранить\n        ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.addJobDialog.show,callback:function(t){e.$set(e.addJobDialog,"show",t)},expression:"addJobDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Добавить место работы для пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentAddPatient.fio))])])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.companiesForSelect,label:"Предприятие",color:e.subSystem.primaryColor,"no-data-text":"Предприятие не найдено",autocomplete:""},on:{blur:e.updateCompanyDivisions},model:{value:e.currentAddJob.jobCompany,callback:function(t){e.$set(e.currentAddJob,"jobCompany",t)},expression:"currentAddJob.jobCompany"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.currentCompanyDivisions,label:"Цех",color:e.subSystem.primaryColor,"no-data-text":"Цех не найден",autocomplete:""},on:{blur:e.updateDivisionDepartments},model:{value:e.currentAddJob.jobDivision,callback:function(t){e.$set(e.currentAddJob,"jobDivision",t)},expression:"currentAddJob.jobDivision"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.currentDivisionDepartments,label:"Участок",color:e.subSystem.primaryColor,"no-data-text":"Участок не найден",autocomplete:""},model:{value:e.currentAddJob.jobDepartment,callback:function(t){e.$set(e.currentAddJob,"jobDepartment",t)},expression:"currentAddJob.jobDepartment"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Должность",color:e.subSystem.primaryColor},model:{value:e.currentAddJob.jobName,callback:function(t){e.$set(e.currentAddJob,"jobName",t)},expression:"currentAddJob.jobName"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Табельный",color:e.subSystem.primaryColor},model:{value:e.currentAddJob.jobPersonnelNumber,callback:function(t){e.$set(e.currentAddJob,"jobPersonnelNumber",t)},expression:"currentAddJob.jobPersonnelNumber"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.closeAddJobDialog(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.saveAddJobDialog(t)}}},[e._v("Добавить\n        ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.editPatientDialog.show,callback:function(t){e.$set(e.editPatientDialog,"show",t)},expression:"editPatientDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Редактировать "),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"ФИО",color:e.subSystem.primaryColor},model:{value:e.currentEditPatient.fio,callback:function(t){e.$set(e.currentEditPatient,"fio",t)},expression:"currentEditPatient.fio"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Паспорт",color:e.subSystem.primaryColor},model:{value:e.currentEditPatient.passport,callback:function(t){e.$set(e.currentEditPatient,"passport",t)},expression:"currentEditPatient.passport"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Телефон",color:e.subSystem.primaryColor},model:{value:e.currentEditPatient.phone,callback:function(t){e.$set(e.currentEditPatient,"phone",t)},expression:"currentEditPatient.phone"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{mask:"##.##.####","return-masked-value":"",label:"Дата рождения",color:e.subSystem.primaryColor},model:{value:e.currentEditPatient.dateBirth,callback:function(t){e.$set(e.currentEditPatient,"dateBirth",t)},expression:"currentEditPatient.dateBirth"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-select",{attrs:{items:[{text:"Муж",value:!0},{text:"Жен",value:!1}],label:"Пол",autocomplete:"",color:e.subSystem.primaryColor},model:{value:e.currentEditPatient.sex,callback:function(t){e.$set(e.currentEditPatient,"sex",t)},expression:"currentEditPatient.sex"}})],1),e._v(" "),e.currentEditPatient.activeJob?a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Место работы",placeholder:"Нажмите кнопку «Работа»",color:e.subSystem.primaryColor,disabled:""},model:{value:e.currentEditPatient.activeJob.jobName,callback:function(t){e.$set(e.currentEditPatient.activeJob,"jobName",t)},expression:"currentEditPatient.activeJob.jobName"}})],1):e._e(),e._v(" "),e.currentEditPatient.activeJob?a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-btn",{attrs:{color:"red darken-2",icon:""},nativeOn:{click:function(t){e.openRemoveDialog(e.currentEditPatient.activeJob)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1)],1):e._e(),e._v(" "),e.currentEditPatient.activeJob?e._e():a("v-flex",{attrs:{sm12:"",md7:""}},[a("v-text-field",{attrs:{label:"Место работы",placeholder:"Нажмите кнопку «Работа»",color:e.subSystem.primaryColor,disabled:""}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.noEditPatientDialog(t)}}},[e._v("Закрыть")]),e._v(" "),e.currentEditPatient.activeJob?a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",color:e.subSystem.secondaryColor},nativeOn:{click:function(t){return e.openEditJobDialog(t)}},slot:"activator"},[e._v("Работа\n          ")]),e._v(" "),a("span",[e._v("Добавить работу")])],1):e._e(),e._v(" "),e.currentEditPatient.activeJob?e._e():a("v-tooltip",{attrs:{top:""}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",color:e.subSystem.secondaryColor},nativeOn:{click:function(t){return e.openAddJobDialog(t)}},slot:"activator"},[e._v("Работа\n          ")]),e._v(" "),a("span",[e._v("Редактировать работу")])],1),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesEditPatientDialog(t)}}},[e._v("Сохранить\n        ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:e.editJobDialog.show,callback:function(t){e.$set(e.editJobDialog,"show",t)},expression:"editJobDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Редактировать место работы для пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.companiesForSelect,label:"Предприятие",color:e.subSystem.primaryColor,"no-data-text":"Предприятие не найдено",autocomplete:""},on:{blur:e.updateCompanyDivisions},model:{value:e.currentEditJob.jobCompany,callback:function(t){e.$set(e.currentEditJob,"jobCompany",t)},expression:"currentEditJob.jobCompany"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.currentCompanyDivisions,label:"Цех",color:e.subSystem.primaryColor,"no-data-text":"Цех не найден",autocomplete:""},on:{blur:e.updateDivisionDepartments},model:{value:e.currentEditJob.jobDivision,callback:function(t){e.$set(e.currentEditJob,"jobDivision",t)},expression:"currentEditJob.jobDivision"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.currentDivisionDepartments,label:"Участок",color:e.subSystem.primaryColor,"no-data-text":"Участок не найден",autocomplete:""},model:{value:e.currentEditJob.jobDepartment,callback:function(t){e.$set(e.currentEditJob,"jobDepartment",t)},expression:"currentEditJob.jobDepartment"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Должность",color:e.subSystem.primaryColor},model:{value:e.currentEditJob.jobName,callback:function(t){e.$set(e.currentEditJob,"jobName",t)},expression:"currentEditJob.jobName"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Табельный",color:e.subSystem.primaryColor},model:{value:e.currentEditJob.jobPersonnelNumber,callback:function(t){e.$set(e.currentEditJob,"jobPersonnelNumber",t)},expression:"currentEditJob.jobPersonnelNumber"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.closeEditJobDialog(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.saveEditJobDialog(t)}}},[e._v("Сохранить\n        ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.removeDialog.show,callback:function(t){e.$set(e.removeDialog,"show",t)},expression:"removeDialog.show"}},[a("v-card",[e.currentRemoveItem.jobName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Вы точно хотите удалить место работы "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentRemoveItem.jobName)+"»")])])]):e._e(),e._v(" "),e.currentRemoveItem.fio?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Вы точно хотите удалить "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentRemoveItem.fio)+"»")])])]):e._e(),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.secondaryColor,flat:""},nativeOn:{click:function(t){return e.noRemoveDialog(t)}}},[e._v("Нет")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red darken-2"},nativeOn:{click:function(t){return e.yesRemoveDialog(t)}}},[e._v("Да")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.addMedosDialog.show,callback:function(t){e.$set(e.addMedosDialog,"show",t)},expression:"addMedosDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Зарегистрировать "),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))]),e._v(" на мед. осмотр?")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-select",{attrs:{items:e.medosTypes,label:"Тип мед. осмотра",autocomplete:"",color:e.subSystem.primaryColor},model:{value:e.currentMedos.medosType,callback:function(t){e.$set(e.currentMedos,"medosType",t)},expression:"currentMedos.medosType"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.closeRegisterMedicalExamination(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.saveRegisterMedicalExamination(t)}}},[e._v("\n          Зарегистрировать\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(h,x,!1,function(e){a("pHTf")},null,null).exports,f="http://"+window.location.hostname+":3001",y={data:function(){return{currentUser:{},harms:[],harmsForSelect:[],patientQuery:{},patients:[],currentEditPatient:{},currentMedos:{},currentPatientParameters:{height:"",weight:"",pulse:"",ad:{sys:"",dia:""},dynamometry:{left:"",right:""},skin:{norma:!0,pathology:""},cigarettes:"",alcohol:"",comment:""},currentPatientHarms:[],currentAddHarm:{},currentRemoveItem:{},editHarmsDialog:{show:!1},addNewHarmDialog:{show:!1},removeDialog:{show:!1},editParametersDialog:{show:!1},appointmentsDialog:{show:!1},appointmentsForHarms:{doctors:{mustDoctors:[],addonDoctors:[]},exams:{mustExams:[],addonExams:[]}},showAddonAppointments:!1,skinNorma:[{value:!0,text:"норма"},{value:!1,text:"патология"}],skinPathologies:["Бледность кожи или видимых слизистых","Цианоз кожи или видимых слизистых","Иктеричность склер или кожи","Имеются сыпные элементы или гиперпигментация кожи","Имеются отеки подкожнкой клетчатки","Имеется гиперемия кожи или видимых слизистых"],alcoholTypes:["1 - нет","2 - умеренно","3 - злоупотребляет"],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"purple darken-3",secondaryColor:"orange darken-3"}}},mounted:function(){this.getCurrentUser(),this.getAllHarms()},methods:{openEditHarmsDialog:function(e){this.currentEditPatient=e,this.currentMedos=e.activeMedos,this.currentMedos.medosHarms.length>0&&(this.currentPatientHarms=this.currentMedos.medosHarms),this.editHarmsDialog.show=!0},noEditHarmsDialog:function(){this.editHarmsDialog.show=!1},yesEditHarmsDialog:function(){var e=this;this.currentMedos.medosHarms=this.currentPatientHarms;var t=[],a=[],r=[],s=[];this.currentMedos.medosHarms.map(function(o){var n=e.harms.find(function(e){return e.harmId===o.harmId});n.doctors.map(function(e){e.mustDoctors.map(function(e){t.push(e)}),e.addonDoctors.map(function(e){a.push(e)})}),n.exams.map(function(e){e.mustExams.map(function(e){r.push(e)}),e.addonExams.map(function(e){s.push(e)})})}),this.currentEditPatient.sex||t.push({doctorId:12,doctorName:"Гинеколог",doctorRoom:"113 кабинет"});var o=this.dateToIso(this.currentEditPatient.dateBirth);this.calculateAge(o)>=42&&r.push({examId:46,examName:"Маммография",examRoom:"416 кабинет"}),t.push({doctorId:1,doctorName:"Терапевт",doctorRoom:"104/105 кабинет"});var n=t.filter(function(e,t,a){return a.findIndex(function(t){return t.doctorId===e.doctorId})===t}),i=a.filter(function(e,t,a){return a.findIndex(function(t){return t.doctorId===e.doctorId})===t}),c=r.filter(function(e,t,a){return a.findIndex(function(t){return t.examId===e.examId})===t}),d=s.filter(function(e,t,a){return a.findIndex(function(t){return t.examId===e.examId})===t});l.a.put(f+"/api/v1/patient/"+this.currentEditPatient._id+"/harms/",{medosHarms:this.currentMedos.medosHarms,medosDoctors:{mustDoctors:n,addonDoctors:i},medosExams:{mustExams:c,addonExams:d}},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.currentEditPatient={},e.currentPatientHarms={},e.currentMedos={},e.editHarmsDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})},openAddHarmDialog:function(){this.addNewHarmDialog.show=!0},noAddHarmDialog:function(){this.addNewHarmDialog.show=!1,this.currentAddHarm={}},yesAddHarmDialog:function(){this.currentPatientHarms.push(this.currentAddHarm),this.addNewHarmDialog.show=!1,this.currentAddHarm={}},openRemoveDialog:function(e){this.currentRemoveItem=e,this.removeDialog.show=!0},noRemoveDialog:function(){this.removeDialog.show=!1,this.currentRemoveItem={}},yesRemoveDialog:function(){var e=this;this.currentRemoveItem.harmName?this.currentPatientHarms.forEach(function(t,a){t===e.currentRemoveItem&&e.currentPatientHarms.splice(a,1)}):(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что удалять."),this.removeDialog.show=!1,this.currentRemoveItem={}},openEditParametersDialog:function(e){this.currentEditPatient=e,this.currentMedos=e.activeMedos,this.currentMedos.medosParameters&&(this.currentPatientParameters=this.currentMedos.medosParameters),this.editParametersDialog.show=!0},noEditParametersDialog:function(){this.editParametersDialog.show=!1},yesEditParametersDialog:function(){var e=this;this.editParametersDialog.show=!1,l.a.put(f+"/api/v1/patient/"+this.currentEditPatient._id+"/parameters/",{medosParameters:this.currentPatientParameters},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.currentEditPatient.activeMedos.medosParameters=e.currentPatientParameters,e.currentMedos={},e.currentEditPatient={},e.currentPatientParameters={},e.editHarmsDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})},openAppointmentsDialog:function(e){this.currentEditPatient=e,this.currentMedos=e.activeMedos;var t=this.currentMedos.medosHarms,a=this.currentMedos.medosParameters;t.length<1?this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Не введены вредности",show:!0}:""===a.height||""===a.weight||""===a.pulse||""===a.ad.sys||""===a.ad.dia||""===a.cigarettes||""===a.alcohol||""===a.dynamometry.left||""===a.dynamometry.right?this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Не введены параметры",show:!0}:this.appointmentsDialog.show=!0},noAppointmentsDialog:function(){this.appointmentsDialog.show=!1},printAppointmentsDialog:function(){var e=this.$refs.print.innerHTML,t=window.open("","Print","height=600,width=800");return t.document.write("<html><head><title>Print</title>"),t.document.write("</head><body >"),t.document.write(e),t.document.write("</body></html>"),t.document.close(),t.focus(),t.print(),t.close(),!0},getPatients:function(){var e=this,t={};t.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,t.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,t.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(f+"/api/v1/patient/medos/"+t.lastName+"/"+t.firstName+"/"+t.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.show=!1,e.patients=t.data.patients,e.patients.forEach(function(t){t.dateBirth=e.dateFromIso(t.dateBirth)})):(e.patients=[],e.snackBar.show=!0,e.snackBar.color="yellow accent-3 black--text",e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})},getAllHarms:function(){var e=this;l.a.get(f+"/api/v1/harms",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){var a=t.data;!0===a.success?(e.harms=a.harms,e.snackBar.show=!0,e.snackBar.color="green darken-1 white--text",e.snackBar.message="Вредности загружены",e.snackBar.timeout=1e3,e.harmsForSelect=e.harms.map(function(e){return{value:{harmId:e.harmId,harmName:e.harmName,doctors:e.doctors,exams:e.exams},text:e.harmName}})):(e.snackBar.show=!0,e.snackBar.color="red darken-1 white--text",e.snackBar.message="Вредностей не найдено",e.snackBar.timeout=5e3)}).catch(function(t){e.errorHandler(t)})},getCurrentUser:function(){var e=this;l.a.get(f+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;e.currentUser=a}).catch(function(t){e.errorHandler(t)})},dateFromIso:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},dateToIso:function(e){return new Date(e.replace(/(\d{2})\.(\d{2})\.(\d{4})/,"$3-$2-$1"))},uniqueArray:function(e){var t={};return e.filter(function(e){return!t.hasOwnProperty(e)&&(t[e]=!0)})},calculateAge:function(e){var t=Date.now()-e.getTime(),a=new Date(t);return Math.abs(a.getUTCFullYear()-1970)},errorHandler:function(e){var t=e.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===t&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=e.response.data.message}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:e.subSystem.primaryColor,subtitle:"Доврачебный кабинет",currentUser:e.currentUser}}),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[e._v("Поиск пациентов")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.lastName,callback:function(t){e.$set(e.patientQuery,"lastName",t)},expression:"patientQuery.lastName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.firstName,callback:function(t){e.$set(e.patientQuery,"firstName",t)},expression:"patientQuery.firstName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.middleName,callback:function(t){e.$set(e.patientQuery,"middleName",t)},expression:"patientQuery.middleName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){return e.getPatients(t)}}},[e._v("Найти")])],1)],1),e._v(" "),e.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:e.patients,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.fio))]),e._v(" "),a("td",[e._v(e._s(t.item.dateBirth))]),e._v(" "),a("td",[e._v(e._s(t.item.sex?"Муж":"Жен"))]),e._v(" "),a("td",{attrs:{width:"211px"}},[a("v-tooltip",{attrs:{top:"",color:e.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){e.openEditHarmsDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment_late")])],1),e._v(" "),a("span",[e._v("Указать вредности пациента")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:e.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openEditParametersDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment")])],1),e._v(" "),a("span",[e._v("Ввести параметры пациента")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:"green darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"green darken-2",icon:""},nativeOn:{click:function(a){e.openAppointmentsDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment_turned_in")])],1),e._v(" "),a("span",[e._v("Распечатать бегунок")])],1)],1)])]}}])}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("app-footer",{attrs:{subsystem:e.subSystem.primaryColor,currentUser:e.currentUser}}),e._v(" "),a("v-snackbar",{attrs:{timeout:e.snackBar.timeout,right:"right",color:e.snackBar.color},model:{value:e.snackBar.show,callback:function(t){e.$set(e.snackBar,"show",t)},expression:"snackBar.show"}},[e._v("\n    "+e._s(e.snackBar.message)+"\n  ")]),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.editHarmsDialog.show,callback:function(t){e.$set(e.editHarmsDialog,"show",t)},expression:"editHarmsDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Добавить вредности для пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){return e.openAddHarmDialog(t)}}},[e._v("\n              Добавить вредность\n            ")])],1)],1)],1),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.currentPatientHarms.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:e.currentPatientHarms,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.harmName))]),e._v(" "),a("td",{attrs:{width:"50px"}},[a("v-tooltip",{attrs:{top:"",color:"red darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-2",icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1),e._v(" "),a("span",[e._v("Удалить вредность")])],1)],1)])]}}])}):e._e()],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.noEditHarmsDialog(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesEditHarmsDialog(t)}}},[e._v("Сохранить\n        ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.addNewHarmDialog.show,callback:function(t){e.$set(e.addNewHarmDialog,"show",t)},expression:"addNewHarmDialog.show"}},[a("v-card",[e.currentAddHarm?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Добавить новую вредность")])]):e._e(),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-select",{attrs:{dense:"","auto-grow":"",items:e.harmsForSelect,label:"Вредность",autocomplete:"",color:e.subSystem.primaryColor},model:{value:e.currentAddHarm,callback:function(t){e.currentAddHarm=t},expression:"currentAddHarm"}})],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.noAddHarmDialog(t)}}},[e._v("Нет")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesAddHarmDialog(t)}}},[e._v("Да")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.removeDialog.show,callback:function(t){e.$set(e.removeDialog,"show",t)},expression:"removeDialog.show"}},[a("v-card",[e.currentRemoveItem.harmName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Вы точно хотите удалить вредность "),a("br"),e._v(" "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentRemoveItem.harmName)+"»")])])]):e._e(),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"red darken-2",flat:""},nativeOn:{click:function(t){return e.noRemoveDialog(t)}}},[e._v("Нет")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red darken-2"},nativeOn:{click:function(t){return e.yesRemoveDialog(t)}}},[e._v("Да")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:e.editParametersDialog.show,callback:function(t){e.$set(e.editParametersDialog,"show",t)},expression:"editParametersDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Ввести параметры для пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Рост",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.height,callback:function(t){e.$set(e.currentPatientParameters,"height",t)},expression:"currentPatientParameters.height"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Вес",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.weight,callback:function(t){e.$set(e.currentPatientParameters,"weight",t)},expression:"currentPatientParameters.weight"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[e.currentPatientParameters.ad?a("v-text-field",{attrs:{label:"AD.SYS",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.ad.sys,callback:function(t){e.$set(e.currentPatientParameters.ad,"sys",t)},expression:"currentPatientParameters.ad.sys"}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[e.currentPatientParameters.ad?a("v-text-field",{attrs:{label:"AD.DIA",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.ad.dia,callback:function(t){e.$set(e.currentPatientParameters.ad,"dia",t)},expression:"currentPatientParameters.ad.dia"}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Пульс",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.pulse,callback:function(t){e.$set(e.currentPatientParameters,"pulse",t)},expression:"currentPatientParameters.pulse"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[e.currentPatientParameters.dynamometry?a("v-text-field",{attrs:{label:"Динам-ия (лев)",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.dynamometry.left,callback:function(t){e.$set(e.currentPatientParameters.dynamometry,"left",t)},expression:"currentPatientParameters.dynamometry.left"}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[e.currentPatientParameters.dynamometry?a("v-text-field",{attrs:{label:"Динам-ия (прав)",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.dynamometry.right,callback:function(t){e.$set(e.currentPatientParameters.dynamometry,"right",t)},expression:"currentPatientParameters.dynamometry.right"}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Сигареты",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.cigarettes,callback:function(t){e.$set(e.currentPatientParameters,"cigarettes",t)},expression:"currentPatientParameters.cigarettes"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.alcoholTypes,label:"Алкоголь",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.alcohol,callback:function(t){e.$set(e.currentPatientParameters,"alcohol",t)},expression:"currentPatientParameters.alcohol"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[e.currentPatientParameters.skin?a("v-select",{attrs:{label:"Кожа",items:e.skinNorma,color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.skin.norma,callback:function(t){e.$set(e.currentPatientParameters.skin,"norma",t)},expression:"currentPatientParameters.skin.norma"}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md9:""}},[e.currentPatientParameters.skin?a("v-select",{attrs:{label:"Вид паталогии",items:e.skinPathologies,color:e.subSystem.primaryColor,disabled:e.currentPatientParameters.skin.norma},model:{value:e.currentPatientParameters.skin.pathology,callback:function(t){e.$set(e.currentPatientParameters.skin,"pathology",t)},expression:"currentPatientParameters.skin.pathology"}}):e._e()],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Анамнез",color:e.subSystem.primaryColor},model:{value:e.currentPatientParameters.comment,callback:function(t){e.$set(e.currentPatientParameters,"comment",t)},expression:"currentPatientParameters.comment"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.noEditParametersDialog(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesEditParametersDialog(t)}}},[e._v("Сохранить\n        ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.appointmentsDialog.show,callback:function(t){e.$set(e.appointmentsDialog,"show",t)},expression:"appointmentsDialog.show"}},[a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:"",md7:""}},[a("span",{staticClass:"headline"},[e._v("\n          Назначения для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])])]),e._v(" "),a("v-flex",{attrs:{sm12:"",md5:""}},[a("v-checkbox",{staticClass:"right",attrs:{label:"Показывать доп. назначения"},model:{value:e.showAddonAppointments,callback:function(t){e.showAddonAppointments=t},expression:"showAddonAppointments"}})],1)],1),e._v(" "),e.currentEditPatient.activeMedos&&e.currentEditPatient.activeMedos.medosDoctors&&e.currentEditPatient.activeMedos.medosExams?a("v-card-text",{ref:"print"},[a("v-list",{attrs:{"two-line":"",subheader:""}},[a("v-subheader",[e._v("Доктора "),e.showAddonAppointments?a("span",[e._v("- (обязательные)")]):e._e()]),e._v(" "),e._l(e.currentEditPatient.activeMedos.medosDoctors.mustDoctors,function(t){return a("v-list-tile",{key:t.doctorId},[a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.doctorName))]),e._v(" "),a("v-list-tile-sub-title",[e._v("Кабинет 110")])],1)],1)}),e._v(" "),e.showAddonAppointments?a("div",[a("v-divider"),e._v(" "),a("v-subheader",[e._v("Доктора "),e.showAddonAppointments?a("span",[e._v("- (дополнительные)")]):e._e()]),e._v(" "),e._l(e.currentEditPatient.activeMedos.medosDoctors.addonDoctors,function(t){return a("v-list-tile",{key:t.doctorId},[a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.doctorName))]),e._v(" "),a("v-list-tile-sub-title",[e._v("Кабинет 110")])],1)],1)})],2):e._e(),e._v(" "),a("v-divider"),e._v(" "),a("v-subheader",[e._v("Обследования "),e.showAddonAppointments?a("span",[e._v("- (обязательные)")]):e._e()]),e._v(" "),e._l(e.currentEditPatient.activeMedos.medosExams.mustExams,function(t){return a("v-list-tile",{key:t.examId},[a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.examName))]),e._v(" "),a("v-list-tile-sub-title",[e._v("Кабинет 110")])],1)],1)}),e._v(" "),e.showAddonAppointments?a("div",[a("v-divider"),e._v(" "),a("v-subheader",[e._v("Обследования "),e.showAddonAppointments?a("span",[e._v("- (дополнительные)")]):e._e()]),e._v(" "),e._l(e.currentEditPatient.activeMedos.medosExams.addonExams,function(t){return a("v-list-tile",{key:t.doctorId},[a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.examName))]),e._v(" "),a("v-list-tile-sub-title",[e._v("Кабинет 110")])],1)],1)})],2):e._e()],2)],1):e._e(),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.secondaryColor},nativeOn:{click:function(t){return e.printAppointmentsDialog(t)}}},[e._v("Печать\n        ")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.noAppointmentsDialog(t)}}},[e._v("Закрыть\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(y,_,!1,function(e){a("p1bC")},null,null).exports,k="http://"+window.location.hostname+":3001",R={data:function(){return{currentUser:{username:"",password:"",fio:"",roles:{superuser:!1,medos:{receptionist:!1,premedical:!1,functionalDiagnostics:!1,doctor:!1,admin:!1},radiography:{assistant:!1,admin:!1},laboratory:{assistant:!1,admin:!1},vaccination:{assistant:!1,admin:!1}}},patientQuery:{},patients:[],currentUserDoctor:{id:"",name:""},currentEditPatient:{activeMedos:{},bloodResults:[],urineClinicalResults:[]},currentDoctorResult:{doctorDiagnosis:{}},currentExamResult:{},currentOphthalmologistResult:{noCorrection:{od:"",os:""},correction:{od:{sph:"",cyl:"",ax:""},os:{sph:"",cyl:"",ax:""}},withCorrection:{od:"",os:""}},sortedBloodResult:{},sortedUrineResult:{},sortedSmearResult:{},sortedRwResult:{},sortedRgResult:{},makeAppointmentDialog:{show:!1,showBlood:!1,showUrine:!1,showInfo:!1,showSmear:!1,showRw:!1,edit:!1},examsDialog:{ocularFundus:!1,intraocularPressure:!1,refractometry:!1,fields:!1,colorBlindness:!1},conclusionsDialog:{show:!1},archiveMedosDialog:{show:!1},ophthalmologistExams:{ocularFundus:!1,intraocularPressure:!1,refractometry:!1,fields:!1,colorBlindness:!1},examsForConclusions:[1,19,20,21,32,34,38,46],doctorConclusions:["Годен","в очках","без высоты","не более 50% ПЭВМ","без физич. перегрузок","без ГЗА","без права найма","без ДЭУ","с подъемом тяжестей не более 7кг","без световой среды","Не годен"],doctorDetectabilities:[{value:!0,text:"Первичный"},{value:!1,text:"Повторный"}],fieldResults:[{value:1,text:"Норма"},{value:2,text:"Сужено"},{value:3,text:"Скотома"},{value:4,text:"Гемианопсия"}],colorBlindnessResults:[{value:1,text:"Норма"},{value:2,text:"Дихромазия"},{value:3,text:"Трихромазия"}],smearLeucocytes:[{value:1,text:"1 - Единичные"},{value:2,text:"2 - до 25"},{value:3,text:"3 - до 50"},{value:4,text:"4 - до 100"},{value:5,text:"5 - выше 100"}],rwTypes:[{value:1,text:"1 - Отрицительный"},{value:2,text:"2 - Положительный X"},{value:3,text:"3 - Положительный XX"},{value:4,text:"4 - Положительный XXX"},{value:5,text:"5 - Положительный XXXX"},{value:6,text:"6 - Гемолиз"},{value:7,text:"7 - Хилезная"},{value:8,text:"8 - Брак"}],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"purple darken-3",secondaryColor:"orange darken-3"}}},mounted:function(){this.getCurrentUser()},methods:{openExaminationDialog:function(e){var t=this;if(this.currentEditPatient=e,this.currentEditPatient.activeMedos.medosDoctors)if(0===this.currentEditPatient.bloodResults.length)this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"У пациента отсутствуют анализы крови.",show:!0};else if(0===this.currentEditPatient.urineClinicalResults.length)this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"У пациента отсутствуют анализы мочи.",show:!0};else{var a=this.currentEditPatient.bloodResults.sort(function(e,t){return new Date(t.bloodDate)-new Date(e.bloodDate)});this.sortedBloodResult=a[0];var r=this.currentEditPatient.urineClinicalResults.sort(function(e,t){return new Date(t.urineDate)-new Date(e.urineDate)});if(this.sortedUrineResult=r[0],this.currentEditPatient.smearResults.length>0){var s=this.currentEditPatient.smearResults.sort(function(e,t){return new Date(t.smearDate)-new Date(e.smearDate)});this.sortedSmearResult=s[0]}if(this.currentEditPatient.rwResults.length>0){var o=this.currentEditPatient.rwResults.sort(function(e,t){return new Date(t.rwDate)-new Date(e.rwDate)});this.sortedRwResult=o[0]}var n=this.currentEditPatient.rgResults.sort(function(e,t){return new Date(t.rgDate)-new Date(e.rgDate)});if(this.sortedRgResult=n[0],this.currentEditPatient.activeMedos.medosDoctors.mustDoctors.some(function(e){return e.doctorId===t.currentUserDoctor.id})||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser)this.currentEditPatient.activeMedos.medosDoctorResults.some(function(e){return e.doctorId===t.currentUserDoctor.id})?(this.makeAppointmentDialog={show:!0,showBlood:!1,showUrine:!1,showSmear:!1,showRw:!1,showInfo:!0,edit:!0},this.currentDoctorResult=this.currentEditPatient.activeMedos.medosDoctorResults.find(function(e){return e.doctorId===t.currentUserDoctor.id}),this.currentDoctorResult.doctorDiagnosis||(this.currentDoctorResult.doctorDiagnosis={diagnosis:"",detectability:null,diagnosisComment:""}),this.currentDoctorResult.doctorSpecial&&4===this.currentUserDoctor.id&&(this.currentOphthalmologistResult=this.currentDoctorResult.doctorSpecial)):this.makeAppointmentDialog={show:!0,showBlood:!1,showUrine:!1,showSmear:!1,showRw:!1,showInfo:!0,edit:!1};else this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Этому пациенту не требуется осмотр",show:!0};if(4===this.currentUserDoctor.id){var i=this.currentEditPatient.activeMedos.medosExams.mustExams;this.ophthalmologistExams.ocularFundus=i.some(function(e){return 19===e.examId}),this.ophthalmologistExams.fields=i.some(function(e){return 20===e.examId}),this.ophthalmologistExams.intraocularPressure=i.some(function(e){return 21===e.examId}),this.ophthalmologistExams.refractometry=i.some(function(e){return 32===e.examId}),this.ophthalmologistExams.colorBlindness=i.some(function(e){return 38===e.examId})}}else this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Пациент не был в доврачебном кабинете.",show:!0}},noExaminationDialog:function(){this.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showSmear:!1,showRw:!1,showInfo:!1,edit:!1},this.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]}},yesExaminationDialog:function(){var e=this,t=this.currentDoctorResult;4===this.currentUserDoctor.id&&(t.doctorSpecial=this.currentOphthalmologistResult),this.makeAppointmentDialog.edit?0!==this.currentUserDoctor.id?l.a.put(k+"/api/v1/patient/"+this.currentEditPatient._id+"/doctorResult/"+t._id+"/",{doctorResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3,0===e.currentEditPatient.activeMedos.medosExamResults.length&&(e.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showSmear:!1,showRw:!1,showInfo:!1,edit:!1},e.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]})):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)}):this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Вы не врач",show:!0}:(t.doctorId=this.currentUserDoctor.id,0!==this.currentUserDoctor.id?l.a.post(k+"/api/v1/patient/"+this.currentEditPatient._id+"/doctorResult/",{doctorResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3,0===e.currentEditPatient.activeMedos.medosExamResults.length&&(e.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showSmear:!1,showRw:!1,showInfo:!1,edit:!1},e.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]})):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)}):this.snackBar={color:"red darken-2 white--text",timeout:5e3,message:"Вы не врач",show:!0}),this.currentEditPatient.activeMedos.medosExamResults.forEach(function(t){void 0===t._id?l.a.post(k+"/api/v1/patient/"+e.currentEditPatient._id+"/examResult/",{examResult:t},{headers:{Authorization:u.getAuthenticationHeader(e)}}).then(function(t){t.data.success?(e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3,e.getMedosPatients(),e.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showSmear:!1,showRw:!1,showInfo:!1,edit:!1},e.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]}):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3)}).catch(function(t){e.errorHandler(t)}):l.a.put(k+"/api/v1/patient/"+e.currentEditPatient._id+"/examResult/"+t._id,{examResult:t},{headers:{Authorization:u.getAuthenticationHeader(e)}}).then(function(t){t.data.success?(e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3,e.getMedosPatients(),e.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showSmear:!1,showRw:!1,showInfo:!1,edit:!1},e.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]}):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3)}).catch(function(t){e.errorHandler(t)})})},openArchiveMedosDialog:function(){this.archiveMedosDialog.show=!0},noArchiveMedosDialog:function(){this.archiveMedosDialog.show=!1},yesArchiveMedosDialog:function(){var e=this,t=this.currentEditPatient.activeMedos;l.a.post(k+"/api/v1/patient/"+this.currentEditPatient._id+"/medosFinal/",{medosResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3,e.archiveMedosDialog.show=!1,e.makeAppointmentDialog={show:!1,showBlood:!1,showUrine:!1,showSmear:!1,showRw:!1,showInfo:!1,edit:!1},e.currentEditPatient={activeMedos:{},bloodResults:[],urineClinicalResults:[]}):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})},openExamDialog:function(e){var t=this.currentEditPatient.activeMedos.medosExamResults;switch(e){case"ocularFundus":t.some(function(e){return 19===e.examId})?this.currentExamResult=t.find(function(e){return 19===e.examId}):this.currentExamResult={examId:19,examResult:"ДЗН бледно-розовый, границы четкие, эскавация физиологическая, ход и калибр сосудов не изменен. Очаговой патологии нет."};break;case"fields":t.some(function(e){return 20===e.examId})?this.currentExamResult=t.find(function(e){return 20===e.examId}):this.currentExamResult={examId:20,examResult:{od:1,os:1}};break;case"intraocularPressure":t.some(function(e){return 21===e.examId})?this.currentExamResult=t.find(function(e){return 21===e.examId}):this.currentExamResult={examId:21,examResult:{od:"",os:""}};break;case"refractometry":t.some(function(e){return 32===e.examId})?this.currentExamResult=t.find(function(e){return 32===e.examId}):this.currentExamResult={examId:32,examResult:{od:{},os:{}}};break;case"colorBlindness":t.some(function(e){return 38===e.examId})?this.currentExamResult=t.find(function(e){return 38===e.examId}):this.currentExamResult={examId:38,examResult:1}}this.examsDialog[e]=!0},noExamDialog:function(e){this.examsDialog[e]=!1,this.currentExamResult={}},yesExamDialog:function(e){var t=this.currentEditPatient.activeMedos.medosExamResults;switch(e){case"ocularFundus":t.some(function(e){return 19===e.examId})?this.currentExamResult={}:t.push(this.currentExamResult);break;case"fields":t.some(function(e){return 20===e.examId})?this.currentExamResult={}:t.push(this.currentExamResult);break;case"intraocularPressure":t.some(function(e){return 21===e.examId})?this.currentExamResult={}:t.push(this.currentExamResult);break;case"refractometry":t.some(function(e){return 32===e.examId})?this.currentExamResult={}:t.push(this.currentExamResult);break;case"colorBlindness":t.some(function(e){return 38===e.examId})?this.currentExamResult={}:t.push(this.currentExamResult)}this.examsDialog[e]=!1},openConclusionsDialog:function(){this.conclusionsDialog.show=!0},noConclusionsDialog:function(){this.conclusionsDialog.show=!1},getMedosPatients:function(){var e=this,t={};t.lastName=void 0===this.patientQuery.lastName||""===this.patientQuery.lastName?" ":this.patientQuery.lastName,t.firstName=void 0===this.patientQuery.firstName||""===this.patientQuery.firstName?" ":this.patientQuery.firstName,t.middleName=void 0===this.patientQuery.middleName||""===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(k+"/api/v1/patient/medos/"+t.lastName+"/"+t.firstName+"/"+t.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.show=!1,e.patients=t.data.patients,e.patients.forEach(function(t){t.dateBirth=e.dateFromIso(t.dateBirth)})):(e.patients=[],e.snackBar.show=!0,e.snackBar.color="yellow accent-3 black--text",e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})},getCurrentUser:function(){var e=this;l.a.get(k+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;switch(e.currentUser=a,e.currentDoctorResult.doctorComplaints="Нет",e.currentUser.roles.medos.admin||e.currentUser.roles.superuser?e.currentUserDoctor.id=1:e.currentUserDoctor.id=e.currentUser.roles.medos.doctor,e.currentUser.roles.medos.doctor){case 1:e.currentUserDoctor.name="терапевт",e.currentDoctorResult.doctorStatus="Кожные покровы и видимые слизистые обычной окраски. Язык чистый. Дыхание везикулярное, хрипов нет. Тоны сердца ясные, ритм правильный, Живот мягкий, безболезненный. Отеков нет.";break;case 2:e.currentUserDoctor.name="оториноларинголог",e.currentDoctorResult.doctorStatus="Слизистая носа розовая, носовые ходы свободные. Миндалины не увеличены, слизистая глотки розовая, чистая, Слизистая гортани розовая, голосовые связки серые, подвижные, голос чистый. Уши : слуховой проход свободный, барабанная перепонка не изменена. Шепотная речь 6м справа, 6м слева. Вестибулярных нарушений нет.";break;case 3:e.currentUserDoctor.name="дерматовенеролог",e.currentDoctorResult.doctorStatus="Внешний осмотр: кожные покровы  чистые, обычной окраски. Лимфоузлы не увеличены во всех группах. Наружные половые органы: видимые слизистые бледно розовой окраски. Перианальная область без специфических высыпаний.";break;case 4:e.currentUserDoctor.name="офтальмолог",e.currentDoctorResult.doctorStatus="Положение век и рост ресниц правильное. Движение глаз в полном объеме. Коньюнктива розовая, Роговица, прозрачная. Передняя камера средней глубины. Радужка структурная, пигментная кайма сохранена. Зрачок не изменен. Хрусталик и стекловидное тело прозрачны.";break;case 5:e.currentUserDoctor.name="хирург",e.currentDoctorResult.doctorStatus="Шея, голова, грудная клетка без патологии. Физиологические изгибы и подвижность сохранены. Лимфоузлы без патологии. Живот мягкий, безболезненный. Остов таза симметричный, наружные половые органы без патологии. Ректальное пальцевое исследование: сфинктер в тонусе, патологии в просвете нет. Верхние конечности без патологии, нижние конечности без патологии , пульсация периферических сосудов сохранена.";break;case 6:e.currentUserDoctor.name="невролог",e.currentDoctorResult.doctorStatus="Наружный осмотр: норма. Высшая нервная деятельность: норма. Черепно-мозговая иннервация: норма. Сухожильные рефлексы: живые. Чувствительность кожи: норма. Мануальное исследование: патологии нет. Поза Ромберга: устойчивость. Пальце-носовая проба: четкое попадание. Походка: не изменена.";break;case 7:e.currentUserDoctor.name="стоматолог",e.currentDoctorResult.doctorStatus="Лицо симметрично, кожные покровы не изменены. Движения в височно-нижнечелюстном суставе в полном объеме. Слизистая полости рта влажная, гладкая, чистая. Области выхода протоков слюнных желез не изменены. Край десен имеет бледно-розовую окраску и плотно прилегает к шейкам зубов. Зубной ряд полный. Съемных зубных протезов нет.";break;case 12:e.currentUserDoctor.name="гинеколог",e.currentDoctorResult.doctorStatus="Наружные половые органы развиты правильно. Влагалище, своды без патологии. Шейка матки без патологии. Тело матки не увеличено, правильной формы, положение физиологическое. Цервикальный канал закрыт, придатки не пальпируются. Выделения скудные, без цвета и неприятного запаха. Пальцевое исследование прямой кишки – патологии в малом тазу нет. Исследование молочных желез: симметричные, окраска, соски, консистенция обычные.";break;default:e.currentUserDoctor.name="терапевт",e.currentDoctorResult.doctorStatus="Кожные покровы и видимые слизистые обычной окраски. Язык чистый. Дыхание везикулярное, хрипов нет. Тоны сердца ясные, ритм правильный, Живот мягкий, безболезненный. Отеков нет."}}).catch(function(t){e.errorHandler(t)})},getDoctorName:function(e){switch(e){case 1:return"Терапевт";case 2:return"Оториноалринголог";case 3:return"Дерматовенеролог";case 4:return"Офтальмолог";case 5:return"Хирург";case 6:return"Невролог";case 7:return"Стоматолог";case 12:return"Гинеколог"}},ifDoctorHasResult:function(e){return this.currentEditPatient.activeMedos.medosDoctorResults.some(function(t){return t.doctorId===e})},getDoctorResult:function(e){return this.currentEditPatient.activeMedos.medosDoctorResults.find(function(t){return t.doctorId===e})},getExamName:function(e){switch(e){case 1:return"Спирометрия";case 19:return"Глазное дно";case 20:return"Поля зрения";case 21:return"Глазное давление";case 32:return"Рефрактометрия";case 34:return"Аудиометрия";case 38:return"Цветоощущение";case 46:return"ЭКГ"}},ifExamHasResult:function(e){return this.currentEditPatient.activeMedos.medosExamResults.some(function(t){return t.examId===e})},getExamResult:function(e){return this.currentEditPatient.activeMedos.medosExamResults.find(function(t){return t.examId===e})},ifAnyExamNeeded:function(){var e=this.examsForConclusions;return this.currentEditPatient.activeMedos.medosExams.mustExams.some(function(t){return e.includes(t.examId)})},ifAllExamsComplete:function(){var e=this.examsForConclusions,t=this.currentEditPatient.activeMedos.medosExams.mustExams.filter(function(t){return e.includes(t.examId)}),a=this.currentEditPatient.activeMedos.medosExamResults;return t.every(function(e){return a.some(function(t){return t.examId===e.examId})})},ifAllDoctorsComplete:function(){var e=this.currentEditPatient.activeMedos.medosDoctors.mustDoctors.filter(function(e){return 1!==e.doctorId}),t=this.currentEditPatient.activeMedos.medosDoctorResults;return e.every(function(e){return t.some(function(t){return t.doctorId===e.doctorId})})},ifPatientNeedsSmear:function(e){return!!(e.smearResults&&e.smearResults.length>0)&&e.activeMedos.medosExams.mustExams.some(function(e){return 43===e.examId})},ifPatientNeedsRw:function(e){return!!(e.rwResults&&e.rwResults.length>0)&&e.activeMedos.medosExams.mustExams.some(function(e){return 42===e.examId})},dateFromIso:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(e){if(e.response){var t=e.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===t&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=e.response.data.message}}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:e.subSystem.primaryColor,subtitle:"Рабочее место "+e.currentUserDoctor.name+"а",currentUser:e.currentUser}}),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[e._v("Пациенты на мед. осмотре")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.primaryColor,label:"Фамилия",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getMedosPatients(t):null}},model:{value:e.patientQuery.lastName,callback:function(t){e.$set(e.patientQuery,"lastName",t)},expression:"patientQuery.lastName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.primaryColor,label:"Имя",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getMedosPatients(t):null}},model:{value:e.patientQuery.firstName,callback:function(t){e.$set(e.patientQuery,"firstName",t)},expression:"patientQuery.firstName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.primaryColor,label:"Отчество",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getMedosPatients(t):null}},model:{value:e.patientQuery.middleName,callback:function(t){e.$set(e.patientQuery,"middleName",t)},expression:"patientQuery.middleName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){return e.getMedosPatients(t)}}},[e._v("Найти")])],1)],1),e._v(" "),e.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{headers:[{text:"ФИО",sortable:!1},{text:"Осмотр",sortable:!1},{text:"Дата рождения",sortable:!1},{text:"Пол",sortable:!1},{text:"Действия",sortable:!1}],items:e.patients,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.fio))]),e._v(" "),a("td",[e._v(e._s(t.item.activeMedos.medosType.typeId))]),e._v(" "),a("td",[e._v(e._s(t.item.dateBirth))]),e._v(" "),a("td",[e._v(e._s(t.item.sex?"Муж":"Жен"))]),e._v(" "),a("td",[a("v-tooltip",{attrs:{top:"",color:e.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openExaminationDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment_turned_in")])],1),e._v(" "),a("span",[e._v("Завести прием")])],1)],1)])]}}])}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("app-footer",{attrs:{subsystem:e.subSystem.primaryColor,currentUser:e.currentUser}}),e._v(" "),a("v-snackbar",{attrs:{timeout:e.snackBar.timeout,right:"right",color:e.snackBar.color},model:{value:e.snackBar.show,callback:function(t){e.$set(e.snackBar,"show",t)},expression:"snackBar.show"}},[e._v("\n    "+e._s(e.snackBar.message)+"\n  ")]),e._v(" "),e.currentEditPatient.activeMedos.medosDoctors?a("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:e.makeAppointmentDialog.show,callback:function(t){e.$set(e.makeAppointmentDialog,"show",t)},expression:"makeAppointmentDialog.show"}},[a("v-card",[a("v-card-title",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm6:""}},[a("span",{staticClass:"headline"},[e._v("Прием врача-"+e._s(e.currentUserDoctor.name)+"а для пациента"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])])]),e._v(" "),a("v-flex",{attrs:{sm6:""}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:"","pl-1":"","pr-1":""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,dark:"",block:""},nativeOn:{click:function(t){e.makeAppointmentDialog.showInfo=!e.makeAppointmentDialog.showInfo}}},[e._v("\n                  Инфо\n                ")])],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:"","pl-1":"","pr-1":""}},[a("v-btn",{attrs:{color:"red darken-4",dark:"",block:""},nativeOn:{click:function(t){e.makeAppointmentDialog.showBlood=!e.makeAppointmentDialog.showBlood}}},[e._v("\n                  Кровь\n                ")])],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:"","pl-1":"","pr-1":""}},[a("v-btn",{attrs:{color:"yellow darken-4",dark:"",block:""},nativeOn:{click:function(t){e.makeAppointmentDialog.showUrine=!e.makeAppointmentDialog.showUrine}}},[e._v("\n                  Моча\n                ")])],1)],1),e._v(" "),4===this.currentUser.roles.medos.doctor?a("v-layout",{attrs:{row:"",wrap:""}},[e.ophthalmologistExams.ocularFundus?a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(t){e.openExamDialog("ocularFundus")}}},[e._v("\n                  Дно\n                ")])],1):e._e(),e._v(" "),e.ophthalmologistExams.fields?a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(t){e.openExamDialog("fields")}}},[e._v("\n                  Поля\n                ")])],1):e._e(),e._v(" "),e.ophthalmologistExams.intraocularPressure?a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(t){e.openExamDialog("intraocularPressure")}}},[e._v("\n                  ВГД\n                ")])],1):e._e(),e._v(" "),e.ophthalmologistExams.refractometry?a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(t){e.openExamDialog("refractometry")}}},[e._v("\n                  Реф\n                ")])],1):e._e(),e._v(" "),e.ophthalmologistExams.colorBlindness?a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(t){e.openExamDialog("colorBlindness")}}},[e._v("\n                  Цвет\n                ")])],1):e._e()],1):e._e(),e._v(" "),3===this.currentUser.roles.medos.doctor?a("v-layout",{attrs:{row:"",wrap:""}},[this.sortedSmearResult.smearDate?a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(t){e.makeAppointmentDialog.showSmear=!e.makeAppointmentDialog.showSmear}}},[e._v("\n                  Мазок на Gn\n                ")])],1):e._e(),e._v(" "),this.sortedRwResult.rwDate?a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",block:""},nativeOn:{click:function(t){e.makeAppointmentDialog.showRw=!e.makeAppointmentDialog.showRw}}},[e._v("\n                  Кровь на Rw\n                ")])],1):e._e()],1):e._e(),e._v(" "),1===this.currentUser.roles.medos.doctor||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-btn",{attrs:{color:e.ifAllDoctorsComplete()&&e.ifAllExamsComplete?"green darken-2":"light-blue darken-4",dark:"",block:""},nativeOn:{click:function(t){e.openConclusionsDialog()}}},[e._v("\n                  Годности\n                ")])],1)],1):e._e()],1)],1)],1),e._v(" "),a("v-card-text",[e.currentEditPatient.activeMedos?a("p",[a("strong",[e._v("Дата регистрации:")]),e._v(" "+e._s(e._f("formatDate")(e.currentEditPatient.activeMedos.medosRegistrationDate))+"\n        ")]):e._e(),e._v(" "),e.currentEditPatient.activeMedos.medosJob&&e.currentEditPatient.activeMedos.medosParameters&&e.makeAppointmentDialog.showInfo?a("p",[a("strong",[e._v("Цех:")]),e._v(" "+e._s(e.currentEditPatient.activeMedos.medosJob.jobDivision.jobDivisionName)+",\n          "),a("strong",[e._v("табельный номер:")]),e._v(" "+e._s(e.currentEditPatient.activeMedos.medosJob.jobPersonnelNumber)),a("br"),e._v(" "),a("strong",[e._v("Участок:")]),e._v(" "+e._s(e.currentEditPatient.activeMedos.medosJob.jobDepartment.jobDepartmentName)+",\n          "),a("strong",[e._v("профессия:")]),e._v(" "+e._s(e.currentEditPatient.activeMedos.medosJob.jobName)),a("br"),e._v(" "),a("strong",[e._v("Проффакторы:")]),e._v(" "),e._l(e.currentEditPatient.activeMedos.medosHarms,function(t){return e.currentEditPatient.activeMedos.medosHarms?a("span",{key:t.harmId},[e._v("\n            "+e._s(t.harmName)+"; ")]):e._e()}),a("br"),e._v(" "),e.currentEditPatient.activeMedos.medosParameters?a("span",[a("strong",[e._v("Анамнез:")]),e._v(" "+e._s(e.currentEditPatient.activeMedos.medosParameters.comment)),a("br")]):e._e(),e._v(" "),e.sortedRgResult?a("span",[a("strong",[e._v("Флюорография:")]),e._v(" "+e._s(e._f("formatDate")(e.sortedRgResult.rgDate))+", "+e._s(e.sortedRgResult.rgLocation.rgLocationComment)+"\n          ")]):e._e(),e._v(" "),e.sortedRgResult?e._e():a("span",[a("strong",[e._v("Флюорография: "),a("span",{staticClass:"red--text"},[e._v("отсутствует")])])])],2):e._e(),e._v(" "),e.makeAppointmentDialog.showInfo?a("p",[e.currentEditPatient.activeMedos.medosDoctors?a("strong",[e._v("Врачи:")]):e._e(),e._v(" "),e._l(e.currentEditPatient.activeMedos.medosDoctors.mustDoctors,function(t){return e.currentEditPatient.activeMedos.medosDoctors?a("span",{key:t.doctorId},[e._v("\n            "+e._s(t.doctorName)+"; ")]):e._e()}),a("br"),e._v(" "),e.currentEditPatient.activeMedos.medosExams?a("strong",[e._v("Обследования:")]):e._e(),e._v(" "),e._l(e.currentEditPatient.activeMedos.medosExams.mustExams,function(t){return e.currentEditPatient.activeMedos.medosExams?a("span",{key:t.examId},[e._v("\n            "+e._s(t.examName)+"; ")]):e._e()}),a("br")],2):e._e(),e._v(" "),e.sortedBloodResult.bloodResult&&e.makeAppointmentDialog.showBlood?a("p",[a("strong",[e._v("Клинический анализ крови:")]),e._v(" "+e._s(e._f("formatDate")(e.sortedBloodResult.bloodDate))+":"),a("br"),e._v("\n          Hb="+e._s(e.sortedBloodResult.bloodResult.hemoglobin)+", L="+e._s(e.sortedBloodResult.bloodResult.leucocytes)+", СОЭ="+e._s(e.sortedBloodResult.bloodResult.esr)+", Баз="+e._s(e.sortedBloodResult.bloodResult.basophils)+", Миел="+e._s(e.sortedBloodResult.bloodResult.myelocytes)+", Юные="+e._s(e.sortedBloodResult.bloodResult.young)+", Пал="+e._s(e.sortedBloodResult.bloodResult.sticks)+", Сегменты="+e._s(e.sortedBloodResult.bloodResult.segments)+", Лимф="+e._s(e.sortedBloodResult.bloodResult.lymphocytes)+", Моно="+e._s(e.sortedBloodResult.bloodResult.monocytes)+", Норм="+e._s(e.sortedBloodResult.bloodResult.normoblasts)+", ТЗН="+e._s(e.sortedBloodResult.bloodResult.tng))]):e._e(),e._v(" "),e.sortedBloodResult.bloodResult&&e.makeAppointmentDialog.showBlood?a("p",[a("strong",[e._v("Биохимический анализ крови:")]),e._v(" "+e._s(e._f("formatDate")(e.sortedBloodResult.bloodDate))+":"),a("br"),e._v("\n          Сахар="+e._s(e.sortedBloodResult.bloodResult.sugar)+", Холистерин="+e._s(e.sortedBloodResult.bloodResult.cholesterol)+",\n          Протромбин="+e._s(e.sortedBloodResult.bloodResult.prothrombin)+", МНО="+e._s(e.sortedBloodResult.bloodResult.inr)+"\n        ")]):e._e(),e._v(" "),e.sortedUrineResult.urineGeneral&&e.makeAppointmentDialog.showUrine?a("p",[a("strong",[e._v("Клинический анализ мочи:")]),e._v(" "+e._s(e._f("formatDate")(e.sortedUrineResult.urineDate))+":"),a("br"),e._v("\n          Цвет="+e._s(e.sortedUrineResult.urineGeneral.color.colorName)+", Реакция="+e._s(e.sortedUrineResult.urineGeneral.reaction.reactionName)+", Плотность="+e._s(e.sortedUrineResult.urineGeneral.density)+", Прозрачность="+e._s(e.sortedUrineResult.urineGeneral.transparency?"прозрачная":"мутная")+", Белок="+e._s(e.sortedUrineResult.urineGeneral.protein)+", Глюкоза="+e._s(e.sortedUrineResult.urineGeneral.glucose.glucoseName)+",\n          Ацетон="+e._s(e.sortedUrineResult.urineGeneral.acetone.acetoneName)+", Желч. пигмент="+e._s(e.sortedUrineResult.urineGeneral.bile?"есть":"нет")),a("br"),e._v("\n          Эпителий: плоский="+e._s(e.sortedUrineResult.urineElements.flatEpithelium)+", моч.путей="+e._s(e.sortedUrineResult.urineElements.tractEpithelium)+", почечный="+e._s(e.sortedUrineResult.urineElements.renalEpithelium)+". Лейкоциты="+e._s(e.sortedUrineResult.urineElements.leucocytes)+", Эритроциты="+e._s(e.sortedUrineResult.urineElements.erythrocytes)),a("br"),e._v("\n          Цилиндры: гиалин="+e._s(e.sortedUrineResult.urineElements.cylinders.hyaline)+", зернист="+e._s(e.sortedUrineResult.urineElements.cylinders.granular)+", воск="+e._s(e.sortedUrineResult.urineElements.cylinders.waxy)+", эпител="+e._s(e.sortedUrineResult.urineElements.cylinders.epithelial)+". Соли="+e._s(e.sortedUrineResult.urineElements.salts.saltsName)+", слизь="+e._s(e.sortedUrineResult.urineElements.slime?"есть":"нет")+"\n        ")]):e._e(),e._v(" "),e.sortedSmearResult.smearResult&&e.makeAppointmentDialog.showSmear?a("p",[a("strong",[e._v("Мазок на Gn:")]),e._v(" "+e._s(e._f("formatDate")(e.sortedSmearResult.smearDate))+":"),a("br"),e._v("\n          Гонококк="+e._s(e.sortedSmearResult.smearResult.smearGonococcus?"Обнаружены":"Не обнаружены")+",\n          Лейкоциты="+e._s(e.smearLeucocytes.find(function(t){return t.value===e.sortedSmearResult.smearResult.smearLeucocytes}).text)+",\n          Диплококки="+e._s(e.sortedSmearResult.smearResult.smearDiplococcus?"Обнаружены":"Не обнаружены")+",\n          Эпителий="+e._s(e.sortedSmearResult.smearResult.smearEpithelium?"Обнаружены":"Не обнаружены")+","),a("br"),e._v("\n          Трихомонады="+e._s(e.sortedSmearResult.smearResult.smearTrichomonas?"Обнаружены":"Не обнаружены")+",\n          Дрожжеподобные грибы="+e._s(e.sortedSmearResult.smearResult.smearFungus?"Обнаружены":"Не обнаружены")+",\n          Ключевые клетки="+e._s(e.sortedSmearResult.smearResult.smearKeyCells?"Обнаружены":"Не обнаружены")+"\n        ")]):e._e(),e._v(" "),e.sortedRwResult.rwResult&&e.makeAppointmentDialog.showRw?a("p",[a("strong",[e._v("Кровь на RW:")]),e._v(" "+e._s(e._f("formatDate")(e.sortedRwResult.rwDate))+":"),a("br"),e._v("\n          Результат="+e._s(e.rwTypes.find(function(t){return t.value===e.sortedRwResult.rwResult}).text)+"\n        ")]):e._e(),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[4===e.currentUserDoctor.id?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm3:""}},[a("h4",[e._v("Без коррекции:")])]),e._v(" "),a("v-flex",{attrs:{sm6:""}},[a("h4",[e._v("Коррекция:")])]),e._v(" "),a("v-flex",{attrs:{sm3:""}},[a("h4",[e._v("С коррекцией:")])])],1):e._e(),e._v(" "),4===e.currentUserDoctor.id?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Без кор. OD",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.noCorrection.od,callback:function(t){e.$set(e.currentOphthalmologistResult.noCorrection,"od",t)},expression:"currentOphthalmologistResult.noCorrection.od"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OD SPH",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.correction.od.sph,callback:function(t){e.$set(e.currentOphthalmologistResult.correction.od,"sph",t)},expression:"currentOphthalmologistResult.correction.od.sph"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OD CYL",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.correction.od.cyl,callback:function(t){e.$set(e.currentOphthalmologistResult.correction.od,"cyl",t)},expression:"currentOphthalmologistResult.correction.od.cyl"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OD AX",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.correction.od.ax,callback:function(t){e.$set(e.currentOphthalmologistResult.correction.od,"ax",t)},expression:"currentOphthalmologistResult.correction.od.ax"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"С кор. OD",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.withCorrection.od,callback:function(t){e.$set(e.currentOphthalmologistResult.withCorrection,"od",t)},expression:"currentOphthalmologistResult.withCorrection.od"}})],1)],1):e._e(),e._v(" "),4===e.currentUserDoctor.id?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Без кор. OS",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.noCorrection.os,callback:function(t){e.$set(e.currentOphthalmologistResult.noCorrection,"os",t)},expression:"currentOphthalmologistResult.noCorrection.os"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OS SPH",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.correction.os.sph,callback:function(t){e.$set(e.currentOphthalmologistResult.correction.os,"sph",t)},expression:"currentOphthalmologistResult.correction.os.sph"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OS CYL",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.correction.os.cyl,callback:function(t){e.$set(e.currentOphthalmologistResult.correction.os,"cyl",t)},expression:"currentOphthalmologistResult.correction.os.cyl"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"OS AX",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.correction.os.ax,callback:function(t){e.$set(e.currentOphthalmologistResult.correction.os,"ax",t)},expression:"currentOphthalmologistResult.correction.os.ax"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"С кор. OS",color:e.subSystem.primaryColor},model:{value:e.currentOphthalmologistResult.withCorrection.os,callback:function(t){e.$set(e.currentOphthalmologistResult.withCorrection,"os",t)},expression:"currentOphthalmologistResult.withCorrection.os"}})],1)],1):e._e(),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[e._v("Осмотр:")])])],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-text-field",{attrs:{"multi-line":"",rows:"3","auto-grow":"",label:"Объект. статус",color:e.subSystem.primaryColor},model:{value:e.currentDoctorResult.doctorStatus,callback:function(t){e.$set(e.currentDoctorResult,"doctorStatus",t)},expression:"currentDoctorResult.doctorStatus"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{"auto-grow":"",label:"Жалобы",color:e.subSystem.primaryColor},model:{value:e.currentDoctorResult.doctorComplaints,callback:function(t){e.$set(e.currentDoctorResult,"doctorComplaints",t)},expression:"currentDoctorResult.doctorComplaints"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Диагноз",color:e.subSystem.primaryColor},model:{value:e.currentDoctorResult.doctorDiagnosis.diagnosis,callback:function(t){e.$set(e.currentDoctorResult.doctorDiagnosis,"diagnosis",t)},expression:"currentDoctorResult.doctorDiagnosis.diagnosis"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-select",{attrs:{items:e.doctorDetectabilities,label:"Выявляен",color:e.subSystem.primaryColor},model:{value:e.currentDoctorResult.doctorDiagnosis.detectability,callback:function(t){e.$set(e.currentDoctorResult.doctorDiagnosis,"detectability",t)},expression:"currentDoctorResult.doctorDiagnosis.detectability"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Комментарий",color:e.subSystem.primaryColor},model:{value:e.currentDoctorResult.doctorDiagnosis.diagnosisComment,callback:function(t){e.$set(e.currentDoctorResult.doctorDiagnosis,"diagnosisComment",t)},expression:"currentDoctorResult.doctorDiagnosis.diagnosisComment"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-select",{attrs:{"auto-grow":"",multiple:"",items:e.doctorConclusions,label:"Годность",color:e.subSystem.primaryColor},model:{value:e.currentDoctorResult.doctorConclusion,callback:function(t){e.$set(e.currentDoctorResult,"doctorConclusion",t)},expression:"currentDoctorResult.doctorConclusion"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.noExaminationDialog(t)}}},[e._v("Закрыть\n        ")]),e._v(" "),1===this.currentUser.roles.medos.doctor||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser?e._e():a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesExaminationDialog(t)}}},[e._v("Сохранить\n        ")]),e._v(" "),1===this.currentUser.roles.medos.doctor||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser?a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor,disabled:!(e.ifAllDoctorsComplete()&&e.ifAllExamsComplete())},nativeOn:{click:function(t){return e.yesExaminationDialog(t)}}},[e._v("Сохранить прием\n        ")]):e._e(),e._v(" "),1===this.currentUser.roles.medos.doctor||this.currentUser.roles.medos.admin||this.currentUser.roles.superuser?a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.secondaryColor,disabled:!(e.ifAllDoctorsComplete()&&e.ifAllExamsComplete()&&e.currentEditPatient.activeMedos.medosDoctorResults.some(function(e){return 1===e.doctorId}))},nativeOn:{click:function(t){return e.openArchiveMedosDialog(t)}}},[e._v("Закрыть медосмотр\n        ")]):e._e()],1)],1)],1):e._e(),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.examsDialog.ocularFundus,callback:function(t){e.$set(e.examsDialog,"ocularFundus",t)},expression:"examsDialog.ocularFundus"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Обследование на глазное дно")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-text-field",{attrs:{"auto-grow":"","multi-line":"",rows:"3",label:"Результат",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult,callback:function(t){e.$set(e.currentExamResult,"examResult",t)},expression:"currentExamResult.examResult"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){e.noExamDialog("ocularFundus")}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){e.yesExamDialog("ocularFundus")}}},[e._v("\n          Сохранить\n        ")])],1)],1)],1),e._v(" "),e.currentExamResult.examResult?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.examsDialog.fields,callback:function(t){e.$set(e.examsDialog,"fields",t)},expression:"examsDialog.fields"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Обследование полей зрения")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.fieldResults,label:"Результат OD",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.od,callback:function(t){e.$set(e.currentExamResult.examResult,"od",t)},expression:"currentExamResult.examResult.od"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.fieldResults,label:"Результат OS",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.os,callback:function(t){e.$set(e.currentExamResult.examResult,"os",t)},expression:"currentExamResult.examResult.os"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){e.noExamDialog("fields")}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){e.yesExamDialog("fields")}}},[e._v("\n          Сохранить\n        ")])],1)],1)],1):e._e(),e._v(" "),e.currentExamResult.examResult?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.examsDialog.intraocularPressure,callback:function(t){e.$set(e.examsDialog,"intraocularPressure",t)},expression:"examsDialog.intraocularPressure"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Внутриглазное давление")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"OD, мм рт ст",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.od,callback:function(t){e.$set(e.currentExamResult.examResult,"od",t)},expression:"currentExamResult.examResult.od"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"OS, мм рт ст",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.os,callback:function(t){e.$set(e.currentExamResult.examResult,"os",t)},expression:"currentExamResult.examResult.os"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){e.noExamDialog("intraocularPressure")}}},[e._v("Закрыть\n        ")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){e.yesExamDialog("intraocularPressure")}}},[e._v("\n          Сохранить\n        ")])],1)],1)],1):e._e(),e._v(" "),e.currentExamResult.examResult?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.examsDialog.refractometry,callback:function(t){e.$set(e.examsDialog,"refractometry",t)},expression:"examsDialog.refractometry"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Авторефрактометрия")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.currentExamResult.examResult.od?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OD SPH",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.od.sph,callback:function(t){e.$set(e.currentExamResult.examResult.od,"sph",t)},expression:"currentExamResult.examResult.od.sph"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OD CYL",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.od.cyl,callback:function(t){e.$set(e.currentExamResult.examResult.od,"cyl",t)},expression:"currentExamResult.examResult.od.cyl"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OD AX",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.od.ax,callback:function(t){e.$set(e.currentExamResult.examResult.od,"ax",t)},expression:"currentExamResult.examResult.od.ax"}})],1)],1):e._e(),e._v(" "),e.currentExamResult.examResult.os?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OS SPH",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.os.sph,callback:function(t){e.$set(e.currentExamResult.examResult.os,"sph",t)},expression:"currentExamResult.examResult.os.sph"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OS CYL",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.os.cyl,callback:function(t){e.$set(e.currentExamResult.examResult.os,"cyl",t)},expression:"currentExamResult.examResult.os.cyl"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"OS AX",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.os.ax,callback:function(t){e.$set(e.currentExamResult.examResult.os,"ax",t)},expression:"currentExamResult.examResult.os.ax"}})],1)],1):e._e()],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){e.noExamDialog("refractometry")}}},[e._v("Закрыть\n        ")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){e.yesExamDialog("refractometry")}}},[e._v("\n          Сохранить\n        ")])],1)],1)],1):e._e(),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.examsDialog.colorBlindness,callback:function(t){e.$set(e.examsDialog,"colorBlindness",t)},expression:"examsDialog.colorBlindness"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Цветоощущение")])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-select",{attrs:{items:e.colorBlindnessResults,label:"Цветощущение",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult,callback:function(t){e.$set(e.currentExamResult,"examResult",t)},expression:"currentExamResult.examResult"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){e.noExamDialog("colorBlindness")}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){e.yesExamDialog("colorBlindness")}}},[e._v("\n          Сохранить\n        ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:e.conclusionsDialog.show,callback:function(t){e.$set(e.conclusionsDialog,"show",t)},expression:"conclusionsDialog.show"}},[a("v-card",{staticStyle:{background:"#eaeaea"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Результаты пациента"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])])]),e._v(" "),a("v-card-text",[this.currentEditPatient.activeMedos.medosDoctors?a("v-container",{attrs:{"grid-list-md":""}},[a("h2",{class:e.ifAllDoctorsComplete()?"green--text":"red--text",staticStyle:{"margin-bottom":"10px"}},[e._v("Доктора")]),e._v(" "),a("v-expansion-panel",{attrs:{focusable:""}},e._l(e.currentEditPatient.activeMedos.medosDoctors.mustDoctors,function(t){return 1!==t.doctorId?a("v-expansion-panel-content",{key:t.doctorId},[e.ifDoctorHasResult(t.doctorId)?a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",[e._v(e._s(e.getDoctorName(t.doctorId)))]),e._v(" — "+e._s(e.getDoctorResult(t.doctorId).doctorConclusion.toString())+"\n              ")]):e._e(),e._v(" "),e.ifDoctorHasResult(t.doctorId)?e._e():a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",[e._v(e._s(e.getDoctorName(t.doctorId)))]),e._v(" — "),a("strong",{staticClass:"red--text"},[e._v("Нет\n                заключения")])]),e._v(" "),e.ifDoctorHasResult(t.doctorId)?a("v-card",[a("v-card-text",{staticStyle:{padding:"10px 24px"}},[a("p",[a("strong",[e._v("Жалобы:")]),e._v(" "+e._s(e.getDoctorResult(t.doctorId).doctorComplaints)+"\n                  ")]),e._v(" "),a("p",[a("strong",[e._v("Объективный статус:")]),e._v(" "+e._s(e.getDoctorResult(t.doctorId).doctorStatus)+"\n                  ")]),e._v(" "),e.getDoctorResult(t.doctorId).doctorDiagnosis?a("p",[a("strong",[e._v("Диагноз:")]),e._v(" "+e._s(e.getDoctorResult(t.doctorId).doctorDiagnosis.diagnosis)+"\n                    "),void 0!==e.getDoctorResult(t.doctorId).doctorDiagnosis.detectability?a("strong",[e._v("\n                      ("+e._s(!0===e.getDoctorResult(t.doctorId).doctorDiagnosis.detectability?"+":"-")+")\n                    ")]):e._e(),e._v(" "),""!==e.getDoctorResult(t.doctorId).doctorDiagnosis.diagnosisComment?a("em",[e._v("— "+e._s(e.getDoctorResult(t.doctorId).doctorDiagnosis.diagnosisComment))]):e._e()]):e._e(),e._v(" "),e.getDoctorResult(t.doctorId).doctorSpecial?a("p"):e._e(),e._v(" "),a("p",[a("strong",[e._v("Годность:")]),e._v(" "+e._s(e.getDoctorResult(t.doctorId).doctorConclusion.toString())+"\n                  ")])])],1):e._e()],1):e._e()}))],1):e._e(),e._v(" "),a("br"),e._v(" "),this.currentEditPatient.activeMedos.medosExams&&e.ifAnyExamNeeded()?a("v-container",{attrs:{"grid-list-md":""}},[a("h2",{class:e.ifAllExamsComplete()?"green--text":"red--text",staticStyle:{margin:"10px 0"}},[e._v("Обследования")]),e._v(" "),a("v-expansion-panel",{attrs:{focusable:""}},e._l(e.currentEditPatient.activeMedos.medosExams.mustExams,function(t){return e.examsForConclusions.includes(t.examId)?a("v-expansion-panel-content",{key:t.examId},[e.ifExamHasResult(t.examId)?a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",[e._v(e._s(t.examName))])]):e._e(),e._v(" "),e.ifExamHasResult(t.examId)?e._e():a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",[e._v(e._s(t.examName))]),e._v(" — "),a("strong",{staticClass:"red--text"},[e._v("Нет\n                заключения")])]),e._v(" "),e.ifExamHasResult(t.examId)?a("v-card",[a("v-card-text",{staticStyle:{padding:"10px 24px"}},[19===t.examId?a("span",[e._v("\n                    "+e._s(e.getExamResult(t.examId).examResult)+"\n                  ")]):e._e(),e._v(" "),20===t.examId?a("p",[a("strong",[e._v("OD:")]),e._v(" "+e._s(e.fieldResults.find(function(a){return a.value===e.getExamResult(t.examId).examResult.od}).text)),a("br"),e._v(" "),a("strong",[e._v("OS:")]),e._v(" "+e._s(e.fieldResults.find(function(a){return a.value===e.getExamResult(t.examId).examResult.os}).text)+"\n                  ")]):e._e(),e._v(" "),21===t.examId?a("span",[a("strong",[e._v("OD:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.od)+" мм рт.ст."),a("br"),e._v(" "),a("strong",[e._v("OS:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.os)+" мм рт.ст.\n                  ")]):e._e(),e._v(" "),32===t.examId?a("span",[a("strong",[e._v("OD:")]),e._v(" SPH: "+e._s(e.getExamResult(t.examId).examResult.od.sph)+" CYL: "+e._s(e.getExamResult(t.examId).examResult.od.cyl)+" AX: "+e._s(e.getExamResult(t.examId).examResult.od.ax)),a("br"),e._v(" "),a("strong",[e._v("OS:")]),e._v(" SPH: "+e._s(e.getExamResult(t.examId).examResult.os.sph)+" CYL: "+e._s(e.getExamResult(t.examId).examResult.os.cyl)+" AX: "+e._s(e.getExamResult(t.examId).examResult.os.ax)+"\n                  ")]):e._e(),e._v(" "),34===t.examId?a("span",[a("strong",[e._v("AD:")]),e._v(" "),a("em",[e._v("125:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.ad.f125)+" "),a("em",[e._v("250:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.ad.f250)+" "),a("em",[e._v("500:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.ad.f500)+" "),a("em",[e._v("1000:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.ad.f1000)+" "),a("em",[e._v("2000:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.ad.f2000)+" "),a("em",[e._v("4000:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.ad.f4000)+" "),a("em",[e._v("6000:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.ad.f6000)),a("br"),e._v(" "),a("strong",[e._v("AS:")]),e._v(" "),a("em",[e._v("125:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.as.f125)+" "),a("em",[e._v("250:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.as.f250)+" "),a("em",[e._v("500:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.as.f500)+" "),a("em",[e._v("1000:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.as.f1000)+" "),a("em",[e._v("2000:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.as.f2000)+" "),a("em",[e._v("4000:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.as.f4000)+" "),a("em",[e._v("6000:")]),e._v(" "+e._s(e.getExamResult(t.examId).examResult.as.f6000)+"\n                  ")]):e._e()])],1):e._e()],1):e._e()}))],1):e._e()],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){e.noConclusionsDialog()}}},[e._v("Закрыть")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.archiveMedosDialog.show,callback:function(t){e.$set(e.archiveMedosDialog,"show",t)},expression:"archiveMedosDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Вы точно хотите архивировать мед. осмотр"),a("br"),e._v("\n          от "),a("span",{staticClass:"green--text"},[e._v(e._s(e._f("formatDate")(e.currentEditPatient.activeMedos.medosRegistrationDate)))]),e._v("?\n        ")])]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.deleteColor,flat:""},nativeOn:{click:function(t){return e.noArchiveMedosDialog(t)}}},[e._v("Нет")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesArchiveMedosDialog(t)}}},[e._v("Да")])],1)],1)],1)],1)},staticRenderFns:[]};var D=a("VU/8")(R,w,!1,function(e){a("uWSn")},null,null).exports,C="http://"+window.location.hostname+":3001",E={data:function(){return{currentUser:{username:"",password:"",fio:"",roles:{superuser:!1,medos:{receptionist:!1,premedical:!1,functionalDiagnostics:!1,doctor:!1,admin:!1},radiography:{assistant:!1,admin:!1},laboratory:{assistant:!1,admin:!1},vaccination:{assistant:!1,admin:!1}}},patientQuery:{},patients:[],currentUserExam:{id:"",name:""},currentEditPatient:{activeMedos:{}},currentExamResult:{},examResultDialog:{show:!1,edit:!1,exam:""},snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"deep-purple darken-4",secondaryColor:"deep-orange darken-4"}}},mounted:function(){this.getCurrentUser()},methods:{openExaminationDialog:function(e){var t=this;this.currentEditPatient=e.patient,this.examResultDialog.exam=e.exam,this.examResultDialog.show=!0,34===this.examResultDialog.exam?this.currentExamResult={examId:34,examResult:{ad:{f125:"10",f250:"10",f500:"10",f1000:"10",f2000:"10",f4000:"10",f6000:"10"},as:{f125:"10",f250:"10",f500:"10",f1000:"10",f2000:"10",f4000:"10",f6000:"10"}}}:this.currentExamResult={examId:this.examResultDialog.exam,examResult:!1},this.currentEditPatient.activeMedos.medosExamResults.some(function(e){return e.examId===t.examResultDialog.exam})&&(this.examResultDialog.edit=!0,this.currentExamResult=this.currentEditPatient.activeMedos.medosExamResults.find(function(e){return e.examId===t.examResultDialog.exam}))},noExaminationDialog:function(){this.examResultDialog={show:!1,edit:!1,exam:""}},yesExaminationDialog:function(){var e=this,t=this.currentExamResult;this.examResultDialog.edit?l.a.put(C+"/api/v1/patient/"+this.currentEditPatient._id+"/examResult/"+t._id,{examResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3,e.getMedosPatients(),e.examResultDialog={show:!1,edit:!1,exam:""},e.currentEditPatient={activeMedos:{}}):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3)}).catch(function(t){e.errorHandler(t)}):l.a.post(C+"/api/v1/patient/"+this.currentEditPatient._id+"/examResult/",{examResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3,e.getMedosPatients(),e.examResultDialog={show:!1,edit:!1,exam:""},e.currentEditPatient={activeMedos:{}}):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3)}).catch(function(t){e.errorHandler(t)})},getMedosPatients:function(){var e=this,t={};t.lastName=void 0===this.patientQuery.lastName||""===this.patientQuery.lastName?" ":this.patientQuery.lastName,t.firstName=void 0===this.patientQuery.firstName||""===this.patientQuery.firstName?" ":this.patientQuery.firstName,t.middleName=void 0===this.patientQuery.middleName||""===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(C+"/api/v1/patient/medos/"+t.lastName+"/"+t.firstName+"/"+t.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.show=!1,e.patients=t.data.patients,e.patients.forEach(function(t){t.dateBirth=e.dateFromIso(t.dateBirth)})):(e.patients=[],e.snackBar.show=!0,e.snackBar.color="yellow accent-3 black--text",e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})},getCurrentUser:function(){var e=this;l.a.get(C+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;switch(e.currentUser=a,e.currentUserExam.id=e.currentUser.roles.medos.exam,e.currentUserExam.id){case 1:e.currentUserExam.name="лаборанта ОФД";break;case 34:e.currentUserExam.name="аудиометриста"}(e.currentUser.roles.medos.admin||e.currentUser.roles.user)&&(e.currentUserExam.name="обследований проф. осмотра")}).catch(function(t){e.errorHandler(t)})},checkPatientEcg:function(){return this.currentUserExam&&1===this.currentUserExam.id||this.currentUser.roles.medos&&this.currentUser.roles.medos.admin||this.currentUser.roles.superuser},checkPatientSpirometry:function(e){var t=e.activeMedos.medosExams.mustExams,a=this.currentUserExam&&1===this.currentUserExam.id||this.currentUser.roles.medos&&this.currentUser.roles.medos.admin||this.currentUser.roles.superuser;return t.some(function(e){return 1===e.examId})&&a},checkPatientAudiometry:function(e){var t=e.activeMedos.medosExams.mustExams,a=this.currentUserExam&&34===this.currentUserExam.id||this.currentUser.roles.medos&&this.currentUser.roles.medos.admin||this.currentUser.roles.superuser;return t.some(function(e){return 34===e.examId})&&a},dateFromIso:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(e){var t=e.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===t&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=e.response.data.message}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:e.subSystem.primaryColor,subtitle:"Рабочее место "+e.currentUserExam.name,currentUser:e.currentUser}}),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[e._v("Пациенты на мед. осмотре")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.primaryColor,label:"Фамилия",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getMedosPatients(t):null}},model:{value:e.patientQuery.lastName,callback:function(t){e.$set(e.patientQuery,"lastName",t)},expression:"patientQuery.lastName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.primaryColor,label:"Имя",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getMedosPatients(t):null}},model:{value:e.patientQuery.firstName,callback:function(t){e.$set(e.patientQuery,"firstName",t)},expression:"patientQuery.firstName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.primaryColor,label:"Отчество",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getMedosPatients(t):null}},model:{value:e.patientQuery.middleName,callback:function(t){e.$set(e.patientQuery,"middleName",t)},expression:"patientQuery.middleName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){return e.getMedosPatients(t)}}},[e._v("Найти")])],1)],1),e._v(" "),e.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{headers:[{text:"ФИО",sortable:!1},{text:"Осмотр",sortable:!1},{text:"Дата рождения",sortable:!1},{text:"Пол",sortable:!1},{text:"Действия",sortable:!1}],items:e.patients,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.fio))]),e._v(" "),a("td",[e._v(e._s(t.item.activeMedos.medosType.typeId))]),e._v(" "),a("td",[e._v(e._s(t.item.dateBirth))]),e._v(" "),a("td",[e._v(e._s(t.item.sex?"Муж":"Жен"))]),e._v(" "),a("td",{attrs:{width:"211px"}},[e.checkPatientEcg()?a("v-tooltip",{attrs:{top:"",color:"red darken-4"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-4",icon:""},nativeOn:{click:function(a){e.openExaminationDialog({patient:t.item,exam:46})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment_turned_in")])],1),e._v(" "),a("span",[e._v("Добавить ЭКГ")])],1):e._e(),e._v(" "),e.checkPatientSpirometry(t.item)?a("v-tooltip",{attrs:{top:"",color:"light-blue darken-4"}},[a("v-btn",{attrs:{slot:"activator",color:"light-blue darken-4",icon:""},nativeOn:{click:function(a){e.openExaminationDialog({patient:t.item,exam:1})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment_turned_in")])],1),e._v(" "),a("span",[e._v("Добавить спирометрию")])],1):e._e(),e._v(" "),e.checkPatientAudiometry(t.item)?a("v-tooltip",{attrs:{top:"",color:"pink darken-4"}},[a("v-btn",{attrs:{slot:"activator",color:"pink darken-4",icon:""},nativeOn:{click:function(a){e.openExaminationDialog({patient:t.item,exam:34})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment_turned_in")])],1),e._v(" "),a("span",[e._v("Добавить аудиометрию")])],1):e._e()],1)])]}}])}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("app-footer",{attrs:{subsystem:e.subSystem.primaryColor,currentUser:e.currentUser}}),e._v(" "),a("v-snackbar",{attrs:{timeout:e.snackBar.timeout,right:"right",color:e.snackBar.color},model:{value:e.snackBar.show,callback:function(t){e.$set(e.snackBar,"show",t)},expression:"snackBar.show"}},[e._v("\n    "+e._s(e.snackBar.message)+"\n  ")]),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:e.examResultDialog.show,callback:function(t){e.$set(e.examResultDialog,"show",t)},expression:"examResultDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Обследование для пациента"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[46===e.examResultDialog.exam||1===e.examResultDialog.exam?a("v-layout",{attrs:{row:"",wrap:""}},[46===e.examResultDialog.exam?a("v-flex",{attrs:{sm12:""}},[a("h2",[e._v("ЭКГ")])]):e._e(),e._v(" "),46===e.examResultDialog.exam?a("v-flex",{attrs:{sm12:""}},[a("v-checkbox",{attrs:{label:"Пациент прошел ЭКГ"},model:{value:e.currentExamResult.examResult,callback:function(t){e.$set(e.currentExamResult,"examResult",t)},expression:"currentExamResult.examResult"}})],1):e._e(),e._v(" "),1===e.examResultDialog.exam?a("v-flex",{attrs:{sm12:""}},[a("h2",[e._v("Спирометрия")])]):e._e(),e._v(" "),1===e.examResultDialog.exam?a("v-flex",{attrs:{sm12:""}},[a("v-checkbox",{attrs:{label:"Пациент прошел спирометрию"},model:{value:e.currentExamResult.examResult,callback:function(t){e.$set(e.currentExamResult,"examResult",t)},expression:"currentExamResult.examResult"}})],1):e._e()],1):e._e(),e._v(" "),34===e.examResultDialog.exam&&e.currentExamResult.examResult?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h2",[e._v("Аудиометрия")])]),e._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("h3",{staticStyle:{margin:"22px 0 6px"}},[e._v("AD")])]),e._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"125",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.ad.f125,callback:function(t){e.$set(e.currentExamResult.examResult.ad,"f125",t)},expression:"currentExamResult.examResult.ad.f125"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"250",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.ad.f250,callback:function(t){e.$set(e.currentExamResult.examResult.ad,"f250",t)},expression:"currentExamResult.examResult.ad.f250"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"500",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.ad.f500,callback:function(t){e.$set(e.currentExamResult.examResult.ad,"f500",t)},expression:"currentExamResult.examResult.ad.f500"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"1000",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.ad.f1000,callback:function(t){e.$set(e.currentExamResult.examResult.ad,"f1000",t)},expression:"currentExamResult.examResult.ad.f1000"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"2000",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.ad.f2000,callback:function(t){e.$set(e.currentExamResult.examResult.ad,"f2000",t)},expression:"currentExamResult.examResult.ad.f2000"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"4000",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.ad.f4000,callback:function(t){e.$set(e.currentExamResult.examResult.ad,"f4000",t)},expression:"currentExamResult.examResult.ad.f4000"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"6000",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.ad.f6000,callback:function(t){e.$set(e.currentExamResult.examResult.ad,"f6000",t)},expression:"currentExamResult.examResult.ad.f6000"}})],1)],1):e._e(),e._v(" "),34===e.examResultDialog.exam&&e.currentExamResult.examResult?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md1:""}},[a("h3",{staticStyle:{margin:"22px 0 6px"}},[e._v("AS")])]),e._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"125",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.as.f125,callback:function(t){e.$set(e.currentExamResult.examResult.as,"f125",t)},expression:"currentExamResult.examResult.as.f125"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"250",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.as.f250,callback:function(t){e.$set(e.currentExamResult.examResult.as,"f250",t)},expression:"currentExamResult.examResult.as.f250"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md1:""}},[a("v-text-field",{attrs:{label:"500",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.as.f500,callback:function(t){e.$set(e.currentExamResult.examResult.as,"f500",t)},expression:"currentExamResult.examResult.as.f500"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"1000",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.as.f1000,callback:function(t){e.$set(e.currentExamResult.examResult.as,"f1000",t)},expression:"currentExamResult.examResult.as.f1000"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"2000",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.as.f2000,callback:function(t){e.$set(e.currentExamResult.examResult.as,"f2000",t)},expression:"currentExamResult.examResult.as.f2000"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"4000",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.as.f4000,callback:function(t){e.$set(e.currentExamResult.examResult.as,"f4000",t)},expression:"currentExamResult.examResult.as.f4000"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"6000",color:e.subSystem.primaryColor},model:{value:e.currentExamResult.examResult.as.f6000,callback:function(t){e.$set(e.currentExamResult.examResult.as,"f6000",t)},expression:"currentExamResult.examResult.as.f6000"}})],1)],1):e._e()],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){e.noExaminationDialog()}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){e.yesExaminationDialog()}}},[e._v("Сохранить\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(E,B,!1,function(e){a("FM6E")},null,null).exports,P="http://"+window.location.hostname+":3001",N={data:function(){return{currentUser:{},patientQuery:{},patients:[],currentEditPatient:{rgResults:[],activeRgResult:{rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""}},hasActiveRgResult:!1},currentRgResult:{rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},currentRemoveItem:{},addRgDialog:{show:!1,anotherLpu:!1},editRgDialog:{show:!1},listRgDialog:{show:!1},removeDialog:{show:!1,activeRg:!1},viewRgDialog:{show:!1},rgResultTypes:[{value:!0,text:"норма"},{value:!1,text:"патология"}],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"blue-grey darken-4",secondaryColor:"grey darken-1"}}},mounted:function(){this.getCurrentUser()},methods:{openAddRgDialog:function(e){this.currentEditPatient.hasActiveRgResult?(this.snackBar.color="yellow accent-3 black--text",this.snackBar.timeout=5e3,this.snackBar.message="У этого пациента уже зарегистрирован неописанный снимок",this.snackBar.show=!0):(this.currentEditPatient=e,this.addRgDialog.show=!0)},noAddRgDialog:function(){this.addRgDialog.show=!1},yesAddRgDialog:function(){var e=this,t={};this.addRgDialog.anotherLpu?(t={rgDate:this.currentRgResult.rgDate,rgType:{rgTypeId:1,rgTypeName:"флюорография"},rgLocation:{rgLocationType:2,rgLocationComment:this.currentRgResult.rgLocation.rgLocationComment},rgResult:{rgResultType:this.currentRgResult.rgResult.rgResultType,rgResultComment:this.currentRgResult.rgResult.rgResultComment}},l.a.post(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rgFull/",{rgResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(a){a.data.success?(e.currentEditPatient.rgResults.push(t),e.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},e.addRgDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=a.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})):(t={rgDate:this.dateFromIso(Date.now()),rgType:{rgTypeId:1,rgTypeName:"флюорография"},rgLocation:{rgLocationType:1,rgLocationComment:"МБУЗ ГКБ №6, Поликлиника * 2"},rgResult:{rgResultType:!0,rgResultComment:""}},l.a.post(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rg/",{activeRgResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.currentEditPatient.activeRgResult=t.data.patient.activeRgResult,e.currentEditPatient.hasActiveRgResult=!0,e.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},e.addRgDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)}))},openEditRgDialog:function(e){this.currentEditPatient=e,e.hasActiveRgResult?(this.currentRgResult=e.activeRgResult,this.editRgDialog.show=!0):(this.snackBar.color="yellow accent-3 black--text",this.snackBar.timeout=5e3,this.snackBar.message="У этого пациента нет зарегистрированных снимков",this.snackBar.show=!0)},noEditRgDialog:function(){this.currentEditPatient={rgResults:[],activeRgResult:{rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""}},hasActiveRgResult:!1},this.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},this.editRgDialog.show=!1},yesEditRgDialog:function(){var e=this,t=this.currentRgResult;!1===this.currentRgResult.rgResultType&&""===this.currentRgResult.rgResultComment?(this.snackBar.color="yellow accent-3 black--text",this.snackBar.timeout=5e3,this.snackBar.message="Не указана паталогия",this.snackBar.show=!0):l.a.put(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rg/",{rgResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(a){a.data.success?(e.currentEditPatient.activeRgResult={},e.currentEditPatient.hasActiveRgResult=!1,e.currentEditPatient.rgResults.push(t),e.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},e.editRgDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=a.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})},openRgListDialog:function(e){this.currentEditPatient=e,this.listRgDialog.show=!0},noRgListDialog:function(){this.currentEditPatient={rgResults:[],activeRgResult:{rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""}}},this.listRgDialog.show=!1},openRemoveDialog:function(e){"active"===e?(this.removeDialog.activeRg=!0,this.currentRemoveItem=this.currentEditPatient.activeRgResult):this.currentRemoveItem=e,this.removeDialog.show=!0},noRemoveDialog:function(){this.currentRemoveItem={},this.removeDialog.show=!1,this.removeDialog.activeRg=!1},yesRemoveDialog:function(){var e=this;this.removeDialog.activeRg?l.a.delete(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rg/active/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.currentEditPatient.activeRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}},e.currentEditPatient.hasActiveRgResult=!1,e.currentRemoveItem={},e.removeDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)}):l.a.delete(P+"/api/v1/patient/"+this.currentEditPatient._id+"/rg/"+this.currentRemoveItem._id,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.currentEditPatient.rgResults=e.currentEditPatient.rgResults.filter(function(t){return t._id!==e.currentRemoveItem._id}),e.removeDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})},openRgViewDialog:function(e){this.currentRgResult=e,this.viewRgDialog.show=!0},noRgViewDialog:function(){this.viewRgDialog.show=!1,this.currentRgResult={rgDate:"",rgType:{rgTypeId:"",rgTypeName:""},rgLocation:{rgLocationType:"",rgLocationComment:""},rgResult:{rgResultType:!0,rgResultComment:""}}},getPatients:function(){var e=this,t={};t.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,t.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,t.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(P+"/api/v1/patient/"+t.lastName+"/"+t.firstName+"/"+t.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.show=!1,e.patients=t.data.patients,e.patients.forEach(function(t){t.dateBirth=e.dateFromIso(t.dateBirth)})):(e.patients=[],e.snackBar.show=!0,e.snackBar.color="yellow accent-3 black--text",e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})},getCurrentUser:function(){var e=this;l.a.get(P+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;e.currentUser=a}).catch(function(t){e.errorHandler(t)})},dateFromIso:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(e){var t=e.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===t&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=e.response.data.message}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:e.subSystem.primaryColor,subtitle:"Снимки",currentUser:e.currentUser}}),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[e._v("Поиск пациентов")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.lastName,callback:function(t){e.$set(e.patientQuery,"lastName",t)},expression:"patientQuery.lastName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.firstName,callback:function(t){e.$set(e.patientQuery,"firstName",t)},expression:"patientQuery.firstName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.middleName,callback:function(t){e.$set(e.patientQuery,"middleName",t)},expression:"patientQuery.middleName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){return e.getPatients(t)}}},[e._v("Найти")])],1)],1),e._v(" "),e.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:e.patients,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.fio))]),e._v(" "),a("td",[e._v(e._s(t.item.dateBirth))]),e._v(" "),a("td",[e._v(e._s(t.item.sex?"Муж":"Жен"))]),e._v(" "),a("td",{attrs:{width:"211px"}},[a("v-tooltip",{attrs:{top:"",color:e.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){e.openAddRgDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment_late")])],1),e._v(" "),a("span",[e._v("Зарегистрировать снимок")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:e.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){e.openRgListDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment")])],1),e._v(" "),a("span",[e._v("Посмотреть список снимков")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:e.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){e.openEditRgDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment_turned_in")])],1),e._v(" "),a("span",[e._v("Ввести описание")])],1)],1)])]}}])}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("app-footer",{attrs:{subsystem:e.subSystem.primaryColor,currentUser:e.currentUser}}),e._v(" "),a("v-snackbar",{attrs:{timeout:e.snackBar.timeout,right:"right",color:e.snackBar.color},model:{value:e.snackBar.show,callback:function(t){e.$set(e.snackBar,"show",t)},expression:"snackBar.show"}},[e._v("\n    "+e._s(e.snackBar.message)+"\n  ")]),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.addRgDialog.show,callback:function(t){e.$set(e.addRgDialog,"show",t)},expression:"addRgDialog.show"}},[a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:"",md7:""}},[a("span",{staticClass:"headline"},[e._v("\n          Зарегистрировать снимок для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))]),e._v("?\n        ")])]),e._v(" "),a("v-flex",{attrs:{sm12:"",md5:""}},[a("v-checkbox",{staticClass:"right",attrs:{label:"Снимок из другого ЛПУ"},model:{value:e.addRgDialog.anotherLpu,callback:function(t){e.$set(e.addRgDialog,"anotherLpu",t)},expression:"addRgDialog.anotherLpu"}})],1)],1),e._v(" "),e.addRgDialog.anotherLpu?a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Название ЛПУ",color:e.subSystem.primaryColor},model:{value:e.currentRgResult.rgLocation.rgLocationComment,callback:function(t){e.$set(e.currentRgResult.rgLocation,"rgLocationComment",t)},expression:"currentRgResult.rgLocation.rgLocationComment"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Дата снимка",color:e.subSystem.primaryColor,mask:"##.##.####","return-masked-value":""},model:{value:e.currentRgResult.rgDate,callback:function(t){e.$set(e.currentRgResult,"rgDate",t)},expression:"currentRgResult.rgDate"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.rgResultTypes,label:"Норма",color:e.subSystem.primaryColor},model:{value:e.currentRgResult.rgResult.rgResultType,callback:function(t){e.$set(e.currentRgResult.rgResult,"rgResultType",t)},expression:"currentRgResult.rgResult.rgResultType"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{disabled:e.currentRgResult.rgResult.rgResultType,label:"Заключение",color:e.subSystem.primaryColor},model:{value:e.currentRgResult.rgResult.rgResultComment,callback:function(t){e.$set(e.currentRgResult.rgResult,"rgResultComment",t)},expression:"currentRgResult.rgResult.rgResultComment"}})],1)],1)],1)],1):e._e(),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.noAddRgDialog(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesAddRgDialog(t)}}},[e._v("\n          Зарегистрировать\n        ")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.listRgDialog.show,callback:function(t){e.$set(e.listRgDialog,"show",t)},expression:"listRgDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Снимки пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){e.openAddRgDialog(e.currentEditPatient)}}},[e._v("\n              Зарегистрировать снимок\n            ")])],1)],1)],1),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.currentEditPatient.rgResults.length>0?a("h2",[e._v("Список снимков")]):e._e(),e._v(" "),e.currentEditPatient.rgResults.length>0?a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{"hide-headers":"",items:e.currentEditPatient.rgResults,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(e._f("formatDate")(t.item.rgDate)))]),e._v(" "),a("td",[e._v(e._s(t.item.rgLocation.rgLocationComment))]),e._v(" "),a("td",{attrs:{width:"172px"}},[a("v-tooltip",{attrs:{top:"",color:e.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){e.openRgViewDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("assignment")])],1),e._v(" "),a("span",[e._v("Информация о снимке")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:"red darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-2",icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1),e._v(" "),a("span",[e._v("Удалить снимок")])],1)],1)])]}}])}):e._e(),e._v(" "),a("br"),e._v(" "),e.currentEditPatient.hasActiveRgResult?a("h2",[e._v("Зарегистрированный снимок")]):e._e(),e._v(" "),e.currentEditPatient.hasActiveRgResult?a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{"hide-headers":"",items:[e.currentEditPatient.activeRgResult],"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(e._f("formatDate")(t.item.rgDate)))]),e._v(" "),a("td",[e._v(e._s(t.item.rgLocation.rgLocationComment))]),e._v(" "),a("td",{attrs:{width:"50px"}},[a("v-tooltip",{attrs:{top:"",color:"red darken-2"}},[a("v-btn",{attrs:{slot:"activator",color:"red darken-2",icon:""},nativeOn:{click:function(t){e.openRemoveDialog("active")}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1),e._v(" "),a("span",[e._v("Удалить снимок")])],1)],1)])]}}])}):e._e()],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.noRgListDialog(t)}}},[e._v("Закрыть")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.removeDialog.show,callback:function(t){e.$set(e.removeDialog,"show",t)},expression:"removeDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Удалить "),e.removeDialog.activeRg?a("span",[e._v("активный")]):e._e(),e._v(" снимок от "+e._s(e._f("formatDate")(e.currentRemoveItem.rgDate))+" для"),a("br"),e._v(" "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentEditPatient.fio)+"»")]),e._v("?\n        ")])]),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"red darken-2",flat:""},nativeOn:{click:function(t){return e.noRemoveDialog(t)}}},[e._v("Нет")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red darken-2"},nativeOn:{click:function(t){return e.yesRemoveDialog(t)}}},[e._v("Да")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",lazy:"","max-width":"800px"},model:{value:e.viewRgDialog.show,callback:function(t){e.$set(e.viewRgDialog,"show",t)},expression:"viewRgDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Описание снимка от "+e._s(e._f("formatDate")(e.currentRgResult.rgDate))+" для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{readonly:"",label:"Дата снимка",color:e.subSystem.primaryColor,value:e.dateFromIso(e.currentRgResult.rgDate)}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{readonly:"",label:"Название ЛПУ",color:e.subSystem.primaryColor},model:{value:e.currentRgResult.rgLocation.rgLocationComment,callback:function(t){e.$set(e.currentRgResult.rgLocation,"rgLocationComment",t)},expression:"currentRgResult.rgLocation.rgLocationComment"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-select",{attrs:{readonly:"",items:e.rgResultTypes,label:"Норма",color:e.subSystem.primaryColor},model:{value:e.currentRgResult.rgResult.rgResultType,callback:function(t){e.$set(e.currentRgResult.rgResult,"rgResultType",t)},expression:"currentRgResult.rgResult.rgResultType"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{readonly:"",label:"Заключение",color:e.subSystem.primaryColor},model:{value:e.currentRgResult.rgResult.rgResultComment,callback:function(t){e.$set(e.currentRgResult.rgResult,"rgResultComment",t)},expression:"currentRgResult.rgResult.rgResultComment"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.noRgViewDialog(t)}}},[e._v("Закрыть")])],1)],1)],1)],1)},staticRenderFns:[]};var A=a("VU/8")(N,I,!1,function(e){a("r10Q")},null,null).exports,U="http://"+window.location.hostname+":3001",$={data:function(){return{currentUser:{},patientQuery:{},patients:[],currentEditPatient:{bloodResults:[],urineClinicalResults:[],smearResults:[],rwResults:[]},currentBloodResult:{bloodDate:"",bloodNumber:"",bloodResult:{hemoglobin:"",leucocytes:"",esr:"",basophils:"",eosinophils:"",blasts:"",myelocytes:"",young:"",sticks:"",segments:"",lymphocytes:"",monocytes:"",normoblasts:"",tng:""}},currentUrineClinicalResult:{urineDate:"",urineNumber:"",urineGeneral:{color:{colorType:"",colorName:""},reaction:{reactionType:"",reactionName:""},density:"",transparency:"",protein:"",glucose:{glucoseType:"",glucoseName:""},acetone:{acetoneType:"",acetoneName:""},bile:!1},urineElements:{flatEpithelium:"",tractEpithelium:"",renalEpithelium:"",leucocytes:"",erythrocytes:"",cylinders:{hyaline:"",granular:"",waxy:"",epithelial:""},salts:{saltsId:"",saltsName:""},slime:!1}},currentSmearResult:{smearDate:"",smearNumber:"",smearResult:{smearGonococcus:!1,smearLeucocytes:0,smearDiplococcus:!1,smearEpithelium:!1,smearFlora:"",smearSlime:"",smearTrichomonas:!1,smearFungus:!1,smearKeyCells:!1}},currentRwResult:{rwDate:"",rwNumber:"",rwResult:1},currentRemoveItem:{},listAnalyzesDialog:{show:!1,analyzeType:""},addAnalyzeDialog:{show:!1,edit:!1},removeDialog:{show:!1},urineColors:[{value:{colorType:1,colorName:"желтый"},text:"1 - желтый"},{value:{colorType:2,colorName:"светло-желтый"},text:"2 - светло-желтый"},{value:{colorType:3,colorName:"соломенно-желтый"},text:"3 - соломенно-желтый"},{value:{colorType:4,colorName:"бесцветный"},text:"4 - бесцветный"}],urineReactions:[{value:{reactionType:1,reactionName:"кислая"},text:"1 - кислая"},{value:{reactionType:2,reactionName:"щелочная"},text:"2 - щелочная"},{value:{reactionType:3,reactionName:"слабокислая"},text:"3 - слабокислая"},{value:{reactionType:4,reactionName:"нейтральная"},text:"4 - нейтральная"}],urineTransparency:[{value:!0,text:"1 - прозрачая"},{value:!1,text:"2 - мутная"}],urineGlucose:[{value:{glucoseType:1,glucoseName:"0"},text:"1 - 0"},{value:{glucoseType:2,glucoseName:"5,6"},text:"2 - 5,6"},{value:{glucoseType:3,glucoseName:"28"},text:"3 - 28"},{value:{glucoseType:4,glucoseName:"56"},text:"4 - 56"},{value:{glucoseType:5,glucoseName:">=111"},text:"5 - >=111"}],urineAcetone:[{value:{acetoneType:1,acetoneName:"0"},text:"1 - 0"},{value:{acetoneType:2,acetoneName:"+-"},text:"2 - +-"},{value:{acetoneType:3,acetoneName:"+"},text:"3 - +"},{value:{acetoneType:4,acetoneName:"++"},text:"4 - ++"},{value:{acetoneType:5,acetoneName:"+++"},text:"5 - +++"}],urineBile:[{value:!0,text:"1 - есть"},{value:!1,text:"0 - нет"}],urineSalts:[{value:{saltsId:0,saltsName:"нет"},text:"0 - нет"},{value:{saltsId:1,saltsName:"ураты"},text:"1 - ураты"},{value:{saltsId:2,saltsName:"фосфаты"},text:"2 - фосфаты"},{value:{saltsId:3,saltsName:"оксолаты"},text:"3 - оксолаты"},{value:{saltsId:4,saltsName:"мочевой кислоты"},text:"4 - мочевой кислоты"},{value:{saltsId:5,saltsName:"трипельфосфаты"},text:"5 - трипельфосфаты"},{value:{saltsId:6,saltsName:"холестерин"},text:"6 - холестерин"},{value:{saltsId:7,saltsName:"билирубин"},text:"7 - билирубин"}],urineSlime:[{value:!0,text:"1 - есть"},{value:!1,text:"0 - нет"}],smearBoolean:[{value:!1,text:"1 - Не обнаружены"},{value:!0,text:"2 - Обнаружены"}],smearLeucocytes:[{value:1,text:"1 - Единичные"},{value:2,text:"2 - до 25"},{value:3,text:"3 - до 50"},{value:4,text:"4 - до 100"},{value:5,text:"5 - выше 100"}],rwTypes:[{value:1,text:"1 - Отрицительный"},{value:2,text:"2 - Положительный X"},{value:3,text:"3 - Положительный XX"},{value:4,text:"4 - Положительный XXX"},{value:5,text:"5 - Положительный XXXX"},{value:6,text:"6 - Гемолиз"},{value:7,text:"7 - Хилезная"},{value:8,text:"8 - Брак"}],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"red darken-4",secondaryColor:"yellow darken-4",deleteColor:"red"}}},mounted:function(){this.getCurrentUser()},methods:{openBloodResultsListDialog:function(e){this.currentEditPatient=e,this.listAnalyzesDialog={show:!0,analyzeType:"blood"}},openUrineResultsListDialog:function(e){this.currentEditPatient=e,this.listAnalyzesDialog={show:!0,analyzeType:"urineClinical"}},openSmearResultsListDialog:function(e){this.currentEditPatient=e,this.listAnalyzesDialog={show:!0,analyzeType:"smear"}},openRwResultsListDialog:function(e){this.currentEditPatient=e,this.listAnalyzesDialog={show:!0,analyzeType:"rw"}},noResultsListDialog:function(){this.currentEditPatient={bloodResults:[],urineClinicalResults:[],smearResults:[],rwResults:[]},this.listAnalyzesDialog={show:!1,analyzeType:""}},openResultDialog:function(e){var t=this.listAnalyzesDialog.analyzeType;if(e.edit)switch(t){case"blood":this.currentBloodResult=e.item;break;case"urineClinical":this.currentUrineClinicalResult=e.item;break;case"smear":this.currentSmearResult=e.item;break;case"rw":this.currentRwResult=e.item}else switch(t){case"blood":this.currentBloodResult.bloodDate=this.dateFromIso(Date.now());break;case"urineClinical":this.currentUrineClinicalResult.urineDate=this.dateFromIso(Date.now());break;case"smear":this.currentSmearResult.smearDate=this.dateFromIso(Date.now());break;case"rw":this.currentRwResult.rwDate=this.dateFromIso(Date.now())}this.addAnalyzeDialog={show:!0,edit:e.edit}},noResultDialog:function(){switch(this.listAnalyzesDialog.analyzeType){case"blood":this.currentBloodResult={bloodDate:"",bloodNumber:"",bloodResult:{hemoglobin:"",leucocytes:"",esr:"",basophils:"",eosinophils:"",blasts:"",myelocytes:"",young:"",sticks:"",segments:"",lymphocytes:"",monocytes:"",normoblasts:"",tng:""}};break;case"urineClinical":this.currentUrineClinicalResult={urineDate:"",urineNumber:"",urineGeneral:{color:{colorType:"",colorName:""},reaction:{reactionType:"",reactionName:""},density:"",transparency:"",protein:"",glucose:{glucoseType:"",glucoseName:""},acetone:{acetoneType:"",acetoneName:""},bile:!1},urineElements:{flatEpithelium:"",tractEpithelium:"",renalEpithelium:"",leucocytes:"",erythrocytes:"",cylinders:{hyaline:"",granular:"",waxy:"",epithelial:""},salts:{saltsId:"",saltsName:""},slime:!1}};break;case"smear":this.currentSmearResult={smearDate:"",smearNumber:"",smearResult:{smearGonococcus:!1,smearLeucocytes:0,smearDiplococcus:!1,smearEpithelium:!1,smearFlora:"",smearSlime:"",smearTrichomonas:!1,smearFungus:!1,smearKeyCells:!1}};break;case"rw":this.currentRwResult={rwDate:"",rwNumber:"",rwResult:""}}this.addAnalyzeDialog={show:!1,analyzeType:""}},yesResultDialog:function(){var e=this,t={},a=this.listAnalyzesDialog.analyzeType;switch(a){case"blood":t=this.currentBloodResult;break;case"urineClinical":t=this.currentUrineClinicalResult;break;case"smear":t=this.currentSmearResult;break;case"rw":t=this.currentRwResult}switch(this.addAnalyzeDialog.edit){case!0:l.a.put(U+"/api/v1/patient/"+this.currentEditPatient._id+"/analyze/"+t._id,{analyzeType:a,analyzeResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){if(t.data.success){var r={};switch(a){case"blood":r=t.data.patient.bloodResults.find(function(t){return e.dateFromIso(t.bloodDate)===e.currentBloodResult.bloodDate}),e.currentEditPatient.bloodResults.push(r),e.currentBloodResult={bloodDate:"",bloodNumber:"",bloodResult:{hemoglobin:"",leucocytes:"",esr:"",basophils:"",eosinophils:"",blasts:"",myelocytes:"",young:"",sticks:"",segments:"",lymphocytes:"",monocytes:"",normoblasts:"",tng:""}};break;case"urineClinical":r=t.data.patient.urineClinicalResults.find(function(t){return e.dateFromIso(t.urineDate)===e.currentUrineClinicalResult.urineDate}),e.currentEditPatient.urineClinicalResults.push(r),e.currentUrineClinicalResult={urineDate:"",urineNumber:"",urineGeneral:{color:{colorType:"",colorName:""},reaction:{reactionType:"",reactionName:""},density:"",transparency:"",protein:"",glucose:{glucoseType:"",glucoseName:""},acetone:{acetoneType:"",acetoneName:""},bile:!1},urineElements:{flatEpithelium:"",tractEpithelium:"",renalEpithelium:"",leucocytes:"",erythrocytes:"",cylinders:{hyaline:"",granular:"",waxy:"",epithelial:""},salts:{saltsId:"",saltsName:""},slime:!1}};break;case"smear":r=t.data.patient.smearResults.find(function(t){return e.dateFromIso(t.smearDate)===e.currentSmearResult.smearDate}),e.currentEditPatient.smearResults.push(r),e.currentSmearResult={smearDate:"",smearNumber:"",smearResult:{smearGonococcus:!1,smearLeucocytes:0,smearDiplococcus:!1,smearEpithelium:!1,smearFlora:"",smearSlime:"",smearTrichomonas:!1,smearFungus:!1,smearKeyCells:!1}};break;case"rw":r=t.data.patient.rwResults.find(function(t){return e.dateFromIso(t.rwDate)===e.currentRwResult.rwDate}),e.currentEditPatient.rwResults.push(r),e.currentRwResult={rwDate:"",rwNumber:"",rwResult:""}}e.addAnalyzeDialog={show:!1,analyzeType:""},e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3}else e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3;e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)});break;case!1:l.a.post(U+"/api/v1/patient/"+this.currentEditPatient._id+"/analyze/",{analyzeType:a,analyzeResult:t},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){if(t.data.success){var r={};switch(a){case"blood":r=t.data.patient.bloodResults.find(function(t){return e.dateFromIso(t.bloodDate)===e.currentBloodResult.bloodDate}),e.currentEditPatient.bloodResults.push(r),e.currentBloodResult={bloodDate:"",bloodNumber:"",bloodResult:{hemoglobin:"",leucocytes:"",esr:"",basophils:"",eosinophils:"",blasts:"",myelocytes:"",young:"",sticks:"",segments:"",lymphocytes:"",monocytes:"",normoblasts:"",tng:""}};break;case"urineClinical":r=t.data.patient.urineClinicalResults.find(function(t){return e.dateFromIso(t.urineDate)===e.currentUrineClinicalResult.urineDate}),e.currentEditPatient.urineClinicalResults.push(r),e.currentUrineClinicalResult={urineDate:"",urineNumber:"",urineGeneral:{color:{colorType:"",colorName:""},reaction:{reactionType:"",reactionName:""},density:"",transparency:"",protein:"",glucose:{glucoseType:"",glucoseName:""},acetone:{acetoneType:"",acetoneName:""},bile:!1},urineElements:{flatEpithelium:"",tractEpithelium:"",renalEpithelium:"",leucocytes:"",erythrocytes:"",cylinders:{hyaline:"",granular:"",waxy:"",epithelial:""},salts:{saltsId:"",saltsName:""},slime:!1}};break;case"smear":r=t.data.patient.smearResults.find(function(t){return e.dateFromIso(t.smearDate)===e.currentSmearResult.smearDate}),e.currentEditPatient.smearResults.push(r),e.currentSmearResult={smearDate:"",smearNumber:"",smearResult:{smearGonococcus:!1,smearLeucocytes:0,smearDiplococcus:!1,smearEpithelium:!1,smearFlora:"",smearSlime:"",smearTrichomonas:!1,smearFungus:!1,smearKeyCells:!1}};break;case"rw":r=t.data.patient.rwResults.find(function(t){return e.dateFromIso(t.rwDate)===e.currentRwResult.rwDate}),e.currentEditPatient.rwResults.push(r),e.currentRwResult={rwDate:"",rwNumber:"",rwResult:""}}e.addAnalyzeDialog={show:!1,analyzeType:""},e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3}else e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3;e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})}},openRemoveDialog:function(e){this.currentRemoveItem=e,this.removeDialog={show:!0}},noRemoveDialog:function(){this.currentRemoveItem={},this.removeDialog={show:!1}},yesRemoveDialog:function(){var e=this,t=this.listAnalyzesDialog.analyzeType;l.a.delete(U+"/api/v1/patient/"+this.currentEditPatient._id+"/analyze/"+this.currentRemoveItem._id,{headers:{Authorization:u.getAuthenticationHeader(this)},data:{analyzeType:t}}).then(function(a){a.data.success?("blood"===t?e.currentEditPatient.bloodResults=e.currentEditPatient.bloodResults.filter(function(t){return t._id!==e.currentRemoveItem._id}):"urineClinical"===t?e.currentEditPatient.urineClinicalResults=e.currentEditPatient.urineClinicalResults.filter(function(t){return t._id!==e.currentRemoveItem._id}):"smear"===t?e.currentEditPatient.smearResults=e.currentEditPatient.smearResults.filter(function(t){return t._id!==e.currentRemoveItem._id}):"rw"===t&&(e.currentEditPatient.rwResults=e.currentEditPatient.rwResults.filter(function(t){return t._id!==e.currentRemoveItem._id})),e.removeDialog.show=!1,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=a.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)})},ifPatientNeedsSmear:function(e){return!!(e.hasActiveMedos||e.smearResults&&e.smearResults.length>0)&&e.activeMedos.medosExams.mustExams.some(function(e){return 43===e.examId})},ifPatientNeedsRw:function(e){return!!(e.hasActiveMedos||e.rwResults&&e.rwResults.length>0)&&e.activeMedos.medosExams.mustExams.some(function(e){return 42===e.examId})},getPatients:function(){var e=this,t={};t.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,t.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,t.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(U+"/api/v1/patient/"+t.lastName+"/"+t.firstName+"/"+t.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.show=!1,e.patients=t.data.patients,e.patients.forEach(function(t){t.dateBirth=e.dateFromIso(t.dateBirth)})):(e.patients=[],e.snackBar.show=!0,e.snackBar.color="yellow accent-3 black--text",e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})},getCurrentUser:function(){var e=this;l.a.get(U+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;e.currentUser=a}).catch(function(t){e.errorHandler(t)})},dateFromIso:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},errorHandler:function(e){var t=e.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===t&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=e.response.data.message}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:e.subSystem.primaryColor,subtitle:"Лаборатория",currentUser:e.currentUser}}),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[e._v("Поиск пациентов")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.lastName,callback:function(t){e.$set(e.patientQuery,"lastName",t)},expression:"patientQuery.lastName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.firstName,callback:function(t){e.$set(e.patientQuery,"firstName",t)},expression:"patientQuery.firstName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.middleName,callback:function(t){e.$set(e.patientQuery,"middleName",t)},expression:"patientQuery.middleName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){return e.getPatients(t)}}},[e._v("Найти")])],1)],1),e._v(" "),e.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:e.patients,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",{attrs:{width:"72px"}},[a("v-tooltip",{attrs:{right:"",color:"light-blue darken-4"}},[t.item.hasActiveMedos?a("v-icon",{attrs:{slot:"activator",color:"light-blue darken-4"},slot:"activator"},[e._v("\n                        assignment_ind\n                      ")]):e._e(),e._v(" "),a("span",[e._v("Пациент проходит мед. осмотр")])],1)],1),e._v(" "),a("td",[e._v(e._s(t.item.fio))]),e._v(" "),a("td",[e._v(e._s(t.item.dateBirth))]),e._v(" "),a("td",[e._v(e._s(t.item.sex?"Муж":"Жен"))]),e._v(" "),a("td",{attrs:{width:"266px"}},[a("v-tooltip",{attrs:{top:"",color:e.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openBloodResultsListDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("colorize")])],1),e._v(" "),a("span",[e._v("Список анализов крови")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:e.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){e.openUrineResultsListDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("colorize")])],1),e._v(" "),a("span",[e._v("Список анализов мочи")])],1),e._v(" "),e.ifPatientNeedsSmear(t.item)?a("v-tooltip",{attrs:{top:"",color:"purple darken-3"}},[a("v-btn",{attrs:{slot:"activator",color:"purple darken-3",icon:""},nativeOn:{click:function(a){e.openSmearResultsListDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("colorize")])],1),e._v(" "),a("span",[e._v("Список мазков")])],1):e._e(),e._v(" "),e.ifPatientNeedsRw(t.item)?a("v-tooltip",{attrs:{top:"",color:"blue-grey darken-4"}},[a("v-btn",{attrs:{slot:"activator",color:"blue-grey darken-4",icon:""},nativeOn:{click:function(a){e.openRwResultsListDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("colorize")])],1),e._v(" "),a("span",[e._v("Список анализов RW")])],1):e._e()],1)])]}}])}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("app-footer",{attrs:{subsystem:e.subSystem.primaryColor,currentUser:e.currentUser}}),e._v(" "),a("v-snackbar",{attrs:{timeout:e.snackBar.timeout,right:"right",color:e.snackBar.color},model:{value:e.snackBar.show,callback:function(t){e.$set(e.snackBar,"show",t)},expression:"snackBar.show"}},[e._v("\n    "+e._s(e.snackBar.message)+"\n  ")]),e._v(" "),a("v-dialog",{attrs:{persistent:"",lazy:"","max-width":"800px"},model:{value:e.listAnalyzesDialog.show,callback:function(t){e.$set(e.listAnalyzesDialog,"show",t)},expression:"listAnalyzesDialog.show"}},["blood"===e.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Анализы крови пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){e.openResultDialog({edit:!1})}}},[e._v("\n              Добавить анализ крови\n            ")])],1)],1)],1),e._v(" "),a("v-card-text",[e.currentEditPatient.bloodResults.length>0?a("v-container",{attrs:{"grid-list-md":""}},[a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{headers:[{text:"Дата анализа",value:"bloodDate"},{text:"Гемоглобин",value:"bloodResult.hemoglobin"},{text:"Лейкоциты",value:"bloodResult.leucocytes"},{text:"СОЭ",value:"bloodResult.esr"},{text:"Действия",value:""}],items:e.currentEditPatient.bloodResults,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(e._f("formatDate")(t.item.bloodDate)))]),e._v(" "),a("td",[e._v(e._s(t.item.bloodResult.hemoglobin))]),e._v(" "),a("td",[e._v(e._s(t.item.bloodResult.leucocytes))]),e._v(" "),a("td",[e._v(e._s(t.item.bloodResult.esr))]),e._v(" "),a("td",{attrs:{width:"172px"}},[a("v-tooltip",{attrs:{top:"",color:e.subSystem.primaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openResultDialog({edit:!0,item:t.item})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("colorize")])],1),e._v(" "),a("span",[e._v("Информация об анализе")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:e.subSystem.deleteColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.deleteColor,icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1),e._v(" "),a("span",[e._v("Удалить анализ")])],1)],1)])]}}])})],1):e._e()],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.noResultsListDialog(t)}}},[e._v("Закрыть")])],1)],1):e._e(),e._v(" "),"urineClinical"===e.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Анализы мочи пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){e.openResultDialog({edit:!1})}}},[e._v("\n              Добавить анализ мочи\n            ")])],1)],1)],1),e._v(" "),a("v-card-text",[e.currentEditPatient.urineClinicalResults.length>0?a("v-container",{attrs:{"grid-list-md":""}},[a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{headers:[{text:"Дата анализа",value:"urineDate"},{text:"Цвет",value:"urineGeneral.color.colorName"},{text:"Реакция",value:"urineGeneral.reaction.reactionName"},{text:"Плотность",value:"urineGeneral.density"},{text:"Действия",value:""}],items:e.currentEditPatient.urineClinicalResults,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(e._f("formatDate")(t.item.urineDate)))]),e._v(" "),a("td",[e._v(e._s(t.item.urineGeneral.color.colorName))]),e._v(" "),a("td",[e._v(e._s(t.item.urineGeneral.reaction.reactionName))]),e._v(" "),a("td",[e._v(e._s(t.item.urineGeneral.density))]),e._v(" "),a("td",{attrs:{width:"172px"}},[a("v-tooltip",{attrs:{top:"",color:e.subSystem.secondaryColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){e.openResultDialog({edit:!0,item:t.item})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("colorize")])],1),e._v(" "),a("span",[e._v("Информация об анализе")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:e.subSystem.deleteColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.deleteColor,icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1),e._v(" "),a("span",[e._v("Удалить анализ")])],1)],1)])]}}])})],1):e._e()],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.secondaryColor,flat:""},nativeOn:{click:function(t){return e.noResultsListDialog(t)}}},[e._v("Закрыть")])],1)],1):e._e(),e._v(" "),"smear"===e.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Мазки пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:"purple darken-3",dark:"",large:"",block:""},nativeOn:{click:function(t){e.openResultDialog({edit:!1})}}},[e._v("\n              Добавить мазок\n            ")])],1)],1)],1),e._v(" "),a("v-card-text",[e.currentEditPatient.smearResults.length>0?a("v-container",{attrs:{"grid-list-md":""}},[a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{headers:[{text:"Дата анализа",value:"smearDate"},{text:"Гонококки",value:"smearResult.smearGonococcus"},{text:"Лейкоциты",value:"smearResult.smearLeucocytes"},{text:"Действия",value:""}],items:e.currentEditPatient.smearResults,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(e._f("formatDate")(t.item.smearDate)))]),e._v(" "),a("td",[e._v(e._s(t.item.smearResult.smearGonococcus?"Обнаружены":"Не обнаружены"))]),e._v(" "),a("td",[e._v(e._s(e.smearLeucocytes.find(function(e){return e.value===t.item.smearResult.smearLeucocytes}).text))]),e._v(" "),a("td",{attrs:{width:"172px"}},[a("v-tooltip",{attrs:{top:"",color:"purple darken-3"}},[a("v-btn",{attrs:{slot:"activator",color:"purple darken-3",icon:""},nativeOn:{click:function(a){e.openResultDialog({edit:!0,item:t.item})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("colorize")])],1),e._v(" "),a("span",[e._v("Информация об анализе")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:e.subSystem.deleteColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.deleteColor,icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1),e._v(" "),a("span",[e._v("Удалить анализ")])],1)],1)])]}}])})],1):e._e()],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"purple darken-3",flat:""},nativeOn:{click:function(t){return e.noResultsListDialog(t)}}},[e._v("Закрыть")])],1)],1):e._e(),e._v(" "),"rw"===e.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Анализы на RW пациента "),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md12:""}},[a("v-btn",{attrs:{color:"blue-grey darken-4",dark:"",large:"",block:""},nativeOn:{click:function(t){e.openResultDialog({edit:!1})}}},[e._v("\n              Добавить анализ\n            ")])],1)],1)],1),e._v(" "),a("v-card-text",[e.currentEditPatient.rwResults.length>0?a("v-container",{attrs:{"grid-list-md":""}},[a("v-data-table",{staticClass:"elevation-5 mt-4",attrs:{headers:[{text:"Дата анализа",value:"rwDate"},{text:"RW",value:"rwResult"},{text:"Действия",value:""}],items:e.currentEditPatient.rwResults,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(e._f("formatDate")(t.item.rwDate)))]),e._v(" "),a("td",[e._v(e._s(e.rwTypes.find(function(e){return e.value===t.item.rwResult}).text))]),e._v(" "),a("td",{attrs:{width:"172px"}},[a("v-tooltip",{attrs:{top:"",color:"blue-grey darken-4"}},[a("v-btn",{attrs:{slot:"activator",color:"blue-grey darken-4",icon:""},nativeOn:{click:function(a){e.openResultDialog({edit:!0,item:t.item})}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("colorize")])],1),e._v(" "),a("span",[e._v("Информация об анализе")])],1),e._v(" "),a("v-tooltip",{attrs:{top:"",color:e.subSystem.deleteColor}},[a("v-btn",{attrs:{slot:"activator",color:e.subSystem.deleteColor,icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}},slot:"activator"},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1),e._v(" "),a("span",[e._v("Удалить анализ")])],1)],1)])]}}])})],1):e._e()],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"purple darken-3",flat:""},nativeOn:{click:function(t){return e.noResultsListDialog(t)}}},[e._v("Закрыть")])],1)],1):e._e()],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",lazy:"","max-width":"800px"},model:{value:e.addAnalyzeDialog.show,callback:function(t){e.$set(e.addAnalyzeDialog,"show",t)},expression:"addAnalyzeDialog.show"}},["blood"===e.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:""}},[a("span",{staticClass:"headline"},[e._v("\n          Добавление анализа крови для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))]),e._v("?\n        ")])])],1),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[e.addAnalyzeDialog.edit?e._e():a("v-text-field",{attrs:{label:"Дата анализа",color:e.subSystem.primaryColor,mask:"##.##.####","return-masked-value":""},model:{value:e.currentBloodResult.bloodDate,callback:function(t){e.$set(e.currentBloodResult,"bloodDate",t)},expression:"currentBloodResult.bloodDate"}}),e._v(" "),e.addAnalyzeDialog.edit?a("v-text-field",{attrs:{label:"Дата анализа",color:e.subSystem.primaryColor,value:e.dateFromIso(e.currentBloodResult.bloodDate),readonly:"",disabled:""}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Номер",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodNumber,callback:function(t){e.$set(e.currentBloodResult,"bloodNumber",t)},expression:"currentBloodResult.bloodNumber"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-spacer")],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[e._v("Общий клинический анализ крови")])])],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Гемоглобин",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.hemoglobin,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"hemoglobin",t)},expression:"currentBloodResult.bloodResult.hemoglobin"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Лейкоциты",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.leucocytes,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"leucocytes",t)},expression:"currentBloodResult.bloodResult.leucocytes"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"СОЭ",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.esr,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"esr",t)},expression:"currentBloodResult.bloodResult.esr"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Базофилы",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.basophils,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"basophils",t)},expression:"currentBloodResult.bloodResult.basophils"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Эозинофилы",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.eosinophils,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"eosinophils",t)},expression:"currentBloodResult.bloodResult.eosinophils"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Бласты",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.blasts,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"blasts",t)},expression:"currentBloodResult.bloodResult.blasts"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Миелоциты",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.myelocytes,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"myelocytes",t)},expression:"currentBloodResult.bloodResult.myelocytes"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Юные",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.young,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"young",t)},expression:"currentBloodResult.bloodResult.young"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Палочки",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.sticks,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"sticks",t)},expression:"currentBloodResult.bloodResult.sticks"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Сегменты",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.segments,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"segments",t)},expression:"currentBloodResult.bloodResult.segments"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Лимфоциты",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.lymphocytes,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"lymphocytes",t)},expression:"currentBloodResult.bloodResult.lymphocytes"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Моноциты",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.monocytes,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"monocytes",t)},expression:"currentBloodResult.bloodResult.monocytes"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Нормобласты",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.normoblasts,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"normoblasts",t)},expression:"currentBloodResult.bloodResult.normoblasts"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Токсич. зерн. нейтроф.",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.tng,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"tng",t)},expression:"currentBloodResult.bloodResult.tng"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[e._v("Биохимический анализ крови")])])],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Сахар",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.sugar,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"sugar",t)},expression:"currentBloodResult.bloodResult.sugar"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Холистерин",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.cholesterol,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"cholesterol",t)},expression:"currentBloodResult.bloodResult.cholesterol"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Протромбин",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.prothrombin,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"prothrombin",t)},expression:"currentBloodResult.bloodResult.prothrombin"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"МНО",color:e.subSystem.primaryColor},model:{value:e.currentBloodResult.bloodResult.inr,callback:function(t){e.$set(e.currentBloodResult.bloodResult,"inr",t)},expression:"currentBloodResult.bloodResult.inr"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.noResultDialog(t)}}},[e._v("Закрыть\n        ")]),e._v(" "),e.addAnalyzeDialog.edit?e._e():a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesResultDialog(t)}}},[e._v("\n          Добавить\n        ")]),e._v(" "),e.addAnalyzeDialog.edit?a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesResultDialog(t)}}},[e._v("\n          Изменить\n        ")]):e._e()],1)],1):e._e(),e._v(" "),"urineClinical"===e.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:""}},[a("span",{staticClass:"headline"},[e._v("\n          Добавление анализа мочи для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))]),e._v("?\n        ")])])],1),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[e.addAnalyzeDialog.edit?e._e():a("v-text-field",{attrs:{label:"Дата анализа",color:e.subSystem.primaryColor,mask:"##.##.####","return-masked-value":""},model:{value:e.currentUrineClinicalResult.urineDate,callback:function(t){e.$set(e.currentUrineClinicalResult,"urineDate",t)},expression:"currentUrineClinicalResult.urineDate"}}),e._v(" "),e.addAnalyzeDialog.edit?a("v-text-field",{attrs:{label:"Дата анализа",color:e.subSystem.primaryColor,value:e.dateFromIso(e.currentUrineClinicalResult.urineDate),readonly:"",disabled:""}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Номер",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineNumber,callback:function(t){e.$set(e.currentUrineClinicalResult,"urineNumber",t)},expression:"currentUrineClinicalResult.urineNumber"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-spacer")],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h2",[e._v("Общий анализ мочи")])])],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.urineColors,label:"Цвет",color:e.subSystem.secondaryColor,autocomplete:""},model:{value:e.currentUrineClinicalResult.urineGeneral.color,callback:function(t){e.$set(e.currentUrineClinicalResult.urineGeneral,"color",t)},expression:"currentUrineClinicalResult.urineGeneral.color"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.urineReactions,label:"Реакция",color:e.subSystem.secondaryColor,autocomplete:""},model:{value:e.currentUrineClinicalResult.urineGeneral.reaction,callback:function(t){e.$set(e.currentUrineClinicalResult.urineGeneral,"reaction",t)},expression:"currentUrineClinicalResult.urineGeneral.reaction"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Плотность",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineGeneral.density,callback:function(t){e.$set(e.currentUrineClinicalResult.urineGeneral,"density",t)},expression:"currentUrineClinicalResult.urineGeneral.density"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.urineTransparency,label:"Прозрачность",color:e.subSystem.secondaryColor,autocomplete:""},model:{value:e.currentUrineClinicalResult.urineGeneral.transparency,callback:function(t){e.$set(e.currentUrineClinicalResult.urineGeneral,"transparency",t)},expression:"currentUrineClinicalResult.urineGeneral.transparency"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Белок",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineGeneral.protein,callback:function(t){e.$set(e.currentUrineClinicalResult.urineGeneral,"protein",t)},expression:"currentUrineClinicalResult.urineGeneral.protein"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.urineGlucose,label:"Глюкоза",color:e.subSystem.secondaryColor,autocomplete:""},model:{value:e.currentUrineClinicalResult.urineGeneral.glucose,callback:function(t){e.$set(e.currentUrineClinicalResult.urineGeneral,"glucose",t)},expression:"currentUrineClinicalResult.urineGeneral.glucose"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.urineAcetone,label:"Ацетон",color:e.subSystem.secondaryColor,autocomplete:""},model:{value:e.currentUrineClinicalResult.urineGeneral.acetone,callback:function(t){e.$set(e.currentUrineClinicalResult.urineGeneral,"acetone",t)},expression:"currentUrineClinicalResult.urineGeneral.acetone"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.urineBile,label:"Желч. пигмент",color:e.subSystem.secondaryColor,autocomplete:""},model:{value:e.currentUrineClinicalResult.urineGeneral.bile,callback:function(t){e.$set(e.currentUrineClinicalResult.urineGeneral,"bile",t)},expression:"currentUrineClinicalResult.urineGeneral.bile"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[e._v("Эпителий:")])])],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Плоский",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineElements.flatEpithelium,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements,"flatEpithelium",t)},expression:"currentUrineClinicalResult.urineElements.flatEpithelium"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Мочевыводящих путей",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineElements.tractEpithelium,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements,"tractEpithelium",t)},expression:"currentUrineClinicalResult.urineElements.tractEpithelium"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Почечный",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineElements.renalEpithelium,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements,"renalEpithelium",t)},expression:"currentUrineClinicalResult.urineElements.renalEpithelium"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Лейкоциты",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineElements.leucocytes,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements,"leucocytes",t)},expression:"currentUrineClinicalResult.urineElements.leucocytes"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Эритроциты",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineElements.erythrocytes,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements,"erythrocytes",t)},expression:"currentUrineClinicalResult.urineElements.erythrocytes"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[e._v("Цилиндры:")])])],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Гиалиновые",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineElements.cylinders.hyaline,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements.cylinders,"hyaline",t)},expression:"currentUrineClinicalResult.urineElements.cylinders.hyaline"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Зернистые",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineElements.cylinders.granular,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements.cylinders,"granular",t)},expression:"currentUrineClinicalResult.urineElements.cylinders.granular"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Восковидные",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineElements.cylinders.waxy,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements.cylinders,"waxy",t)},expression:"currentUrineClinicalResult.urineElements.cylinders.waxy"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-text-field",{attrs:{label:"Эпителиальные",color:e.subSystem.secondaryColor},model:{value:e.currentUrineClinicalResult.urineElements.cylinders.epithelial,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements.cylinders,"epithelial",t)},expression:"currentUrineClinicalResult.urineElements.cylinders.epithelial"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.urineSalts,label:"Соли",color:e.subSystem.secondaryColor,autocomplete:""},model:{value:e.currentUrineClinicalResult.urineElements.salts,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements,"salts",t)},expression:"currentUrineClinicalResult.urineElements.salts"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-select",{attrs:{items:e.urineSlime,label:"Слизь",color:e.subSystem.secondaryColor,autocomplete:""},model:{value:e.currentUrineClinicalResult.urineElements.slime,callback:function(t){e.$set(e.currentUrineClinicalResult.urineElements,"slime",t)},expression:"currentUrineClinicalResult.urineElements.slime"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.secondaryColor,flat:""},nativeOn:{click:function(t){return e.noResultDialog(t)}}},[e._v("Закрыть\n        ")]),e._v(" "),e.addAnalyzeDialog.edit?e._e():a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.secondaryColor},nativeOn:{click:function(t){return e.yesResultDialog(t)}}},[e._v("\n          Добавить\n        ")]),e._v(" "),e.addAnalyzeDialog.edit?a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.secondaryColor},nativeOn:{click:function(t){return e.yesResultDialog(t)}}},[e._v("\n          Изменить\n        ")]):e._e()],1)],1):e._e(),e._v(" "),"smear"===e.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:""}},[a("span",{staticClass:"headline"},[e._v("\n          Добавление мазка для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))]),e._v("?\n        ")])])],1),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[e.addAnalyzeDialog.edit?e._e():a("v-text-field",{attrs:{label:"Дата анализа",color:"purple darken-3",mask:"##.##.####","return-masked-value":""},model:{value:e.currentSmearResult.smearDate,callback:function(t){e.$set(e.currentSmearResult,"smearDate",t)},expression:"currentSmearResult.smearDate"}}),e._v(" "),e.addAnalyzeDialog.edit?a("v-text-field",{attrs:{label:"Дата анализа",color:"purple darken-3",value:e.dateFromIso(e.currentSmearResult.smearDate),readonly:"",disabled:""}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Номер",color:"purple darken-3"},model:{value:e.currentSmearResult.smearNumber,callback:function(t){e.$set(e.currentSmearResult,"smearNumber",t)},expression:"currentSmearResult.smearNumber"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-spacer")],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[e._v("Мазок на гонококк")])])],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.smearBoolean,label:"Гонококки",color:"purple darken-3",autocomplete:""},model:{value:e.currentSmearResult.smearResult.smearGonococcus,callback:function(t){e.$set(e.currentSmearResult.smearResult,"smearGonococcus",t)},expression:"currentSmearResult.smearResult.smearGonococcus"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.smearLeucocytes,label:"Лейкоциты",color:"purple darken-3",autocomplete:""},model:{value:e.currentSmearResult.smearResult.smearLeucocytes,callback:function(t){e.$set(e.currentSmearResult.smearResult,"smearLeucocytes",t)},expression:"currentSmearResult.smearResult.smearLeucocytes"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.smearBoolean,label:"Диплококки",color:"purple darken-3",autocomplete:""},model:{value:e.currentSmearResult.smearResult.smearDiplococcus,callback:function(t){e.$set(e.currentSmearResult.smearResult,"smearDiplococcus",t)},expression:"currentSmearResult.smearResult.smearDiplococcus"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.smearBoolean,label:"Клетки эпителия",color:"purple darken-3",autocomplete:""},model:{value:e.currentSmearResult.smearResult.smearEpithelium,callback:function(t){e.$set(e.currentSmearResult.smearResult,"smearEpithelium",t)},expression:"currentSmearResult.smearResult.smearEpithelium"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md3:""}},[a("v-select",{attrs:{items:e.smearBoolean,label:"Трихомонады",color:"purple darken-3",autocomplete:""},model:{value:e.currentSmearResult.smearResult.smearTrichomonas,callback:function(t){e.$set(e.currentSmearResult.smearResult,"smearTrichomonas",t)},expression:"currentSmearResult.smearResult.smearTrichomonas"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md5:""}},[a("v-select",{attrs:{items:e.smearBoolean,label:"Дрожжеподобные грибы",color:"purple darken-3",autocomplete:""},model:{value:e.currentSmearResult.smearResult.smearFungus,callback:function(t){e.$set(e.currentSmearResult.smearResult,"smearFungus",t)},expression:"currentSmearResult.smearResult.smearFungus"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-select",{attrs:{items:e.smearBoolean,label:"'Ключевые' клетки",color:"purple darken-3",autocomplete:""},model:{value:e.currentSmearResult.smearResult.smearKeyCells,callback:function(t){e.$set(e.currentSmearResult.smearResult,"smearKeyCells",t)},expression:"currentSmearResult.smearResult.smearKeyCells"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"purple darken-3",flat:""},nativeOn:{click:function(t){return e.noResultDialog(t)}}},[e._v("Закрыть\n        ")]),e._v(" "),e.addAnalyzeDialog.edit?e._e():a("v-btn",{staticClass:"white--text",attrs:{color:"purple darken-3"},nativeOn:{click:function(t){return e.yesResultDialog(t)}}},[e._v("\n          Добавить\n        ")]),e._v(" "),e.addAnalyzeDialog.edit?a("v-btn",{staticClass:"white--text",attrs:{color:"purple darken-3"},nativeOn:{click:function(t){return e.yesResultDialog(t)}}},[e._v("\n          Изменить\n        ")]):e._e()],1)],1):e._e(),e._v(" "),"rw"===e.listAnalyzesDialog.analyzeType?a("v-card",[a("v-card-title",[a("v-flex",{attrs:{sm12:""}},[a("span",{staticClass:"headline"},[e._v("\n          Добавление RW для"),a("br"),a("span",{staticClass:"green--text text--darken-2"},[e._v(e._s(e.currentEditPatient.fio))]),e._v("?\n        ")])])],1),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md2:""}},[e.addAnalyzeDialog.edit?e._e():a("v-text-field",{attrs:{label:"Дата анализа",color:"blue-grey darken-4",mask:"##.##.####","return-masked-value":""},model:{value:e.currentRwResult.rwDate,callback:function(t){e.$set(e.currentRwResult,"rwDate",t)},expression:"currentRwResult.rwDate"}}),e._v(" "),e.addAnalyzeDialog.edit?a("v-text-field",{attrs:{label:"Дата анализа",color:"blue-grey darken-4",value:e.dateFromIso(e.currentRwResult.rwDate),readonly:"",disabled:""}}):e._e()],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Номер",color:"blue-grey darken-4"},model:{value:e.currentRwResult.rwNumber,callback:function(t){e.$set(e.currentRwResult,"rwNumber",t)},expression:"currentRwResult.rwNumber"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-spacer")],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("h3",[e._v("Анализ крови на RW")])])],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-select",{attrs:{items:e.rwTypes,label:"RW результат",color:"blue-grey darken-4",autocomplete:""},model:{value:e.currentRwResult.rwResult,callback:function(t){e.$set(e.currentRwResult,"rwResult",t)},expression:"currentRwResult.rwResult"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey darken-4",flat:""},nativeOn:{click:function(t){return e.noResultDialog(t)}}},[e._v("Закрыть\n        ")]),e._v(" "),e.addAnalyzeDialog.edit?e._e():a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey darken-4"},nativeOn:{click:function(t){return e.yesResultDialog(t)}}},[e._v("\n          Добавить\n        ")]),e._v(" "),e.addAnalyzeDialog.edit?a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey darken-4"},nativeOn:{click:function(t){return e.yesResultDialog(t)}}},[e._v("\n          Изменить\n        ")]):e._e()],1)],1):e._e()],1),e._v(" "),a("v-dialog",{attrs:{persistent:"",lazy:"","max-width":"800px"},model:{value:e.removeDialog.show,callback:function(t){e.$set(e.removeDialog,"show",t)},expression:"removeDialog.show"}},[a("v-card",["blood"===e.listAnalyzesDialog.analyzeType?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Удалить анализ крови от "+e._s(e._f("formatDate")(e.currentRemoveItem.bloodDate))+" для"),a("br"),e._v(" "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentEditPatient.fio)+"»")]),e._v("?\n        ")])]):e._e(),e._v(" "),"urineClinical"===e.listAnalyzesDialog.analyzeType?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Удалить анализ мочи от "+e._s(e._f("formatDate")(e.currentRemoveItem.urineDate))+" для"),a("br"),e._v(" "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentEditPatient.fio)+"»")]),e._v("?\n        ")])]):e._e(),e._v(" "),"smear"===e.listAnalyzesDialog.analyzeType?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Удалить мазок от "+e._s(e._f("formatDate")(e.currentRemoveItem.smearDate))+" для"),a("br"),e._v(" "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentEditPatient.fio)+"»")]),e._v("?\n        ")])]):e._e(),e._v(" "),"rw"===e.listAnalyzesDialog.analyzeType?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Удалить RW от "+e._s(e._f("formatDate")(e.currentRemoveItem.rwDate))+" для"),a("br"),e._v(" "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentEditPatient.fio)+"»")]),e._v("?\n        ")])]):e._e(),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.deleteColor,flat:""},nativeOn:{click:function(t){return e.noRemoveDialog(t)}}},[e._v("Нет")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.deleteColor},nativeOn:{click:function(t){return e.yesRemoveDialog(t)}}},[e._v("Да")])],1)],1)],1)],1)},staticRenderFns:[]};var O=a("VU/8")($,j,!1,function(e){a("oTPd")},null,null).exports,H="http://"+window.location.hostname+":3001",z={data:function(){return{showAddDialog:!1,showListDialog:!1,patientQuery:{},showDateVaccination:!1,patients:[],currentUser:{},currentPatient:{},currentVaccine:{vaccine:{vaccineName:"",drugName:"",drugSeries:""},vaccineType:"",dateVaccination:"",dateRevaccination:"",invasionMethod:"",dose:"",controlNumber:"",dateExpiration:"",lpuCode:"",riskGroup:"",payment:"",updatedBy:""},currentVocabulary:{vocabularyVaccine:"",vocabularyDrugs:[],vocabularySeries:[]},vaccineVocabulary:[{vaccineId:"1",vaccineName:"Дифтерия",drugNames:[{drugName:"1-1",drugSeries:[{seriesName:"1-1-1",seriesExpiration:"01.01.2019"},{seriesName:"1-1-2",seriesExpiration:"01.01.2019"},{seriesName:"1-1-3",seriesExpiration:"01.01.2019"},{seriesName:"1-1-4",seriesExpiration:"01.01.2019"}]},{drugName:"1-2",drugSeries:[{seriesName:"1-2-1",seriesExpiration:"01.01.2019"},{seriesName:"1-2-2",seriesExpiration:"01.01.2019"},{seriesName:"1-2-3",seriesExpiration:"01.01.2019"},{seriesName:"1-2-4",seriesExpiration:"01.01.2019"}]},{drugName:"1-3",drugSeries:[{seriesName:"1-3-1",seriesExpiration:"01.01.2019"},{seriesName:"1-3-2",seriesExpiration:"01.01.2019"},{seriesName:"1-3-3",seriesExpiration:"01.01.2019"},{seriesName:"1-3-4",seriesExpiration:"01.01.2019"}]}]},{vaccineName:"2 - клещевой энцефалит",drugNames:[{drugName:"2-1",drugSeries:[{seriesName:"2-1-1",seriesExpiration:"01.01.2019"},{seriesName:"2-1-2",seriesExpiration:"01.01.2019"},{seriesName:"2-1-3",seriesExpiration:"01.01.2019"},{seriesName:"2-1-4",seriesExpiration:"01.01.2019"}]},{drugName:"2-2",drugSeries:[{seriesName:"2-2-1",seriesExpiration:"01.01.2019"},{seriesName:"2-2-2",seriesExpiration:"01.01.2019"},{seriesName:"2-2-3",seriesExpiration:"01.01.2019"},{seriesName:"2-2-4",seriesExpiration:"01.01.2019"}]},{drugName:"2-3",drugSeries:[{seriesName:"2-3-1",seriesExpiration:"01.01.2019"},{seriesName:"2-3-2",seriesExpiration:"01.01.2019"},{seriesName:"2-3-3",seriesExpiration:"01.01.2019"},{seriesName:"2-3-4",seriesExpiration:"01.01.2019"}]}]}],vaccineTypeVocabulary:["1 - V1","2 - V2","3 - V3","4 - IR","5 - RV"],methodVocabulary:["1 - подкожно","2 - внутримышечно","3 - интроназально","4 - накожно"],lpuVocabulary:["ЛПУ 1","ЛПУ 2","ЛПУ 3","ЛПУ 4","ЛПУ 5","ЛПУ 6","ЛПУ 7","ЛПУ 8"],riskGroupVocabulary:["1 - Рабочие ЧМК","2 - УКХ","3 - ОДУ","4 - ЧП","5 - Общепит"],snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"green darken-4",secondaryColor:"brown darken-2"}}},mounted:function(){var e=this;l.a.get(H+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;e.currentUser=a}).catch(function(t){e.errorHandler(t)})},methods:{getPatients:function(){var e=this,t={};t.lastName=void 0===this.patientQuery.lastName?" ":this.patientQuery.lastName,t.firstName=void 0===this.patientQuery.firstName?" ":this.patientQuery.firstName,t.middleName=void 0===this.patientQuery.middleName?" ":this.patientQuery.middleName,l.a.get(H+"/api/v1/patient/"+t.lastName+"/"+t.firstName+"/"+t.middleName+"/",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.snackBar.show=!1,e.patients=t.data.patients,e.patients.forEach(function(t){t.dateBirth=e.dateFromIso(t.dateBirth)})):(e.patients=[],e.snackBar.show=!0,e.snackBar.color="yellow accent-3 black--text",e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})},addVaccineDialog:function(e){this.showAddDialog=!0,this.currentPatient=e,this.currentVaccine={vaccine:{vaccineName:"",drugName:"",drugSeries:""},vaccineType:"",dateVaccination:"",dateRevaccination:"",invasionMethod:"",dose:"",controlNumber:"",dateExpiration:"",lpuCode:"",riskGroup:"",payment:"",updatedBy:""}},updateVocabularyDrug:function(){var e=this;""!==this.currentVaccine.vaccine.vaccineName&&(this.currentVocabulary.vocabularyDrugs=this.vaccineVocabulary.filter(function(t){return t.vaccineName===e.currentVaccine.vaccine.vaccineName})[0].drugNames.map(function(e){return e.drugName}))},updateVocabularySeries:function(){var e=this;""!==this.currentVaccine.vaccine.drugName&&(this.currentVocabulary.vocabularySeries=this.vaccineVocabulary.filter(function(t){return t.vaccineName===e.currentVaccine.vaccine.vaccineName})[0].drugNames.filter(function(t){return t.drugName===e.currentVaccine.vaccine.drugName})[0].drugSeries.map(function(e){return e.seriesName}))},updateDateExpiration:function(){var e=this;""!==this.currentVaccine.vaccine.drugSeries&&(this.currentVaccine.dateExpiration=this.vaccineVocabulary.filter(function(t){return t.vaccineName===e.currentVaccine.vaccine.vaccineName})[0].drugNames.filter(function(t){return t.drugName===e.currentVaccine.vaccine.drugName})[0].drugSeries.filter(function(t){return t.seriesName===e.currentVaccine.vaccine.drugSeries})[0].seriesExpiration)},closeAddDialog:function(){this.showAddDialog=!1,this.currentPatient={},this.currentVaccine={vaccine:{vaccineName:"",drugName:"",drugSeries:""},vaccineType:"",dateVaccination:"",dateRevaccination:"",invasionMethod:"",dose:"",controlNumber:"",dateExpiration:"",lpuCode:"",riskGroup:"",payment:"",updatedBy:""}},saveAddDialog:function(){this.currentVaccine.updatedBy=this.currentUser._id,this.currentVaccine.dateVaccination=this.toDate(this.currentVaccine.dateVaccination),this.currentVaccine.dateRevaccination=this.toDate(this.currentVaccine.dateRevaccination),this.currentVaccine.dateExpiration=this.toDate(this.currentVaccine.dateExpiration),this.currentPatient.newVaccine=this.currentVaccine,this.sendNewVaccine(),this.showAddDialog=!1},sendNewVaccine:function(){var e=this;l.a.post(H+"/api/v1/vaccine",this.currentPatient,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.showSnackbar=!1,e.currentVaccine={vaccine:{vaccineName:"",drugName:"",drugSeries:""},vaccineType:"",dateVaccination:"",dateRevaccination:"",invasionMethod:"",dose:"",controlNumber:"",dateExpiration:"",lpuCode:"",riskGroup:"",payment:"",updatedBy:""}):(e.showSnackbar=!0,e.snackColor="red lighten-1",e.snackMessage=t.data.message)}).catch(function(t){e.errorHandler(t)})},showVaccinesDialog:function(e){var t=this;this.currentPatient=e,l.a.get(H+"/api/v1/vaccines/"+e._id,{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(e){e.data.success?(t.showListDialog=!0,t.currentPatient.vaccines=e.data.vaccines):(t.showSnackbar=!0,t.snackColor="yellow accent-3 black--text",t.snackMessage=e.data.message)}).catch(function(e){t.errorHandler(e)})},closeVaccinesDialog:function(){this.showListDialog=!1},errorHandler:function(e){var t=e.response.status;this.showSnackbar=!0,this.snackColor="red lighten-1",401===t&&(this.snackMessage="Вы не авторизованы."),this.snackMessage=e.response.data.message},dateFromIso:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),s+"."+r+"."+a},toDate:function(e){var t=e.split(".");return new Date(t[2],t[1]-1,t[0])}}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:e.subSystem.primaryColor,subtitle:"Прививки",currentUser:e.currentUser}}),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[e._v("Поиск пациентов")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Фамилия",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.lastName,callback:function(t){e.$set(e.patientQuery,"lastName",t)},expression:"patientQuery.lastName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Имя",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.firstName,callback:function(t){e.$set(e.patientQuery,"firstName",t)},expression:"patientQuery.firstName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-text-field",{attrs:{color:e.subSystem.secondaryColor,label:"Отчество",box:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getPatients(t):null}},model:{value:e.patientQuery.middleName,callback:function(t){e.$set(e.patientQuery,"middleName",t)},expression:"patientQuery.middleName"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md12:""}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){return e.getPatients(t)}}},[e._v("Найти")])],1)],1),e._v(" "),e.patients.length>0?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{"hide-headers":"",items:e.patients,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.fio))]),e._v(" "),a("td",[e._v(e._s(t.item.dateBirth))]),e._v(" "),a("td",[e._v(e._s(t.item.sex?"Муж":"Жен"))]),e._v(" "),a("td",{attrs:{width:"211px"}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.addVaccineDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("note_add")])],1),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.secondaryColor,icon:""},nativeOn:{click:function(a){e.showVaccinesDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("local_drink")])],1),e._v(" "),t.item.hasActiveMedos?a("v-btn",{attrs:{color:"amber darken-4",icon:""},nativeOn:{click:function(t){e.console.log("medos")}}},[a("v-icon",{attrs:{color:"white"}},[e._v("account_box")])],1):e._e()],1)])]}}])}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("app-footer",{attrs:{subsystem:e.subSystem.primaryColor,currentUser:e.currentUser}}),e._v(" "),a("v-snackbar",{attrs:{timeout:e.snackBar.timeout,right:"right",color:e.snackBar.color},model:{value:e.snackBar.show,callback:function(t){e.$set(e.snackBar,"show",t)},expression:"snackBar.show"}},[e._v("\n    "+e._s(e.snackBar.message)+"\n  ")]),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.showAddDialog,callback:function(t){e.showAddDialog=t},expression:"showAddDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.currentPatient.fio))])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-select",{attrs:{items:e.vaccineVocabulary.map(function(e){return e.vaccineName}),label:"Прививка",autocomplete:"",color:e.subSystem.primaryColor},on:{blur:e.updateVocabularyDrug},model:{value:e.currentVaccine.vaccine.vaccineName,callback:function(t){e.$set(e.currentVaccine.vaccine,"vaccineName",t)},expression:"currentVaccine.vaccine.vaccineName"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-select",{attrs:{items:e.currentVocabulary.vocabularyDrugs,label:"Препарат",autocomplete:"",color:e.subSystem.primaryColor},on:{blur:e.updateVocabularySeries},model:{value:e.currentVaccine.vaccine.drugName,callback:function(t){e.$set(e.currentVaccine.vaccine,"drugName",t)},expression:"currentVaccine.vaccine.drugName"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-select",{attrs:{items:e.currentVocabulary.vocabularySeries,label:"Серия",autocomplete:"",color:e.subSystem.primaryColor},on:{blur:e.updateDateExpiration},model:{value:e.currentVaccine.vaccine.drugSeries,callback:function(t){e.$set(e.currentVaccine.vaccine,"drugSeries",t)},expression:"currentVaccine.vaccine.drugSeries"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md2:""}},[a("v-text-field",{attrs:{label:"Срок",color:e.subSystem.primaryColor,disabled:""},model:{value:e.currentVaccine.dateExpiration,callback:function(t){e.$set(e.currentVaccine,"dateExpiration",t)},expression:"currentVaccine.dateExpiration"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{items:e.methodVocabulary,label:"Метод введения",autocomplete:"",color:e.subSystem.primaryColor},model:{value:e.currentVaccine.invasionMethod,callback:function(t){e.$set(e.currentVaccine,"invasionMethod",t)},expression:"currentVaccine.invasionMethod"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md2:""}},[a("v-text-field",{attrs:{mask:"#.##","return-masked-value":"",label:"Доза",color:e.subSystem.primaryColor},model:{value:e.currentVaccine.dose,callback:function(t){e.$set(e.currentVaccine,"dose",t)},expression:"currentVaccine.dose"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-select",{attrs:{items:e.vaccineTypeVocabulary,label:"Тип вакцинации",autocomplete:"",color:e.subSystem.primaryColor},model:{value:e.currentVaccine.vaccineType,callback:function(t){e.$set(e.currentVaccine,"vaccineType",t)},expression:"currentVaccine.vaccineType"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-select",{attrs:{items:e.riskGroupVocabulary,label:"Группа риска",autocomplete:"",color:e.subSystem.primaryColor},model:{value:e.currentVaccine.riskGroup,callback:function(t){e.$set(e.currentVaccine,"riskGroup",t)},expression:"currentVaccine.riskGroup"}})],1)],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{mask:"##.##.####","return-masked-value":"",label:"Дата вакцинации",color:e.subSystem.primaryColor},model:{value:e.currentVaccine.dateVaccination,callback:function(t){e.$set(e.currentVaccine,"dateVaccination",t)},expression:"currentVaccine.dateVaccination"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{mask:"##.##.####","return-masked-value":"",label:"Дата ревакцинации",color:e.subSystem.primaryColor},model:{value:e.currentVaccine.dateRevaccination,callback:function(t){e.$set(e.currentVaccine,"dateRevaccination",t)},expression:"currentVaccine.dateRevaccination"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-select",{attrs:{items:["1 - платно","2 - бесплатно"],label:"Оплата",autocomplete:"",color:e.subSystem.primaryColor},model:{value:e.currentVaccine.payment,callback:function(t){e.$set(e.currentVaccine,"payment",t)},expression:"currentVaccine.payment"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-text-field",{attrs:{label:"Пользователь",color:e.subSystem.primaryColor,disabled:""},model:{value:e.currentUser.fio,callback:function(t){e.$set(e.currentUser,"fio",t)},expression:"currentUser.fio"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.secondaryColor,flat:""},nativeOn:{click:function(t){return e.closeAddDialog(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.saveAddDialog(t)}}},[e._v("Сохранить")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.showListDialog,callback:function(t){e.showListDialog=t},expression:"showListDialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[e._v("New Item")]),e._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.currentPatient.fio))])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{headers:[{text:"Прививка",value:"vaccine.vaccineName"},{text:"Дата вакцинации",value:"dateVaccination"},{text:"Дата ревакцинации",value:"dateRevaccination"}],items:e.currentPatient.vaccines,"rows-per-page-text":"Строк на странице:"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.vaccine.vaccineName))]),e._v(" "),a("td",[e._v(e._s(e._f("formatDate")(t.item.dateVaccination)))]),e._v(" "),a("td",[e._v(e._s(e._f("formatDate")(t.item.dateRevaccination)))]),e._v(" "),a("td",{attrs:{width:"156px"}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(t){e.document.console.log("lol")}}},[a("v-icon",{attrs:{color:"white"}},[e._v("edit")])],1),e._v(" "),a("v-btn",{attrs:{color:"red lighten-1",icon:""},nativeOn:{click:function(t){e.document.console.log("lol")}}},[a("v-icon",{attrs:{color:"white"}},[e._v("clear")])],1)],1)])]}},{key:"pageText",fn:function(t){var a=t.pageStart,r=t.pageStop;return[e._v("\n              с "+e._s(a)+" по "+e._s(r)+"\n            ")]}}])})],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.closeVaccinesDialog(t)}}},[e._v("Закрыть")])],1)],1)],1)],1)},staticRenderFns:[]};var T=a("VU/8")(z,M,!1,function(e){a("zbvE")},null,null).exports,L="http://"+window.location.hostname+":3001",V={data:function(){return{showUsers:!1,drawer:!1,users:[],currentUser:{},snackBar:{show:!1,message:"",timeout:1e4,color:""},subSystem:{primaryColor:"teal darken-4",secondaryColor:"lime darken-4",doctorName:""}}},mounted:function(){this.getCurrentUser()},methods:{getCurrentUser:function(){var e=this;l.a.get(L+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;e.currentUser=a}).catch(function(t){e.errorHandler(t)})},getAllUsers:function(){var e=this;l.a.get(L+"/api/v1/users",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;e.users=a,e.showUsers=!0}).catch(function(t){e.errorHandler(t)})},errorHandler:function(e){var t=e.response.status;this.showSnackbar=!0,this.snackColor="red lighten-1",401===t&&(this.snackMessage="Вы не авторизованы."),this.snackMessage=e.response.data.message}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:e.subSystem.primaryColor,subtitle:"Редактор пользователей",currentUser:e.currentUser}}),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-btn",{staticClass:"white--text",attrs:{block:"",color:e.subSystem.secondaryColor},nativeOn:{click:function(t){return e.getAllUsers(t)}}},[e._v("Найти пользователей\n              ")])],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-btn",{staticClass:"white--text",attrs:{block:"",color:e.subSystem.secondaryColor},nativeOn:{click:function(e){return(!0)(e)}}},[e._v("Создать пользователя\n              ")])],1)],1),e._v(" "),e.showUsers?a("v-data-table",{staticClass:"elevation-10 mt-4",attrs:{headers:[{text:"Имя пользователя",value:"username"},{text:"ФИО",value:"fio"},{text:"Права",value:"roles"}],items:e.users,"hide-actions":""},scopedSlots:e._u([{key:"headers",fn:function(t){return[a("tr",e._l(t.headers,function(t){return a("th",{key:t._id},[e._v("\n                  "+e._s(t.text)+"\n                ")])}))]}},{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.username))]),e._v(" "),a("td",[e._v(e._s(t.item.fio))]),e._v(" "),a("td",{attrs:{width:"200px"}},[t.item.roles.superuser?a("v-icon",{attrs:{color:"purple darken-4"}},[e._v("face\n                  ")]):e._e(),e._v(" "),t.item.roles.medos.admin?a("v-icon",{attrs:{color:"green darken-4"}},[e._v("local_hospital\n                  ")]):e._e(),e._v(" "),t.item.roles.radiography.admin?a("v-icon",{attrs:{color:"green darken-4"}},[e._v("local_movies\n                  ")]):e._e(),e._v(" "),t.item.roles.laboratory.admin?a("v-icon",{attrs:{color:"green darken-4"}},[e._v("colorize\n                  ")]):e._e(),e._v(" "),t.item.roles.vaccination.admin?a("v-icon",{attrs:{color:"green darken-4"}},[e._v("local_drink\n                  ")]):e._e()],1)])]}}])}):e._e()],1)],1)],1)],1),e._v(" "),a("app-footer",{attrs:{subsystem:e.subSystem.primaryColor,currentUser:e.currentUser}}),e._v(" "),a("v-snackbar",{attrs:{timeout:e.snackBar.timeout,right:"right",color:e.snackBar.color},model:{value:e.snackBar.show,callback:function(t){e.$set(e.snackBar,"show",t)},expression:"snackBar.show"}},[e._v("\n    "+e._s(e.snackBar.message)+"\n  ")])],1)},staticRenderFns:[]},Q=a("VU/8")(V,F,!1,null,null,null).exports,J="http://"+window.location.hostname+":3001",G={data:function(){return{currentUser:{},companies:[],currentAddItem:{},currentRemoveItem:{},currentEditItem:{},currentCompanyItem:{},currentDivisionItem:{},addDialog:{show:!1},removeDialog:{show:!1},editDialog:{show:!1},divisionsListDialog:{show:!1},departmentsListDialog:{show:!1},snackBar:{show:!1,message:"",timeout:5e3,color:""},subSystem:{primaryColor:"light-blue darken-2",secondaryColor:"orange darken-3"},companiesListSearch:"",divisionsListSearch:"",departmentsListSearch:""}},mounted:function(){var e=this;l.a.get(J+"/api/v1/user",{headers:{Authorization:u.getAuthenticationHeader(this)},params:{user_id:this.$cookie.get("user_id")}}).then(function(t){var a=t.data;e.currentUser=a}).catch(function(t){e.errorHandler(t)}),this.getAllCompanies()},methods:{openDivisionsListDialog:function(e){this.currentCompanyItem=e,this.divisionsListDialog.show=!0},closeDivisionsListDialog:function(){this.currentCompanyItem={},this.divisionsListDialog.show=!1},openDepartmentsListDialog:function(e){this.currentDivisionItem=e,this.departmentsListDialog.show=!0},closeDepartmentsListDialog:function(){this.currentDivisionItem={},this.departmentsListDialog.show=!1},openAddDialog:function(e){"company"===e?this.currentAddItem={companyId:"",companyName:" ",companyRate:" "}:"division"===e?this.currentAddItem={divisionId:"",divisionFullName:" ",divisionName:" "}:"department"===e?this.currentAddItem={departmentId:"",departmentName:" "}:(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что добавлять."),this.addDialog.show=!0},noAddDialog:function(){this.addDialog.show=!1,this.currentAddItem={}},yesAddDialog:function(){var e=this;this.currentAddItem.companyId?l.a.post(J+"/api/v1/company/",{companyId:this.currentAddItem.companyId,companyName:this.currentAddItem.companyName,companyRate:this.currentAddItem.companyRate},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.getAllCompanies(),e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)}):this.currentAddItem.divisionId?l.a.post(J+"/api/v1/company/"+this.currentCompanyItem.companyId,{divisionId:this.currentAddItem.divisionId,divisionFullName:this.currentAddItem.divisionFullName,divisionName:this.currentAddItem.divisionName},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.getAllCompanies(),e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.show=!0,e.snackBar.message=t.data.message,e.divisionsListDialog.show=!1}).catch(function(t){e.errorHandler(t)}):this.currentAddItem.departmentId?l.a.post(J+"/api/v1/company/"+this.currentCompanyItem.companyId+"/"+this.currentDivisionItem.divisionId,{departmentId:this.currentAddItem.departmentId,departmentName:this.currentAddItem.departmentName},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.getAllCompanies(),e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=2e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.show=!0,e.snackBar.message=t.data.message,e.divisionsListDialog.show=!1,e.departmentsListDialog.show=!1}).catch(function(t){e.errorHandler(t)}):(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что добавлять."),this.currentAddItem={},this.addDialog.show=!1},openRemoveDialog:function(e){this.currentRemoveItem=e,this.removeDialog.show=!0},noRemoveDialog:function(){this.removeDialog.show=!1,this.currentRemoveItem={}},yesRemoveDialog:function(){var e=this;this.currentRemoveItem.companyId?this.companies.forEach(function(t,a){t===e.currentRemoveItem&&l.a.delete(J+"/api/v1/company/"+e.currentRemoveItem.companyId,{headers:{Authorization:u.getAuthenticationHeader(e)}}).then(function(t){t.data.success?(e.companies.splice(a,1),e.snackBar.show=!0,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=1e3,e.snackBar.message=t.data.message):(e.snackBar.show=!0,e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3,e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})}):this.currentRemoveItem.divisionId?this.companies.forEach(function(t,a){t.companyDivisions.forEach(function(t,r){t===e.currentRemoveItem&&l.a.delete(J+"/api/v1/company/"+e.currentCompanyItem.companyId+"/"+e.currentRemoveItem.divisionId,{headers:{Authorization:u.getAuthenticationHeader(e)}}).then(function(t){t.data.success?(e.companies[a].companyDivisions.splice(r,1),e.snackBar.show=!0,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=1e3,e.snackBar.message=t.data.message):(e.snackBar.show=!0,e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3,e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})})}):this.currentRemoveItem.departmentId?this.companies.forEach(function(t,a){t.companyDivisions.forEach(function(t,r){t.divisionDepartments.forEach(function(t,s){t===e.currentRemoveItem&&l.a.delete(J+"/api/v1/company/"+e.currentCompanyItem.companyId+"/"+e.currentDivisionItem.divisionId+"/"+e.currentRemoveItem.departmentId,{headers:{Authorization:u.getAuthenticationHeader(e)}}).then(function(t){t.data.success?(e.companies[a].companyDivisions[r].divisionDepartments.splice(s,1),e.snackBar.show=!0,e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=1e3,e.snackBar.message=t.data.message):(e.snackBar.show=!0,e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3,e.snackBar.message=t.data.message)}).catch(function(t){e.errorHandler(t)})})})}):(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что удалять."),this.removeDialog.show=!1,this.currentRemoveItem={}},openEditDialog:function(e){this.currentEditItem=e,this.editDialog.show=!0},noEditDialog:function(){this.currentEditItem={},this.editDialog.show=!1},yesEditDialog:function(){var e=this;this.currentEditItem.companyId?l.a.put(J+"/api/v1/company/"+this.currentEditItem.companyId,{companyId:this.currentEditItem.companyId,companyName:this.currentEditItem.companyName,companyRate:this.currentEditItem.companyRate},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.getAllCompanies(),e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=1e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0}).catch(function(t){e.errorHandler(t)}):this.currentEditItem.divisionId?l.a.put(J+"/api/v1/company/"+this.currentCompanyItem.companyId+"/"+this.currentEditItem.divisionId+"/",{divisionId:this.currentEditItem.divisionId,divisionFullName:this.currentEditItem.divisionFullName,divisionName:this.currentEditItem.divisionName},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.getAllCompanies(),e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=1e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0,e.divisionsListDialog.show=!1}).catch(function(t){e.errorHandler(t)}):this.currentEditItem.departmentId?l.a.put(J+"/api/v1/company/"+this.currentCompanyItem.companyId+"/"+this.currentDivisionItem.divisionId+"/"+this.currentEditItem.departmentId,{departmentId:this.currentEditItem.departmentId,departmentName:this.currentEditItem.departmentName},{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){t.data.success?(e.getAllCompanies(),e.snackBar.color="green darken-1 white--text",e.snackBar.timeout=1e3):(e.snackBar.color="red darken-2 white--text",e.snackBar.timeout=5e3),e.snackBar.message=t.data.message,e.snackBar.show=!0,e.divisionsListDialog.show=!1,e.departmentsListDialog.show=!1}).catch(function(t){e.errorHandler(t)}):(this.snackBar.show=!0,this.snackBar.color="red lighten-1",this.snackBar.message="Не знаю, что удалять."),this.editDialog.show=!1,this.currentRemoveItem={}},getAllCompanies:function(){var e=this;l.a.get(J+"/api/v1/companies",{headers:{Authorization:u.getAuthenticationHeader(this)}}).then(function(t){var a=t.data;!0===a.success?(e.companies=a.companies,e.snackBar.show=!0,e.snackBar.color="green darken-1 white--text",e.snackBar.message="Компании загружены",e.snackBar.timeout=1e3):(e.snackBar.show=!0,e.snackBar.color="red darken-1 white--text",e.snackBar.message="Компаний не найдено",e.snackBar.timeout=5e3)}).catch(function(t){e.errorHandler(t)})},errorHandler:function(e){var t=e.response.status;this.snackBar.show=!0,this.snackBar.color="red lighten-1",401===t&&(this.snackBar.message="Вы не авторизованы."),this.snackBar.message=e.response.data.message}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uwd-container"},[a("app-header",{attrs:{subsystem:e.subSystem.primaryColor,subtitle:"Редактор предприятий"}}),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"text-xs-center"},[e._v("Редактор предприятий")]),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Поиск","hide-details":""},model:{value:e.companiesListSearch,callback:function(t){e.companiesListSearch=t},expression:"companiesListSearch"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-btn",{attrs:{color:e.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){e.openAddDialog("company")}}},[e._v("\n                  Добавить\n                  предприятие\n                ")])],1)],1),e._v(" "),e.companies.length>0?a("v-data-table",{staticClass:"elevation-10",attrs:{headers:[{text:"Код",value:"companyId"},{text:"Название предприятия",value:"companyName"},{text:"Тариф",value:"companyRate"},{text:"Действия"}],items:e.companies,search:e.companiesListSearch,"no-data-text":"Информации не найдено","no-results-text":"По запросу ничего не найдено","rows-per-page-items":[7,15,{text:"Все",value:-1}],"rows-per-page-text":"Строк на странице:"},scopedSlots:e._u([{key:"headers",fn:function(t){return[a("tr",e._l(t.headers,function(t){return a("th",{key:t._id},[e._v("\n                    "+e._s(t.text)+"\n                  ")])}))]}},{key:"items",fn:function(t){return[a("tr",[a("td",{attrs:{width:"90px"}},[e._v(e._s(t.item.companyId))]),e._v(" "),a("td",[e._v(e._s(t.item.companyName))]),e._v(" "),a("td",{attrs:{width:"90px"}},[e._v(e._s(t.item.companyRate))]),e._v(" "),a("td",{attrs:{width:"211px"}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openDivisionsListDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("list")])],1),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openEditDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("edit")])],1),e._v(" "),a("v-btn",{attrs:{color:"red darken-2",icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1)],1)])]}},{key:"pageText",fn:function(t){var a=t.pageStart,r=t.pageStop;return[e._v("\n                с "+e._s(a)+" по "+e._s(r)+"\n              ")]}}])}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("app-footer",{attrs:{subsystem:e.subSystem.primaryColor,currentUser:e.currentUser.fio}}),e._v(" "),a("v-snackbar",{attrs:{timeout:e.snackBar.timeout,right:"right",color:e.snackBar.color},model:{value:e.snackBar.show,callback:function(t){e.$set(e.snackBar,"show",t)},expression:"snackBar.show"}},[e._v("\n    "+e._s(e.snackBar.message)+"\n  ")]),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.divisionsListDialog.show,callback:function(t){e.$set(e.divisionsListDialog,"show",t)},expression:"divisionsListDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          "+e._s(e.currentCompanyItem.companyId)+" — "+e._s(e.currentCompanyItem.companyName)+"\n        ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticStyle:{padding:"4px"},attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Поиск","hide-details":""},model:{value:e.divisionsListSearch,callback:function(t){e.divisionsListSearch=t},expression:"divisionsListSearch"}})],1),e._v(" "),a("v-flex",{staticStyle:{padding:"4px"},attrs:{sm12:"",md4:""}},[a("v-btn",{attrs:{color:e.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){e.openAddDialog("division")}}},[e._v("\n              Добавить цех\n            ")])],1)],1)],1),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.currentCompanyItem.companyId?a("v-data-table",{attrs:{headers:[{text:"Код",value:"divisionId"},{text:"Название",value:"divisionFullName"},{text:"Название",value:"divisionName"},{text:"Действия"}],items:e.currentCompanyItem.companyDivisions,search:e.divisionsListSearch,"no-data-text":"Информации не найдено","no-results-text":"По запросу ничего не найдено","rows-per-page-items":[6,12,{text:"Все",value:-1}],"rows-per-page-text":"Строк на странице:"},scopedSlots:e._u([{key:"headers",fn:function(t){return[a("tr",e._l(t.headers,function(t){return a("th",{key:t._id},[e._v("\n                  "+e._s(t.text)+"\n                ")])}))]}},{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.divisionId))]),e._v(" "),a("td",[e._v(e._s(t.item.divisionFullName))]),e._v(" "),a("td",[e._v(e._s(t.item.divisionName))]),e._v(" "),a("td",{attrs:{width:"211px"}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openDepartmentsListDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("list")])],1),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openEditDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("edit")])],1),e._v(" "),a("v-btn",{attrs:{color:"red darken-2",icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1)],1)])]}},{key:"pageText",fn:function(t){var a=t.pageStart,r=t.pageStop;return[e._v("\n              с "+e._s(a)+" по "+e._s(r)+"\n            ")]}}])}):e._e()],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.closeDivisionsListDialog(t)}}},[e._v("Закрыть")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.departmentsListDialog.show,callback:function(t){e.$set(e.departmentsListDialog,"show",t)},expression:"departmentsListDialog.show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          "+e._s(e.currentDivisionItem.divisionId)+" — "+e._s(e.currentDivisionItem.divisionName)+"\n        ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticStyle:{padding:"4px"},attrs:{sm12:"",md8:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Поиск","hide-details":""},model:{value:e.departmentsListSearch,callback:function(t){e.departmentsListSearch=t},expression:"departmentsListSearch"}})],1),e._v(" "),a("v-flex",{staticStyle:{padding:"4px"},attrs:{sm12:"",md4:""}},[a("v-btn",{attrs:{color:e.subSystem.secondaryColor,dark:"",large:"",block:""},nativeOn:{click:function(t){e.openAddDialog("department")}}},[e._v("\n              Добавить участок\n            ")])],1)],1)],1),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.currentDivisionItem.divisionId?a("v-data-table",{attrs:{headers:[{text:"Код",value:"departmentId"},{text:"Название",value:"departmentName"},{text:"Действия"}],items:e.currentDivisionItem.divisionDepartments,search:e.departmentsListSearch,"no-data-text":"Информации не найдено","no-results-text":"По запросу ничего не найдено","rows-per-page-items":[6,12,{text:"Все",value:-1}],"rows-per-page-text":"Строк на странице:"},scopedSlots:e._u([{key:"headers",fn:function(t){return[a("tr",e._l(t.headers,function(t){return a("th",{key:t._id},[e._v("\n                  "+e._s(t.text)+"\n                ")])}))]}},{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.departmentId))]),e._v(" "),a("td",[e._v(e._s(t.item.departmentName))]),e._v(" "),a("td",{attrs:{width:"211px"}},[a("v-btn",{attrs:{color:e.subSystem.primaryColor,icon:""},nativeOn:{click:function(a){e.openEditDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("edit")])],1),e._v(" "),a("v-btn",{attrs:{color:"red darken-2",icon:""},nativeOn:{click:function(a){e.openRemoveDialog(t.item)}}},[a("v-icon",{attrs:{color:"white"}},[e._v("delete")])],1)],1)])]}},{key:"pageText",fn:function(t){var a=t.pageStart,r=t.pageStop;return[e._v("\n              с "+e._s(a)+" по "+e._s(r)+"\n            ")]}}])}):e._e()],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.primaryColor,flat:""},nativeOn:{click:function(t){return e.closeDepartmentsListDialog(t)}}},[e._v("Закрыть")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.addDialog.show,callback:function(t){e.$set(e.addDialog,"show",t)},expression:"addDialog.show"}},[a("v-card",[e.currentAddItem.companyName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Добавить предприятие")])]):e._e(),e._v(" "),e.currentAddItem.divisionName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Добавить цех в "),a("span",{staticClass:"green--text text--darken-2"},[e._v("«"+e._s(e.currentCompanyItem.companyName)+"»")])])]):e._e(),e._v(" "),e.currentAddItem.departmentName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Добавить участок в "),a("span",{staticClass:"green--text text--darken-2"},[e._v("«"+e._s(e.currentDivisionItem.divisionName)+"»")])])]):e._e(),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.currentAddItem.companyName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Код предприятия",color:e.subSystem.primaryColor},model:{value:e.currentAddItem.companyId,callback:function(t){e.$set(e.currentAddItem,"companyId",t)},expression:"currentAddItem.companyId"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название предприятия",color:e.subSystem.primaryColor},model:{value:e.currentAddItem.companyName,callback:function(t){e.$set(e.currentAddItem,"companyName",t)},expression:"currentAddItem.companyName"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Тариф предприятия",color:e.subSystem.primaryColor},model:{value:e.currentAddItem.companyRate,callback:function(t){e.$set(e.currentAddItem,"companyRate",t)},expression:"currentAddItem.companyRate"}})],1)],1):e._e(),e._v(" "),e.currentAddItem.divisionName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Код цеха",color:e.subSystem.primaryColor},model:{value:e.currentAddItem.divisionId,callback:function(t){e.$set(e.currentAddItem,"divisionId",t)},expression:"currentAddItem.divisionId"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Полное название цеха",color:e.subSystem.primaryColor},model:{value:e.currentAddItem.divisionFullName,callback:function(t){e.$set(e.currentAddItem,"divisionFullName",t)},expression:"currentAddItem.divisionFullName"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название цеха",color:e.subSystem.primaryColor},model:{value:e.currentAddItem.divisionName,callback:function(t){e.$set(e.currentAddItem,"divisionName",t)},expression:"currentAddItem.divisionName"}})],1)],1):e._e(),e._v(" "),e.currentAddItem.departmentName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Код участка",color:e.subSystem.primaryColor},model:{value:e.currentAddItem.departmentId,callback:function(t){e.$set(e.currentAddItem,"departmentId",t)},expression:"currentAddItem.departmentId"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Название участка",color:e.subSystem.primaryColor},model:{value:e.currentAddItem.departmentName,callback:function(t){e.$set(e.currentAddItem,"departmentName",t)},expression:"currentAddItem.departmentName"}})],1)],1):e._e()],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.secondaryColor,flat:""},nativeOn:{click:function(t){return e.noAddDialog(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesAddDialog(t)}}},[e._v("Добавить")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.editDialog.show,callback:function(t){e.$set(e.editDialog,"show",t)},expression:"editDialog.show"}},[a("v-card",[e.currentEditItem.companyName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Редактировать предприятие — "),a("span",{staticClass:"green--text text--darken-2"},[e._v("«"+e._s(e.currentEditItem.companyName)+"»")])])]):e._e(),e._v(" "),e.currentEditItem.divisionName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Редактировать цех — "),a("span",{staticClass:"green--text text--darken-2"},[e._v("«"+e._s(e.currentEditItem.divisionName)+"»")])])]):e._e(),e._v(" "),e.currentEditItem.departmentName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Редактировать участок — "),a("span",{staticClass:"green--text text--darken-2"},[e._v("«"+e._s(e.currentEditItem.departmentName)+"»")])])]):e._e(),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.currentEditItem.companyName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Код предприятия",color:e.subSystem.primaryColor},model:{value:e.currentEditItem.companyId,callback:function(t){e.$set(e.currentEditItem,"companyId",t)},expression:"currentEditItem.companyId"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название предприятия",color:e.subSystem.primaryColor},model:{value:e.currentEditItem.companyName,callback:function(t){e.$set(e.currentEditItem,"companyName",t)},expression:"currentEditItem.companyName"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Тариф предприятия",color:e.subSystem.primaryColor},model:{value:e.currentEditItem.companyRate,callback:function(t){e.$set(e.currentEditItem,"companyRate",t)},expression:"currentEditItem.companyRate"}})],1)],1):e._e(),e._v(" "),e.currentEditItem.divisionName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Код цеха",color:e.subSystem.primaryColor},model:{value:e.currentEditItem.divisionId,callback:function(t){e.$set(e.currentEditItem,"divisionId",t)},expression:"currentEditItem.divisionId"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Полное название цеха",color:e.subSystem.primaryColor},model:{value:e.currentEditItem.divisionFullName,callback:function(t){e.$set(e.currentEditItem,"divisionFullName",t)},expression:"currentEditItem.divisionFullName"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md4:""}},[a("v-text-field",{attrs:{label:"Название цеха",color:e.subSystem.primaryColor},model:{value:e.currentEditItem.divisionName,callback:function(t){e.$set(e.currentEditItem,"divisionName",t)},expression:"currentEditItem.divisionName"}})],1)],1):e._e(),e._v(" "),e.currentEditItem.departmentName?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Код участка",color:e.subSystem.primaryColor},model:{value:e.currentEditItem.departmentId,callback:function(t){e.$set(e.currentEditItem,"departmentId",t)},expression:"currentEditItem.departmentId"}})],1),e._v(" "),a("v-flex",{attrs:{sm12:"",md6:""}},[a("v-text-field",{attrs:{label:"Название участка",color:e.subSystem.primaryColor},model:{value:e.currentEditItem.departmentName,callback:function(t){e.$set(e.currentEditItem,"departmentName",t)},expression:"currentEditItem.departmentName"}})],1)],1):e._e()],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.secondaryColor,flat:""},nativeOn:{click:function(t){return e.noEditDialog(t)}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:e.subSystem.primaryColor},nativeOn:{click:function(t){return e.yesEditDialog(t)}}},[e._v("Сохранить")])],1)],1)],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.removeDialog.show,callback:function(t){e.$set(e.removeDialog,"show",t)},expression:"removeDialog.show"}},[a("v-card",[e.currentRemoveItem.companyName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Вы точно хотите удалить "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentRemoveItem.companyName)+"»")])])]):e._e(),e._v(" "),e.currentRemoveItem.divisionName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Вы точно хотите удалить "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentRemoveItem.divisionName)+"»")])])]):e._e(),e._v(" "),e.currentRemoveItem.departmentName?a("v-card-title",[a("span",{staticClass:"headline"},[e._v("\n          Вы точно хотите удалить "),a("span",{staticClass:"red--text text--darken-2"},[e._v("«"+e._s(e.currentRemoveItem.departmentName)+"»")])])]):e._e(),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:e.subSystem.secondaryColor,flat:""},nativeOn:{click:function(t){return e.noRemoveDialog(t)}}},[e._v("Нет")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red darken-2"},nativeOn:{click:function(t){return e.yesRemoveDialog(t)}}},[e._v("Да")])],1)],1)],1)],1)},staticRenderFns:[]};var q=a("VU/8")(G,X,!1,function(e){a("II7m")},null,null).exports,Y={props:["subsystem","subtitle","currentUser"],data:function(){return{drawer:!0}},methods:{signOut:function(){u.signOut(this)}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",[a("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.currentUser.roles?a("v-list",{attrs:{subheader:""}},[e.currentUser.roles.medos.admin||e.currentUser.roles.medos.receptionist||e.currentUser.roles.medos.premedical||e.currentUser.roles.medos.functionalDiagnostics||e.currentUser.roles.medos.doctor||e.currentUser.roles.medos.exam||e.currentUser.roles.superuser?a("div",[a("v-subheader",{attrs:{inset:""}},[e._v("Профосмотр")]),e._v(" "),a("v-divider"),e._v(" "),e.currentUser.roles.medos.admin||e.currentUser.roles.medos.receptionist||e.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("local_hospital")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/medos/reception"}},[a("v-list-tile-title",[e._v("Регистратура профосмотра")])],1)],1)],1):e._e(),e._v(" "),e.currentUser.roles.medos.admin||e.currentUser.roles.medos.premedical||e.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("local_hospital")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/medos/premedical"}},[a("v-list-tile-title",[e._v("Доврачебный кабинет")])],1)],1)],1):e._e(),e._v(" "),e.currentUser.roles.medos.admin||e.currentUser.roles.medos.doctor||e.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("local_hospital")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/medos/doctor"}},[a("v-list-tile-title",[e._v("Врач профосмотра")])],1)],1)],1):e._e(),e._v(" "),e.currentUser.roles.medos.admin||e.currentUser.roles.medos.exam||e.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("local_hospital")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/medos/exam"}},[a("v-list-tile-title",[e._v("Обследования профосмотра")])],1)],1)],1):e._e(),e._v(" "),a("v-divider")],1):e._e(),e._v(" "),e.currentUser.roles.radiography.assistant||e.currentUser.roles.radiography.admin||e.currentUser.roles.laboratory.assistant||e.currentUser.roles.laboratory.admin||e.currentUser.roles.vaccination.assistant||e.currentUser.roles.vaccination.admin||e.currentUser.roles.superuser?a("div",[a("v-subheader",{attrs:{inset:""}},[e._v("Параклиника")]),e._v(" "),a("v-divider"),e._v(" "),e.currentUser.roles.radiography.assistant||e.currentUser.roles.radiography.admin||e.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("local_movies")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/radiography"}},[a("v-list-tile-title",[e._v("Снимки")])],1)],1)],1):e._e(),e._v(" "),e.currentUser.roles.laboratory.assistant||e.currentUser.roles.laboratory.admin||e.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("colorize")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/laboratory"}},[a("v-list-tile-title",[e._v("Лаборатория")])],1)],1)],1):e._e(),e._v(" "),e.currentUser.roles.vaccination.assistant||e.currentUser.roles.vaccination.admin||e.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("local_drink")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/vaccines"}},[a("v-list-tile-title",[e._v("Прививки")])],1)],1)],1):e._e(),e._v(" "),a("v-divider")],1):e._e(),e._v(" "),e.currentUser.roles.medos.admin||e.currentUser.roles.superuser?a("div",[a("v-subheader",{attrs:{inset:""}},[e._v("Управление")]),e._v(" "),a("v-divider"),e._v(" "),e.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("settings")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/admin/users"}},[a("v-list-tile-title",[e._v("Редактор пользователей")])],1)],1)],1):e._e(),e._v(" "),e.currentUser.roles.medos.admin||e.currentUser.roles.superuser?a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("settings")])],1),e._v(" "),a("v-list-tile-content",[a("router-link",{attrs:{to:"/admin/companies"}},[a("v-list-tile-title",[e._v("Редактор предприятий")])],1)],1)],1):e._e()],1):e._e()]):e._e()],1),e._v(" "),a("v-toolbar",{attrs:{color:e.subsystem,dark:"",app:"",fixed:"","clipped-left":""}},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),a("v-toolbar-title",[e._v("МБУЗ ГКП №7 - "+e._s(e.subtitle))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-tooltip",{attrs:{bottom:""}},[a("v-btn",{attrs:{slot:"activator",color:"transparent",large:"",icon:""},nativeOn:{click:function(t){return e.signOut(t)}},slot:"activator"},[a("v-icon",[e._v("exit_to_app")])],1),e._v(" "),a("span",[e._v("Выйти")])],1)],1)],1)},staticRenderFns:[]},K=a("VU/8")(Y,W,!1,null,null,null).exports,Z={props:{subsystem:"",currentUser:{type:Object}},computed:{VERSION:function(){return a("7YgM").version},userName:function(){return this.currentUser.fio}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-footer",{attrs:{color:e.subsystem,app:""}},[a("span",{staticClass:"white--text"},[e._v("Пользователь: "+e._s(e.userName))]),e._v(" "),a("span",{staticClass:"white--text",staticStyle:{position:"absolute",right:"12px"}},[e._v("версия: "+e._s(e.VERSION))])])},staticRenderFns:[]},te=a("VU/8")(Z,ee,!1,null,null,null).exports;r.a.component("app-header",K),r.a.component("app-footer",te),r.a.use(n.a);var ae=new n.a({routes:[{path:"/login",name:"Auth2",component:v},{path:"/medos/reception",name:"MedosReception",component:g},{path:"/medos/premedical",name:"MedosPremedical",component:b},{path:"/medos/doctor",name:"MedosDoctor",component:D},{path:"/medos/exam",name:"MedosExam",component:S},{path:"/radiography",name:"Radiography",component:A},{path:"/laboratory",name:"Laboratory",component:O},{path:"/vaccines",name:"Vaccination",component:T},{path:"/admin/users",name:"Users",component:Q},{path:"/admin/companies",name:"Companies",component:q}]});ae.beforeEach(function(e,t,a){var r=u.user.authenticated,s=!!u.user.roles&&u.user.roles;"/login"!==e.path?r?"/"===e.path&&"/login"===t.path?(console.log("redirect logged users to corresponding page"),s.superuser?ae.push("/admin/users"):s.medos&&(0!==s.medos.doctor||s.medos.admin)?ae.push("/medos/doctor"):s.medos&&0!==s.medos.exam?ae.push("/medos/exam"):s.medos&&s.medos.receptionist?ae.push("/medos/reception"):s.medos&&s.medos.premedical?ae.push("/medos/premedical"):s.radiography&&(s.medos.radiography.admin||s.medos.radiography.assistant)?ae.push("/radiography"):s.laboratory&&(s.medos.laboratory.admin||s.medos.laboratory.assistant)?ae.push("/laboratory"):s.vaccination&&(s.medos.vaccination.admin||s.medos.vaccination.assistant)?ae.push("/vaccination"):a()):("/login"!==t.path?(console.log("redirect authenticated users who tried another page from another page"),a()):(console.log("redirect authenticated users who tried another page from login"),ae.push("/login")),"/"!==e.path&&"/#/"!==e.path||(console.log("redirect to login if authenticated & tried home from another page"),ae.push("/login")),a()):ae.push("/login"):a()});var re=ae,se=a("K/Lq"),oe=a.n(se),ne=a("3EgV"),ie=a.n(ne),le=(a("7zck"),a("PJh5")),ce=a.n(le);r.a.use(oe.a),r.a.use(ie.a),r.a.filter("formatDate",function(e){if(e)return ce()(String(e)).format("DD.MM.YYYY")}),r.a.config.productionTip=!1,u.checkAuthentication(),new r.a({el:"#app",router:re,render:function(e){return e(o)}})},eola:function(e,t){},oTPd:function(e,t){},p1bC:function(e,t){},pHTf:function(e,t){},r10Q:function(e,t){},uWSn:function(e,t){},uslO:function(e,t,a){var r={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function s(e){return a(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="uslO"},zbvE:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9284d09a9fe5607e555f.js.map